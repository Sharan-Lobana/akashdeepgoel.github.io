/*!CK:2785015299!*//*1432082647,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["A3ozn"]); }

__d("PhotosUploadWaterfallErrorCodes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25};},null);
__d("ImageResizer",["ArbiterMixin","BlobFactory","DOM","UserAgent_DEPRECATED","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=function(m,n,o,p,q){this._input=m;this._image=null;this._canvas=null;this._rotation=0;this._maxWidth=n;this._maxHeight=o;this._outputMime=p||'image/jpeg';this._outputQuality=(q===(void 0))?.87:q;};l.isSupported=function(){if(window.File&&window.FileReader){var m=i.create('canvas');if(m.toBlob||(m.toDataURL&&window.ArrayBuffer&&window.Uint8Array&&h.isSupported()))return true;}return false;};k(l.prototype,g);k(l.prototype,{setOrientation:function(m){this._rotation={1:0,3:180,6:90,8:270}[m]||0;},resize:function(){if(this._input instanceof HTMLCanvasElement||this._input instanceof HTMLImageElement){this._image=this._input;this._handleImage();}else if(typeof this._input=="string"){this._loadImage(this._input);}else if(this._input instanceof window.File)this._loadFile(this._input);},_rotatedToSide:function(){return (this._rotation%180)==90;},_prepareError:function(m){return (function(){this.inform.bind(this,"error",m);}.bind(this));},_loadFile:function(m){this._fileLoadTime=Date.now();var n=new FileReader();n.onload=this._handleFile.bind(this);n.onerror=this._prepareError("Could not read tile.");n.readAsDataURL(m);},_handleFile:function(event){this._fileLoadTime=Date.now()-this._fileLoadTime;var m=event.target.result;this._loadImage(m);},_loadImage:function(m){this._imageLoadTime=Date.now();this._image=i.create('img');this._image.onload=this._handleImage.bind(this);this._image.onerror=this._prepareError("Could not load image.");this._image.src=m;},_handleImage:function(){if(this._imageLoadTime)this._imageLoadTime=Date.now()-this._imageLoadTime;if(this._input instanceof window.File){var m=this._calculateRatio();if(m>=1){this._skippedResizing=true;return this._handleBlob(this._input);}}this._skippedResizing=false;this._drawTransformed();this._extractBlob();},_drawTransformed:function(){var m=Date.now(),n=this._calculateRatio(),o=0;if(j.chrome())if(n<.25){o=2;}else if(n<.5)o=1;var p=this._drawResizedCanvas(this._image,n*Math.pow(2,o));for(var q=0;q<o;q++)p=this._drawResizedCanvas(p,.5);if(this._rotation)p=this._drawRotatedCanvas(p);this._canvas=p;this._drawTime=Date.now()-m;},_drawResizedCanvas:function(m,n){var o=i.create('canvas');o.width=m.width*n;o.height=m.height*n;var p=o.getContext("2d");p.scale(n,n);p.drawImage(m,0,0);return o;},_drawRotatedCanvas:function(m){var n=i.create('canvas');if(this._rotatedToSide()){n.width=m.height;n.height=m.width;}else{n.width=m.width;n.height=m.height;}var o=n.getContext("2d");o.translate(n.width*.5,n.height*.5);o.rotate(Math.PI*(this._rotation/180));o.translate(m.width*-.5,m.height*-.5);o.drawImage(m,0,0,m.width,m.height);return n;},_calculateRatio:function(){var m=1,n=this._rotatedToSide()?this._maxHeight:this._maxWidth,o=this._rotatedToSide()?this._maxWidth:this._maxHeight,p=n/this._image.width,q=o/this._image.height;if(p<m&&p>0)m=p;if(q<m&&q>0)m=q;return m;},_extractBlob:function(){this._extractionStart=Date.now();if(this._canvas.toBlob){this._canvas.toBlob(this._handleBlob.bind(this),this._outputMime,this._outputQuality);return;}var m=this._canvas.toDataURL(this._outputMime,this._outputQuality),n=m.match(/^data:(.*?);base64,/);if(!n){this._prepareError("Couldn't get base64 encoded data from canvas.")();return;}var o=n[1],p=m.substr(n[0].length),q=window.atob(p),r=new ArrayBuffer(q.length),s=new Uint8Array(r);for(var t=0;t<q.length;t++)s[t]=q.charCodeAt(t);var u=h.getBlob([r],{type:o});this._handleBlob(u);},_handleBlob:function(m){this._canvas=this._canvas||i.create('canvas');m.performanceData={blockingDraw:+true,blockingExtraction:+!this._canvas.toBlob,imageLoadTime:this._imageLoadTime,fileLoadTime:this._fileLoadTime,skippedResizing:+this._skippedResizing};if(!this._skippedResizing)k(m.performanceData,{extractionTime:Date.now()-this._extractionStart,drawTime:this._drawTime});this.inform('resized',m);}});e.exports=l;},null);
__d("EntstreamStoryDeduper",["DOM","csx","CSS"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m){var n={};for(var o=0;o<l.length;o++){var p=l[o],q=p.getAttribute('data-dedupekey');if(n[q]){if(m){i.hide(p);}else g.remove(p);}else n[q]=1;}}var k={dedupe:function(l,m){m=m||"._5jmm";var n=g.scry(l,m);n=n.filter(function(o){return o.getAttribute('data-dedupekey');});j(n,false);},dedupeHide:function(l,m){m=m||"._5jmm";var n=g.scry(l,m),o=n.filter(function(p){return p.getAttribute('data-dedupekey')&&i.shown(p);});j(o,true);}};e.exports=k;},null);
__d("runAfterScrollingStops",["Arbiter","Event","Run","debounceAcrossTransitions","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(w,x,y){if(x&&o[x])return;if(!n){g.subscribe('page_transition',v);n=true;}if(!m){w();return;}x&&(o[x]=1);p.push(w);if(!y){if(r){i.onLeave(v);r=false;}q.push(p.length-1);}}var m,n,o={},p=[],q=[],r=true,s=500,t=j(function(){m=false;var w=p;p=[];q=[];o={};for(var x=0,y=w.length;x<y;++x)w[x]();},s);function u(){m=true;t();}function v(){var w=q;q=[];r=true;for(var x=0,y=w.length;x<y;++x)p[w[x]]=k;}h.listen(window,'scroll',u);e.exports=l;},null);
__d("LitestandOffscreenController",["Arbiter","CSS","DOMQuery","Event","NavigationMessage","Run","Scroll","Style","SubscriptionsHandler","Vector","cx","csx","getOrCreateDOMID","queryThenMutateDOM","runAfterScrollingStops","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=1,x=9,y=10,z={},aa=false,ba,ca,da,ea,fa=[];function ga(){ba&&ba.release();ba=null;aa=false;}function ha(){z={};fa=[];}function ia(){if(h.hasClass(document.body,"_5vb_"))return y;return x;}function ja(){ea=ea||p.getViewportDimensions().y;ca=p.getScrollPosition().y;da=ca+ea;if(w){ca-=ea*w;da+=ea*w;}for(var ra in z){var sa=z[ra];sa.position=p.getElementPosition(sa.element).y;if(!sa.hidden)sa.height=sa.element.offsetHeight;}}function ka(){var ra=[];for(var sa in z){var ta=z[sa],ua=ta.position,va=ua+ta.height<ca,wa=ua>da;if(!ta.hidden&&(va||wa)){la(ta);}else if(!va&&!wa){ta.pendingHide=false;if(ta.hidden){if(ta.dirty&&ua<ca){ra.push(sa);h.addClass(ma(ta),"_49nu");}else n.apply(ta.element,{height:'',marginBottom:''});h.show(ma(ta));ta.dirty=false;ta.hidden=false;}}}if(!ra.length)return;var xa=0;t(function(){for(var ya=0,za=ra.length;ya<za;ya++){var ab=z[ra[ya]];xa+=ab.height-ma(ab).offsetHeight+n.getFloat(ab.element,'marginBottom');}},function(){for(var ya=0,za=ra.length;ya<za;ya++){var ab=z[ra[ya]];h.removeClass(ma(ab),"_49nu");n.apply(ab.element,{height:'',marginBottom:''});}xa&&(m.setTop(document.body,m.getTop(document.body)-xa));});}function la(ra){if(!ra.pendingHide){fa.push(ra);ra.pendingHide=true;}}function ma(ra){if(ra.wrapperElement)return ra.wrapperElement;var sa=ra.element;if(sa.firstElementChild)return (ra.wrapperElement=sa.firstElementChild);for(var ta=0;ta<sa.childNodes.length;ta++)if(sa.childNodes[ta].tagName)return (ra.wrapperElement=sa.childNodes[ta]);}function na(){var ra=ia()+'px';for(var sa=0;sa<fa.length;sa++){var ta=fa[sa];if(i.scry(ta.element,"._52fb").length)ta.pendingHide=false;if(ta&&ta.element&&ta.pendingHide&&!ta.hidden){n.apply(ta.element,{height:ta.height+'px',marginBottom:ra});h.hide(ma(ta));ta.hidden=true;ta.pendingHide=false;}}fa=[];}function oa(){u(na,'LitestandOffscreenController/hide');t(ja,ka,'LitestandOffscreenController');}function pa(){l.onLeave(ga);ba=new o();ba.addSubscriptions(g.subscribe(k.NAVIGATION_BEGIN,ha),j.listen(window,'scroll',v(oa)),j.listen(window,'resize',v(function(){ea=null;oa();})));aa=true;}var qa={attachSubstream:function(ra){aa||pa();z[s(ra)]={element:ra};}};e.exports=qa;},null);
__d("ViewportAtFeedTop",["getElementPosition","LitestandStream","ViewportBounds"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={isTrue:function(){if(i.getTop()>g(h.getStreamRoot()).y)return false;return true;}};e.exports=j;},null);
__d("LitestandStreamLoader",["Arbiter","Bootloader","CSS","DOM","EntstreamStoryDeduper","Event","JSXDOM","LitestandStreamConfig","LitestandStoryInsertionStatus","LitestandMessages","LitestandOffscreenController","LitestandStream","NavigationMessage","OnVisible","Run","throttle","UserActivity","$","copyProperties","ge","getUnboundedScrollPosition","ForceFetchAfterLongInactiveQE","NewStoriesPillConfig","ViewportAtFeedTop","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa;ea(['LiveFeedBar'],function(pb){fa=pb;});var ga=false,ha={},ia,ja,ka,la,ma,na,oa,pa=0,qa,ra,sa=[],ta=60000,ua=30,va=0,wa,xa;function ya(){u.onLeave(za);sa=[g.subscribe(s.NAVIGATION_BEGIN,za),g.subscribe(p.NEWER_STORIES_INSERTED,function(){xa=null;}),g.subscribe('useractivity/focus',function(){var pb=Date.now()-w.getLastLeaveTime(),qb=ua*ta;if(ba.forceRefresh&&pb>qb)window.location.href=window.location.href;})];ga=true;}function za(){g.inform(p.LEAVE_HOME);ha={};ra=null;pa=0;sa.forEach(g.unsubscribe);sa=[];ia&&ia.remove();ma&&clearTimeout(ma);ma=null;na&&clearTimeout(na);na=null;la=null;xa=null;qa&&qa.remove();qa=null;ga=false;va=0;}function ab(pb){na&&clearTimeout(na);na=setTimeout(function(){na=null;hb(false);},pb);}function bb(pb){ma&&clearTimeout(ma);ma=setTimeout(function(){ma=null;hb(true);},pb);}function cb(){if(ra&&la&&ra.pollIntervalMS&&ra.pollIntervalMS>1000){w.setIdleTime(ra.newStoryIdleTime);bb(ra.pollIntervalMS);if(ca.show_new_stories_pill)ab(ca.middle_feed_polling_time);}}function db(){ia=new t(j.find(ja,'a'),nb.bind(null),false,ra.bufferPixels);}function eb(){var pb=aa(window).y;return pb>ra.firstPagerScrollBuffer;}function fb(){if(eb()){db();qa&&qa.remove();qa=null;}}function gb(pb){var qb=j.find(ja,'a');l.listen(qb,'click',function(event){nb();qa&&qa.remove();qa=null;event.preventDefault();});var rb=j.scry(oa,r.getStoriesSelector()).length,sb=ra.maxStories;if(sb&&rb>=sb)return;if(pb&&!eb()){qa=l.listen(window,'scroll',v(fb));}else db();}function hb(pb){if(!la)return;if(!w.isActive(ra.newStoryIdleTime)){w.subscribeOnce(hb.bind(null,pb));return;}if(w.hasBeenInactive()){w.resetActiveStatus();var qb=ra.pollIntervalMS,rb=Date.now()-w.getLastInActiveEnds();if(rb<qb){if(pb){bb(qb-rb);}else ab(qb-rb);return;}}if(pb){if(!r.canInsertNewerStories()){bb(ra.pollIntervalMS);return;}}else if(da.isTrue()||!o.canInsert()){ab(ca.middle_feed_polling_time);return;}ib(false);}function ib(pb){if(!la)return;ma&&clearTimeout(ma);na&&clearTimeout(na);if(!xa){var qb=r.getStreamRoot();xa=m.div({style:{height:0,width:qb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});j.prependContent(qb,xa);g.inform(p.NEW_STORIES_CONTAINER_CREATED,xa);}var rb=m.div(null);j.prependContent(xa,rb);h.loadModules(["UIPagelet"],function(sb){sb.loadFromEndpoint('LitestandNewerStoriesPagelet',rb,y(la,{cursor:wa,containerID:j.getID(xa),fblogo:pb}),{crossPage:true});});g.inform(p.PILL_PAGELET_REQUEST_SENT);}function jb(){var pb=j.getID(ja);i.addClass(ja,'async_saving');var qb=lb(),rb=qb.cursor,sb=qb.storiesCount;if(ha[rb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+rb);ha[rb]=rb;var tb={cursor:rb,pager_config:ka,pager_id:pb,scroll_count:++pa,feed_stream_id:r.getFeedStreamID(),client_stories_count:sb};h.loadModules(["UIPagelet"],function(ub){ub.loadFromEndpoint(ra.pagerController,j.getID(oa),tb,{append:true,automatic:true,usePipe:true,crossPage:ra.crossPage});});}function kb(){return mb()[0].getAttribute('data-cursor');}function lb(){var pb=mb(),qb={};qb.cursor=pb[pb.length-1].getAttribute('data-cursor');qb.storiesCount=pb.length;return qb;}function mb(){var pb=j.scry(oa,r.getStoriesSelector());return pb.filter(function(qb){return qb.getAttribute('data-cursor');});}function nb(){jb();ia&&ia.remove();ia=null;}var ob={register:function(pb,qb,rb,sb){ga||ya();ra=y({bufferPixels:1000,firstPagerScrollBuffer:100,maxStories:null,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},qb);ka=rb;oa=x(pb);wa=kb();ja=sb;gb(true);cb();},removeOldPager:function(pb,qb){if(pb)j.remove(x(pb));i.show(x(qb));},removeLoadingIndicator:function(pb,qb){var rb=z(pb);if(rb)j.remove(rb);i.show(qb);},moreStoriesInserted:function(pb){g.inform(p.STORIES_INSERTED,{substream_id:pb});var qb=x(pb);if(n.hide_offscreen_substreams)q.attachSubstream(qb);},attachNewPager:function(pb){k.dedupeHide(r.getStreamRoot(),r.getStoriesSelector());ja=pb;ja&&gb(false);},setPollerData:function(pb){if(pb){la=pb;cb();}},headLoadCompleted:function(pb){wa=pb.newCursor;cb();var qb=pb.stories;if(qb&&qb.length>0){for(var rb=qb.length-1;rb>=0;rb--)qb[rb].setAttribute('data-insertion-position',--va);var sb=r.getStoriesSelector();k.dedupe(r.getStreamRoot(),sb);var tb=j.scry(xa,sb);g.inform('Stream/totalHeadLoadedStories',{count:-va,hiddenCount:tb.length,fblogo:pb.fblogo});}},forceNewFetch:function(){ib(true);}};e.exports=ob;},null);
__d("collectSubtreeData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==(void 0)){n[t][q]=true;if(m[t]===(void 0))m[t]={};if(m[t][q]===(void 0))m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;},null);
__d("recordTNTreeData",["collectSubtreeData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k={},l=g(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}e.exports=h;},null);
__d("FlashArbiterEvents",["Arbiter","Run"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._flashID=j;this._subscriptions=[];h.onLeave(this.unsubscribeAll.bind(this));}i.prototype.subscribe=function(j,k){"use strict";var l=this._flashID;this._subscriptions.push(g.subscribe(j,function(m,n){if(l===n.divID)k(n);}));return this;};i.prototype.unsubscribeAll=function(){"use strict";while(this._subscriptions.length)g.unsubscribe(this._subscriptions.pop());};e.exports=i;},null);
__d("compareFlashVersions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return i.replace(/\d+/g,function(j){return '000'.substring(j.length)+j;});}function h(i,j){i=g(i);j=g(j);if(i>j){return 1;}else if(i<j)return -1;return 0;}e.exports=h;},null);
__d("FlashLoadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={READY:'flash/ready',FAILED:'flash/failed',MOUSE_CANCELED:'UploadEvent/SELECT_CANCELED',MOUSE_DOWN:'UploadEvent/SELECT_DOWN',MOUSE_OUT:'UploadEvent/SELECT_OUT',MOUSE_OVER:'UploadEvent/SELECT_OVER',MOUSE_UP:'UploadEvent/SELECT_UP',ERROR_FLASH_LOAD_TIMEOUT:1,ERROR_FLASH_LOAD_FAILURE:2,ERROR_FLASH_UPGRADE_REQUIRED:3};},null);
__d("UploadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={UPLOAD_START:'UploadEvent/UPLOAD_START',UPLOAD_HIRES_RESTART:'UploadEvent/UPLOAD_HIRES_RESTART',START:'UploadEvent/START',DONE:'UploadEvent/DONE',ERROR:'UploadEvent/ERROR',FINISHED_UPLOADING:'UploadEvent/FINISHED_UPLOADING',LOADED:'UploadEvent/LOADED',READY:'UploadEvent/READY',UPLOAD_FAILED:'UploadEvent/UPLOAD_FAILED',UPLOAD_PROGRESS:'UploadEvent/UPLOAD_PROGRESS',COMPRESS_PROGRESS:'UploadEvent/COMPRESS_PROGRESS',HI_RES_ATTACH_START:'UploadEvent/HI_RES_ATTACH_START',IMAGE_COMPRESS_ERROR:'UploadEvent/IMAGE_COMPRESS_ERROR',IMAGE_COMPRESS_BEGIN:'UploadEvent/IMAGE_COMPRESS_BEGIN',IMAGE_COMPRESSED:'UploadEvent/IMAGE_COMPRESSED',IMAGE_UPLOAD_ERROR:'UploadEvent/IMAGE_UPLOAD_ERROR',IMAGE_UPLOADED:'UploadEvent/IMAGE_UPLOADED',SELECT_START:'UploadEvent/SELECT_START',SELECT_CANCELED:'UploadEvent/SELECT_CANCELED',IMAGES_SELECTED:'UploadEvent/IMAGES_SELECTED',HEARTBEAT:'UploadEvent/HEARTBEAT',CANCELED_PROCESSING_PHOTO:'UploadEvent/CANCELED_PROCESSING_PHOTO',CANCELED_PHOTO_UPLOADED_ANYWAY:'UploadEvent/CANCELED_PHOTO_UPLOADED_ANYWAY'};e.exports=g;},null);
__d("FlashFilePicker",["Arbiter","ArbiterMixin","AsyncUploadBase","compareFlashVersions","ImageResizer","CSS","FilePickerEvent","Flash","FlashArbiterEvents","FlashLoadEvent","FlashUploaderConfig","HTML","Parent","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","PhotosUploadWaterfallXMixin","PUWApplications","UploadEvent","URI","PUWSteps","copyProperties","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();function da(ha){for(var ia=0;ia<ha.length;++ia)if(n.checkMinVersion(ha[ia].toString()))return true;return false;}function ea(ha){var ia=s.byClass(ha,'addPhotosDisabled');if(ia){l.removeClass(ia,'addPhotosDisabled');l.addClass(ia,'addPhotosEnabled');}}function fa(ha,ia){ia.style.width=ha.offsetWidth+'px';ia.style.height=ha.offsetHeight+'px';}function ga(ha,ia,ja){this._swfID=ha;this._button=ia;this._waterfallID=ja.qn;this._ref=ja.ref;this._beginInformed=false;this._isReady=false;this._fallbackHref=ja.fallbackHref;if(!da(q.flashVersionInfo.minimumVersion)){this.logWaterfallStep(t.UPGRADE_REQUIRED);this._flashError(u.FLASH_UPGRADE_REQUIRED||25);return;}if(ja.flashObjectsPerVersion)this._constructAndAppendFlashObject(ja.flashObjectsPerVersion);this._flashEvents=new o(this._swfID).subscribe(p.READY,this._handleReady.bind(this)).subscribe(p.FAILED,this._handleFailed.bind(this)).subscribe(p.MOUSE_OVER,this._handleMouseIn.bind(this)).subscribe(p.MOUSE_OUT,this._handleMouseOut.bind(this)).subscribe(y.SELECT_START||'UploadEvent/SELECT_START',this._handleSelectStart.bind(this)).subscribe(y.IMAGES_SELECTED,this._handleSelected.bind(this)).subscribe(y.SELECT_CANCELED,this._handleCancelSelected.bind(this));this._timeout=setTimeout(function(){if(!this._isReady)this._flashError(u.FLASH_LOAD_TIMEOUT||23);}.bind(this),q.flashLoadTimeout);ja.logDetailed&&this.logDetailed();}ba(ga.prototype,h,v,w,{_constructAndAppendFlashObject:function(ha){var ia=ha['default'];delete ha['default'];var ja=Object.keys(ha).sort(function(oa,pa){return j(pa,oa);}),ka=ia;for(var la=0;la<ja.length;la++){var ma=ja[la];if(n.checkMinVersion(ma)){ka=ha[ma];break;}}var na=r.replaceJSONWrapper(ka).getRootNode();this._button.parentNode.appendChild(na);},getUploaderApp:function(){return t.APP_FLASH;},getWaterfallID:function(){return this._waterfallID;},getWaterfallAppName:function(){return x.WEB_FLASH;},getWaterfallSource:function(){return this._ref;},getSwfID:function(){return this._swfID;},logDetailed:function(){this.logWaterfallStep(t.VERSION,{version:n.getVersionString()});if(i.isSupported()){this.logWaterfallStep(t.ASYNC_AVAILABLE);if(k.isSupported()){this.logWaterfallStep(t.RESIZER_AVAILABLE);}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_resizer'});}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_async_upload'});},_handleReady:function(ha){setTimeout(function(){return fa(this._button,ca(this._swfID));}.bind(this));ea(this._button);this._isReady=true;clearTimeout(this._timeout);g.inform(y.READY,{divID:this._swfID},g.BEHAVIOR_PERSISTENT);},_handleFailed:function(ha){this._flashError(u.FLASH_LOAD_FAILURE||24);},_flashError:function(ha){if(this._fallbackHref){var ia=new z(this._fallbackHref).addQueryData({error:ha}).toString();this._button.removeAttribute('rel');this._button.removeAttribute('ajaxify');this._button.setAttribute('href',ia);ea(this._button);}this.logWaterfallStep(t.CLIENT_ERROR,{code:ha,scuba_tags:{fallback_simple:true}});this.logStep(aa.CLIENT_FLOW_FATAL,{error_code:ha,fallback_simple:true});},_handleMouseIn:function(ha){l.addClass(this._button,'selectOver');},_handleMouseOut:function(ha){l.removeClass(this._button,'selectOver');},_handleSelectStart:function(ha){if(!this._beginInformed){this._beginInformed=true;this.inform(m.BEGIN||'FilePickerEvent/BEGIN');}this.inform(m.SELECT_START);},_handleSelected:function(ha){var ia;if(ha.files){ia=ha.files;}else{ia=[{uploadID:ha.divID+'.'}];ia.length=ha.count;}this.inform(m.SELECTED,{sender:this,files:ia},g.BEHAVIOR_PERSISTENT);if(ha.albumLimitExceeded)this.inform(m.ALBUM_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);if(ha.sessionLimitExceeded)this.inform(m.SESSION_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);},_handleCancelSelected:function(ha){this.inform(m.SELECT_CANCELED);}});e.exports=ga;},null);
__d("StoryTopicMap",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h={registerTopics:function(i,j){g[i]=j;},getTopicsForFTID:function(i){return g[i]||[];}};e.exports=h;},null);
__d("XEventRelatedEventsPivotController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null);
__d("XFeedAdsChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null);
__d("XPubcontentFeedChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null);
__d("XPubcontentRelatedShareChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null);
__d("XPubcontentRelatedVideoChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null);
__d("XPubcontentTopicChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null);
__d("XRelatedGamesChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null);
__d("XTopicConversationFeedPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/discussions\/creation_unit\/",{});},null);
__d("PubcontentFeedChainingController",["AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CreateTopicConversationChainingConfig","CSS","cx","DOM","DOMQuery","FeedAdsChainingConfig","PageLikeButton","PubcontentFeedChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","StoryInlinePivotChainingConfig","RelatedEventsPivotChainingConfig","StoryTopicMap","UFIFeedbackTargets","UFIUIEvents","XEventRelatedEventsPivotController","XFeedAdsChainingController","XPubcontentFeedChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XPubcontentInlineStoryPivotChainingController","XRelatedGamesChainingController","XTopicConversationFeedPivotChainingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();var ia='ei',ja='ad_fan_page_action',ka='ad_like_page_post_action',la='ad_share_attachment_click_action',ma='page_story_like_action',na='related_share_article_click',oa='related_share_video_click',pa='page_share_like_action',qa='topic_story_like_action',ra='story_click_for_pivot_action',sa='story_like_pivot_action',ta='event_join',ua='comment_on_topic_conversation_target_action';function va(){"use strict";this.$PubcontentFeedChainingController0=r;this.$PubcontentFeedChainingController1=p;this.$PubcontentFeedChainingController2=s;this.$PubcontentFeedChainingController3=t;this.$PubcontentFeedChainingController4=u;this.$PubcontentFeedChainingController5=v;this.$PubcontentFeedChainingController6=k;this.$PubcontentFeedChainingController7={};h.subscribe(q.LIKED,this.$PubcontentFeedChainingController8.bind(this));h.subscribe(y.UFIActionLinkLike,this.$PubcontentFeedChainingController9.bind(this));h.subscribe(y.UFIActionAddComment,this.$PubcontentFeedChainingControllera.bind(this));h.subscribe(j.ARTICLE_CLICK,this.$PubcontentFeedChainingControllerb.bind(this));h.subscribe(j.VIDEO_CLICK,this.$PubcontentFeedChainingControllerc.bind(this));h.subscribe(j.FBVIDEO_CLICK,this.$PubcontentFeedChainingControllerd.bind(this));h.subscribe(j.GAME_CLICK,this.$PubcontentFeedChainingControllere.bind(this));h.subscribe(j.PHOTO_CLICK,this.$PubcontentFeedChainingControllerf.bind(this));h.subscribe(j.EVENT_JOIN,this.$PubcontentFeedChainingControllerg.bind(this));va.instance=this;}va.getAdClientTokenIndex=function(){"use strict";return ia;};va.prototype.$PubcontentFeedChainingController8=function(wa,xa){"use strict";var ya=this.findAdClientToken(xa.target);if(ya){this.$PubcontentFeedChainingControllerh(xa.target,{origin:ja,actor_id:xa.profile_id,client_token:ya});}else this.$PubcontentFeedChainingControlleri(xa.target,{origin:xa.origin,actor_id:xa.profile_id});};va.prototype.$PubcontentFeedChainingControllera=function(wa,xa){"use strict";if(!xa.feedback)return;var ya=this.$PubcontentFeedChainingControllerj(xa.target,{origin:ua,data:xa});if(!ya)return false;var za=ha.getURIBuilder().getURI();new i(za).setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setMethod('POST').setData({story_id:xa.feedback.entidentifier}).send();return true;};va.prototype.$PubcontentFeedChainingController9=function(wa,xa){"use strict";if(!xa.ft_id)return;if(!this.$PubcontentFeedChainingControllerl(this.findStory(xa.target)))return;x.getFeedbackTarget(xa.ft_id,function(ya,za){var ab=this.findAdClientToken(ya);if(ab&&za.isshare){this.$PubcontentFeedChainingControllerh(ya,{actor_id:za.actorid,origin:ka,ft_id:za.entidentifier,client_token:ab});}else if(za.isownerpage){this.$PubcontentFeedChainingControlleri(ya,{actor_id:za.actorid,content_id:za.entidentifier,origin:ma});}else if(za.isshare){this.$PubcontentFeedChainingControlleri(ya,{actor_id:za.actorid,content_id:za.entidentifier,ft_id:za.entidentifier,origin:pa});}else{var bb=w.getTopicsForFTID(za.entidentifier);if(bb&&bb.length>0){this.$PubcontentFeedChainingControllerm(ya,{ft_id:za.entidentifier,origin:qa,pivotal_topic_ids:bb});}else this.$PubcontentFeedChainingControllern(ya,{origin:sa,ft_id:za.entidentifier});}}.bind(this,xa.target));};va.prototype.$PubcontentFeedChainingControllern=function(wa,xa){"use strict";var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;var za=(fa.getURIBuilder()).setString('origin',xa.origin);if(xa.story_id)za.setString('storyid',String(xa.story_id));if(xa.ft_id)za.setString('ftid',String(xa.ft_id));new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(za.getURI()).setAllowCrossPageTransition(true).send();return true;};va.prototype.$PubcontentFeedChainingControllerf=function(wa,xa){"use strict";var ya=this;ya.$PubcontentFeedChainingControllern(xa.attachment,{origin:ra,story_id:xa.storyid});};va.prototype.$PubcontentFeedChainingControllerb=function(wa,xa){"use strict";if(g.no_chained_related_stories==='true')return;xa.origin=na;var ya=this,za=this.findStory(xa.attachment),ab=o.scry(o.getRootElement(),'#initial_browse_result').length>0;if(ab)return;var bb;if(xa.is_right_click){bb=0;}else bb=j.EVENT_DELAY;setTimeout(function(){if(za){var cb=ya.findAttachment(za);if(cb)xa.attachment=cb;}ya.$PubcontentFeedChainingControllero(xa.attachment,xa);},bb);};va.prototype.$PubcontentFeedChainingControllerc=function(wa,xa){"use strict";xa.origin=oa;var ya=this,za=this.findStory(xa.attachment);setTimeout(function(){if(za){var ab=ya.findAttachment(za);if(ab)xa.attachment=ab;}ya.$PubcontentFeedChainingControllero(xa.attachment,xa);},j.EVENT_DELAY);};va.prototype.$PubcontentFeedChainingControllerd=function(wa,xa){"use strict";xa.origin=oa;var ya=this,za=this.findStory(xa.attachment);setTimeout(function(){if(za){var ab=ya.findAttachment(za);if(ab)xa.attachment=ab;}ya.$PubcontentFeedChainingControllero(xa.attachment,xa);},j.EVENT_DELAY);};va.prototype.$PubcontentFeedChainingControllere=function(wa,xa){"use strict";var ya=this,za=this.findStory(xa.attachment);setTimeout(function(){if(za)var ab=ya.findContainer(za);ya.$PubcontentFeedChainingControllerp(za,xa.global_share_id,n.getID(ab));},j.EVENT_DELAY);};va.prototype.$PubcontentFeedChainingControllerg=function(wa,xa){"use strict";var ya=this.findStory(xa.attachment);if(ya){var za=this.findAttachment(ya);if(za)xa.attachment=za;}this.$PubcontentFeedChainingControllerq(xa.attachment,{origin:ta,event_id:xa.event_id});};va.prototype.$PubcontentFeedChainingControllerr=function(wa){"use strict";return !!(wa&&wa.id&&!l.hasClass(wa,"_sf6")&&!(wa.id in this.$PubcontentFeedChainingController7));};va.prototype.$PubcontentFeedChainingControllers=function(wa){"use strict";if(!wa)return false;if(wa.origin in this.$PubcontentFeedChainingController0||wa.origin in this.$PubcontentFeedChainingController2||wa.origin in this.$PubcontentFeedChainingController1||wa.origin in this.$PubcontentFeedChainingController4||wa.origin in this.$PubcontentFeedChainingController5||wa.origin in this.$PubcontentFeedChainingController6){return true;}else{var xa=this.$PubcontentFeedChainingController3[wa.origin];if(!xa||!xa.rate)return false;var ya=Math.random();if(ya>xa.rate)return false;return true;}};va.prototype.$PubcontentFeedChainingControllert=function(wa){"use strict";this.$PubcontentFeedChainingController7[wa]=true;};va.prototype.$PubcontentFeedChainingControllerk=function(wa){"use strict";delete this.$PubcontentFeedChainingController7[wa];};va.prototype.$PubcontentFeedChainingControllerl=function(wa){"use strict";if(!wa)return false;var xa="_3lkn",ya=wa.nextSibling,za=true;if(ya&&ya.firstChild){var ab=ya.firstChild;za=!(ab.hasChildNodes()&&l.hasClass(ab,xa));}if(!za)return false;var bb=wa.children[0],cb=wa.children[1],db="_4_ck";if((bb&&l.hasClass(bb,db))||(cb&&l.hasClass(cb,db)))return false;return true;};va.prototype.$PubcontentFeedChainingControllerj=function(wa,xa){"use strict";var ya=this.findStory(wa);if(!this.$PubcontentFeedChainingControllerr(ya))return null;if(!this.$PubcontentFeedChainingControllers(xa))return null;this.$PubcontentFeedChainingControllert(ya.id);if(this.isSponsoredStory(ya))return null;var za;if(!xa.continued_chaining){za=this.findContainer(ya);if(!za)return null;var ab=n.create('div'),bb=n.appendContent(za,ab);if(bb.length!==1)return null;}else{za=ya;ab=n.create('div');bb=n.insertAfter(za,ab);n.remove(za);if(bb.length!==1)return null;}if(xa.is_auto_expand){return {chainingWrapper:bb[0],story:ya,is_auto_expand:xa.is_auto_expand};}else return {chainingWrapper:bb[0],story:ya};};va.prototype.$PubcontentFeedChainingControllerh=function(wa,xa){"use strict";var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;var za=this.findStreamRoot(ya.story);if(!za)return false;var ab=za.getAttribute('id'),bb=(aa.getURIBuilder()).setString('actor_id',xa.actor_id).setString('origin',xa.origin).setString('ei',xa.client_token).setString('data_ownerid',ab);if(xa.ft_id)bb.setString('ft_id',xa.ft_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(bb.getURI()).send();return true;};va.prototype.$PubcontentFeedChainingControllero=function(wa,xa){"use strict";if(!this.$PubcontentFeedChainingControllerl(this.findStory(wa)))return false;var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;l.addClass(ya.chainingWrapper,"_3lkn");var za=null;if(xa.fbvideo_id){za=da.getURIBuilder();za.setInt('fbvideo_id',xa.fbvideo_id);}else{za=ca.getURIBuilder();za.setInt('global_share_id',xa.global_share_id);}za.setString('attachment_div_id',n.getID(xa.attachment));if(xa.link_url)za.setString('link_url',xa.link_url);if(xa.video_div_id)za.setString('video_div_id',xa.video_div_id);if(xa.share_id)za.setString('share_id',xa.share_id);var ab=JSON.parse(ya.story.getAttribute('data-ft'))||{};if('qid' in ab&&'mf_story_key' in ab){za.setString('qid',ab.qid);za.setString('mf_story_key',ab.mf_story_key);}if(xa.is_auto_expand){this.$PubcontentFeedChainingControllerk(ya.story.id);za.setBool('is_auto_expand',xa.is_auto_expand);}var bb=new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(za.getURI());ab&&bb.setData(ab);bb.send();return true;};va.prototype.$PubcontentFeedChainingControllerp=function(wa,xa,ya){"use strict";if(!this.$PubcontentFeedChainingControllerr(wa))return;this.$PubcontentFeedChainingControllert(wa.id);var za=(ga.getURIBuilder()).setInt('app_id',xa).setString('attachment_div_id',ya);new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,wa.id)).setURI(za.getURI()).send();return true;};va.prototype.$PubcontentFeedChainingControlleri=function(wa,xa){"use strict";var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;var za=(ba.getURIBuilder()).setString('actor_id',xa.actor_id).setString('origin',xa.origin);if(xa.ft_id)za.setString('ft_id',xa.ft_id);if(xa.content_id)za.setString('content_id',xa.content_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(za.getURI()).send();return true;};va.prototype.$PubcontentFeedChainingControllerm=function(wa,xa){"use strict";var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;var za=(ea.getURIBuilder()).setIntVector('pivotal_topic_ids',xa.pivotal_topic_ids).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(za).send();return true;};va.prototype.$PubcontentFeedChainingControllerq=function(wa,xa){"use strict";var ya=this.$PubcontentFeedChainingControllerj(wa,xa);if(!ya)return false;var za=(z.getURIBuilder()).setInt('event_id',xa.event_id).setString('attachment_id',n.getID(wa)).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerk.bind(this,ya.story.id)).setRelativeTo(ya.chainingWrapper).setURI(za).send();return true;};e.exports=va;},null);
__d("PubcontentLitestandClassicChainingController",["ContextualThing","DOM","PubcontentFeedChainingController","csx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){"use strict";if(i!==null)i.apply(this,arguments);}m.prototype.findStory=function(n){"use strict";var o="^div._4-u2",p=h.scry(n,o);return p.length===1?p[0]:null;};m.prototype.isSponsoredStory=function(n){"use strict";var o="._5paw";return h.scry(n,o).length>0;};m.prototype.findAttachment=function(n){"use strict";var o="div._6m2",p="div.iframeEmbed",q=h.scry(n,o)[0]||h.scry(n,p)[0];return q;};m.prototype.findContainer=function(n){"use strict";var o=h.create('div'),p=h.insertAfter(n,o);g.register(o,n);return p.length>=1?p[0]:null;};m.prototype.findStreamRoot=function(n){"use strict";var o="^div._4ikz";return h.scry(n,o)[0];};m.prototype.findAdClientToken=function(n){"use strict";var o=this.findStory(n);if(!o)return null;var p=o.getAttribute('data-ft');if(!p)return null;var q=JSON.parse(p);return q[i.getAdClientTokenIndex()];};e.exports=m;new m();},null);
__d("FeedAdsGapRuleViolationDetection",["Banzai","CSS","csx","cx","DOM","ge","isEmpty","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=l(ca.containerID);if(!ea)return;z=n(ca.demoAdChecks,z);var fa=k.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(m(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(h.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=k.scry(ca,"div._hye"),fa=k.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=k.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=(w.length-ca))return -1;for(var ea=ca+1;(ea<w.length)&&(da>0);ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:(oa-ga),qid:w[oa].qid,event_type:'ad_swap'};g.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logGapRuleViolation(na);x[ha.dedupKey]=na;}this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;g.post('feed_ads_gap_rule_violation',da);},_logGapRuleViolation:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};g.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};g.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){h.hide(l(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};g.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=l(ca.nodeid);da&&h.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};g.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=l(ca),fa=l(da);ea&&fa&&k.insertAfter(fa,ea);}};e.exports=ba;},null);
__d("StoryPositionTracking",["DOM","LitestandStream","csx","ge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=0;function l(o,p){var q=JSON.parse(o.getAttribute('data-ft'));if(q){q.insertion_position=p;o.setAttribute('data-ft',JSON.stringify(q));}}function m(o){return g.scry(o,"._5jmm");}var n={registerNewStories:function(o){if(o=='substream_0')k=0;var p=m(j(o)),q=p.length;for(var r=0;r<q;r++)l(p[r],k++);},updateAllStories:function(){var o=m(h.getStreamRoot()),p=o.length;k=0;for(var q=0;q<p;q++)l(o[q],k++);}};e.exports=n;},null);
__d("StreamViewportTracking",["DOM","DOMDimensions","ViewportTracking","ge","recordTNTreeData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=51;for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q){"use strict";if(q)this.$StreamViewportTracking0=q;n.init.call(this,p);this.initSubscriptions();};o.prototype.initSubscriptions=function(){"use strict";};o.prototype.getDataFromConfig=function(p){"use strict";this.isTimetrackingEnabled=1;this.timeout=p.record_delay;};o.prototype.getTimeout=function(){"use strict";return this.timeout;};o.prototype.getStorySelector=function(){"use strict";return '.uiStreamStory';};o.prototype.getAllStories=function(){"use strict";var p=g.scry(this.getStream(),this.getStorySelector());return p.filter(function(q){return q.getAttribute('data-ft');});};o.prototype.getStoryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.mf_story_key;};o.prototype.getQueryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.qid;};o.prototype.getFBFeedLocations=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.fbfeed_location;};o.prototype.getFBFeedInsertionPosition=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.insertion_position;};o.prototype.getDataToLog=function(p){"use strict";var q={},r=this.getStream();q=k(p,r);var s=p.getAttribute('data-insertion-position');if(s!==null)q.inspos=s;q.evt=l;q.vpv_time=Math.round(Date.now()/1000);var t=g.scry(p,".fbStoryAttachmentImage")[0];if(t){var u=h.getElementDimensions(t);q.story_image_height=u.height;q.story_image_width=u.width;}return {ft:q};};o.prototype.getStream=function(){"use strict";if(this.$StreamViewportTracking0)return this.$StreamViewportTracking0;return j('home_stream');};o.prototype.heartBeatIsEnabled=function(){"use strict";return true;};o.init=function(p,q){"use strict";o.instance=new o();o.instance.init(p,q);};o.getInstance=function(){"use strict";return o.instance;};e.exports=o;},null);
__d("FbFeedAttachmentRelatedShare",["Arbiter","AttachmentRelatedShareConstants","DOMQuery","Event","tidyEvent","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={loadRelatedAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.ARTICLE_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedGameAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.GAME_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedAttachmentForStream:function(n){var o=function(event,p){var q=event.getTarget();if(q.getAttribute('target')!=='_blank')return;var r="^div._5pbx",s="^div._5pc9",t=i.scry(q,r)[0]||i.scry(q,s)[0];if(!t)return;g.inform(h.ARTICLE_CLICK,{attachment:t,global_share_id:0,link_url:q.getAttribute('href'),is_right_click:p});};k(j.listen(n,'click',function(event){o(event,false);}));k(j.listen(n,'mousedown',function(event){if(event.which==3||event.button==2)o(event,true);}));}};e.exports=m;},null);
__d("FbFeedViewportTracking",["Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","csx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){"use strict";if(j!==null)j.apply(this,arguments);}n.prototype.initSubscriptions=function(){"use strict";this.subscriptions.addSubscriptions(g.subscribe([h.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),g.subscribe(h.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};n.prototype.getStorySelector=function(){"use strict";return "._5jmm";};n.prototype.getStream=function(){"use strict";return i.getStreamRoot();};n.prototype.getSessionID=function(){"use strict";return i.getFeedStreamID();};n.init=function(o){"use strict";n.instance=new n();n.instance.init(o);};n.getInstance=function(){"use strict";return n.instance;};e.exports=n;},null);