/*!CK:1554858023!*//*1432159716,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["7koYU"]); }

__d("BoostedComponentRef",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CCTA_ADMIN_MENU:"ccta_admin_menu",CONSOLIDATE_ENTRY_POINT:"consolidate_entry_point",PAGES_BUILD_AUDIENCE_DROPDOWN:"pages_build_audience_dropdown",PAGES_MANAGER_EDIT_MENU:"pages_manager_edit_menu",PAGES_MANAGER:"pages_manager_redesign",PAGES_SPRINGBOARD:"pages_springboard",PAGES_TIMELINE_ABOUT_SECTION:"pages_timeline_about_section",PAGES_TIMELINE_LHS:"pages_timelines_lhs"};},null);
__d("PageInsightsPostFields",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CAPTION:"caption",CREATION_TIME:"created_time",DESCRIPTION:"description",ID:"id",IDENTIFIER:"identifier",IS_HOT:"is_hot",LINK:"link",MESSAGE:"message",NAME:"name",PICTURE:"picture",PRIVACY:"privacy",PRIVACY_COUNTRIES:"privacy_countries",PRIVACY_DESCRIPTION:"privacy_description",PRIVACY_LOCALES:"privacy_locales",PRIVACY_POST_TARGETING:"privacy_post_targeting",PROPERTY:"properties",STATUS_TYPE:"status_type",STYLE:"style",TYPE:"type"};},null);
__d("SanityCheckNames",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PI_API_RESPONSE:"page_insights.api_responded_with_data",PI_REACH_GT_ENGMT:"page_insights.reach_greater_than_engagement",AI_REACH_IMPRESSIONS:"ads_insights.reach_impressions",AI_CLICKS:"ads_insights.clicks",AI_SPEND:"ads_insights.spend",AI_VIDEO_VIEWS:"ads_insights.video_views"};},null);
__d("SanityCheckStatuses",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={VALID:1,INVALID_CONFIG:2,CHECKTIME_FAILURE:3};},null);
__d("BoostedComponentTooltip",["BoostedComponentAppID","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={getByAppID:function(j){switch(j){case g.BOOSTED_CCTA:return (h._("Get people you care about to visit your call to action"));case g.BOOSTED_LOCAL_AWARENESS:return (h._("Connect with more people in your local area"));case g.BOOSTED_PAGELIKE:return (h._("Promote your Page to get more Likes"));case g.BOOSTED_WEBSITE:return (h._("Get people you care about to visit your website"));default:return null;}}};e.exports=i;},null);
__d("BoostedComponentStore",["BoostedComponentConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={};h.stores={};h.getConfig=function(i){var j=new g(i),k=j.getContextStore(),l=k.getAppID();if(!this.stores[l])this.stores[l]={};var m=k.getPageID();if(!this.stores[l][m])this.stores[l][m]=j;return this.stores[l][m];};e.exports=h;},null);
__d("BoostedComponentDialogWidget.react",["BoostedComponentAppID","BoostedComponentDialogMixin","BoostedComponentRef","BoostedComponentStore","BoostedComponentTooltip","React","SubscriptionsHandler","Tooltip","XUIButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"BoostedComponentDialogWidget",mixins:[h],statics:{_upsells:{},init:function(t,u){var v=t.appID,w=t.placement;if(!s._upsells[v])s._upsells[v]={};if(s._upsells[v][w])l.unmountComponentAtNode(s._upsells[v][w]);s._upsells[v][w]=u;l.render(l.createElement(s,{configData:t.configData,placement:t.placement,buttonLabel:t.buttonLabel,eligible:t.eligible,ineligibleTooltip:t.ineligibleTooltip}),u);}},propTypes:{configData:r.object.isRequired,placement:r.string.isRequired,buttonLabel:r.string.isRequired,ineligibleTooltip:r.object},componentWillMount:function(){this._config=j.getConfig(this.props.configData);this._subscriptions=new m();this._subscriptions.addSubscriptions(this._config.getAdStatusStore().subscribe('change',function(){return this.forceUpdate();}.bind(this)),this._config.getDialogUIStore().subscribe('change',function(){if(this._config.getContextStore().getPlacement()===this.props.placement)this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();this._subscriptions=null;},componentDidMount:function(){var t=k.getByAppID(this._config.getContextStore().getAppID());if(this.props.ineligibleTooltip)t=this.props.ineligibleTooltip;if(t)n.set(l.findDOMNode(this.refs[this._getWidgetRef()]),t,'above','center');if(this._config.getDialogUIStore().getAutoOpenDialog())this.onTriggerAutoOpen();},componentDidUpdate:function(){this.renderDialog();},render:function(){return (l.createElement(o,{className:this._getButtonClass(),label:this.props.buttonLabel,onClick:this.onUpsellButtonClick,onMouseEnter:this.onMouseEnter,disabled:!!this.props.ineligibleTooltip,ref:this._getWidgetRef(),use:"confirm",size:"large"}));},_getButtonClass:function(){if(this._config.getContextStore().getAppID()===g.BOOSTED_LOCAL_AWARENESS)return null;switch(this.props.placement){case i.PAGES_MANAGER:return "_598l";case i.PAGES_TIMELINE_LHS:case i.PAGES_SPRINGBOARD:return "_598m";}return null;},_getWidgetRef:function(){return 'button';}});e.exports=s;},null);
__d("validateDeepLink",["AdsCreationConfig","URIRFC3986","arrayContains","trim"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.deepLinkBlacklist.map(function(m){return new RegExp(j(m,'/'));});function l(m){m=m.toLowerCase();var n=m.indexOf('://');if(n===-1)return false;var o=m.slice(0,n);if(o&&o.contains('.')){if(!/^[a-z0-9][a-z0-9+-.]*$/.test(o))return false;}else{var p=h.parse(m);if(!p.scheme||!/^([a-z][a-z0-9+-.]*):/i.test(m))return false;}if(i(['http','https'],o))return true;var q=k.some(function(r){return r.test(m);});return !q;}e.exports=l;},null);
__d("InsightsInfoTip.react",["Image.react","React","Tooltip","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"InsightsInfoTip",propTypes:{alignH:n.oneOf(['center','left','right']),position:n.oneOf(['above','below','left','right'])},getDefaultProps:function(){return {alignH:'right',position:'above'};},_setTooltip:function(){i.set(h.findDOMNode(this.refs.root),h.findDOMNode(this.refs.tooltip).cloneNode(true),this.props.position,this.props.alignH);},componentDidMount:function(){this._setTooltip();},componentDidUpdate:function(p){this._setTooltip();},componentWillUnmount:function(){if(this.refs.icon)i.remove(h.findDOMNode(this.refs.icon));},render:function(){var p=k('/images/hubble/info/info-flat_s.png'),q=null;if(!this.props.noImage)q=(h.createElement(g,{className:"_5j1g",src:p,ref:"icon"}));var r=l("_5j1f",this.props.className);return (h.createElement("span",{className:r,ref:"root"},this.props.children,q,h.createElement("div",{className:"_5j1h"},h.createElement("div",{className:"_5j1i",ref:"tooltip"},this.props.tip))));}});e.exports=o;},null);
__d("InsightsLegend.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"InsightsLegend",render:function(){var k=this.props.layout||j.layout.FLOATED,l=i((("_5g0o")+(k==j.layout.FLOATED?' '+"_5g05":'')),this.props.className);return (g.createElement("div",{className:l},this.props.children));}});j.layout={FLOATED:'floated',STACKED:'stacked'};e.exports=j;},null);
__d("InsightsLegendKey.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"InsightsLegendKey",render:function(){if(this.props.children.length!==2)return;var k=i("_5g06",this.props.className);return (g.createElement("div",{className:k},this.props.children[0],g.createElement("span",{className:"_11l3"},this.props.children[1])));}});e.exports=j;},null);
__d("art/core/class",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=function(g){var h={};for(var i=0,j=arguments.length;i<j;i++){var k=arguments[i];if(typeof k=='function')k=k.prototype;for(var l in k)h[l]=k[l];}if(!h.initialize)h.initialize=function(){};h.constructor=function(m,n,o,p,q,r,s,t){return new h.initialize(m,n,o,p,q,r,s,t);};h.constructor.prototype=h.initialize.prototype=h;return h.constructor;};},null);
__d("d3/core/bisect",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(j){return {left:function(k,l,m,n){if(arguments.length<3)m=0;if(arguments.length<4)n=k.length;while(m<n){var o=m+n>>>1;if(j.call(k,k[o],o)<l){m=o+1;}else n=o;}return m;},right:function(k,l,m,n){if(arguments.length<3)m=0;if(arguments.length<4)n=k.length;while(m<n){var o=m+n>>>1;if(l<j.call(k,k[o],o)){n=o;}else m=o+1;}return m;}};},h=g(function(j){return j;}),i=h.right;i.left=h.left;i.right=i;i.or=g;e.exports=i;},null);
__d("d3/core/class",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){try{for(var k in i)Object.defineProperty(h.prototype,k,{value:i[k],enumerable:false});}catch(j){h.prototype=i;}}f._class=g;},null);
__d("d3/core/color",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){}g.prototype.toString=function(){return this.rgb()+"";};f._Color=g;},null);
__d("d3/core/core",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=Math.PI,h=1e-06,i={version:"3.0.6"},j=g/180,k=180/g,l=typeof document==='undefined'?null:document,m=typeof window==='undefined'?null:window;function n(p){return p.target;}function o(p){return p.source;}i._u03c0=g;i._u03b5=h;i._radians=j;i._degrees=k;i._document=l;i._window=m;i._target=n;i._source=o;e.exports=i;},null);
__d("d3/core/format-en_US",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=".",h=",",i=[3,3];f._decimalPoint=g;f._thousandsSeparator=h;f._grouping=i;},null);
__d("d3/core/identity",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return h;}f._identity=g;},null);
__d("d3/core/map",["d3/core/class"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/class")._class,h=function(l){var m=new i();for(var n in l)m.set(n,l[n]);return m;};function i(){}g(i,{has:function(l){return j+l in this;},get:function(l){return this[j+l];},set:function(l,m){return this[j+l]=m;},remove:function(l){l=j+l;return l in this&&delete this[l];},keys:function(){var l=[];this.forEach(function(m){l.push(m);});return l;},values:function(){var l=[];this.forEach(function(m,n){l.push(n);});return l;},entries:function(){var l=[];this.forEach(function(m,n){l.push({key:m,value:n});});return l;},forEach:function(l){for(var m in this)if(m.charCodeAt(0)===k)l.call(this,m.substring(1),this[m]);}});var j="\0",k=j.charCodeAt(0);h._Map=i;e.exports=h;},null);
__d("d3/core/round",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(h,i){return i?Math.round(h*(i=Math.pow(10,i)))/i:Math.round(h);};e.exports=g;},null);
__d("d3/core/formatPrefix",["d3/core/round","d3/core/format"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=["y","z","a","f","p","n","\u00b5","m","","k","M","G","T","P","E","Z","Y"].map(j),i=function(k,l){var m=0;if(k){if(k<0)k*=-1;if(l)k=g(k,b("d3\/core\/format")._precision(k,l));m=1+Math.floor(1e-12+Math.log(k)/Math.LN10);m=Math.max(-24,Math.min(24,Math.floor((m<=0?m+1:m-1)/3)*3));}return h[8+m/3];};function j(k,l){var m=Math.pow(10,Math.abs(8-l)*3);return {scale:l>8?function(n){return n/m;}:function(n){return n*m;},symbol:k};}e.exports=i;},null);
__d("d3/core/format",["d3/core/format-en_US","d3/core/identity","d3/core/map","d3/core/round","d3/core/formatPrefix"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/format-en_US"),h=g._decimalPoint,i=b("d3\/core\/identity")._identity,j=g._grouping,k=g._thousandsSeparator,l=b("d3\/core\/map"),m=b("d3\/core\/round"),n=function(u){var v=o.exec(u),w=v[1]||" ",x=v[2]||">",y=v[3]||"",z=v[4]||"",aa=v[5],ba=+v[6],ca=v[7],da=v[8],ea=v[9],fa=1,ga="",ha=false;if(da)da=+da.substring(1);if(aa||w==="0"&&x==="="){aa=w="0";x="=";if(ca)ba-=Math.floor((ba-1)/4);}switch(ea){case "n":ca=true;ea="g";break;case "%":fa=100;ga="%";ea="f";break;case "p":fa=100;ga="%";ea="r";break;case "b":case "o":case "x":case "X":if(z)z="0"+ea.toLowerCase();case "c":case "d":ha=true;da=0;break;case "s":fa=-1;ea="r";break;}if(z==="#")z="";if(ea=="r"&&!da)ea="g";ea=p.get(ea)||r;var ia=aa&&ca;return function(ja){if(ha&&(ja%1))return "";var ka=ja<0||ja===0&&1/ja<0?(ja=-ja,"-"):y;if(fa<0){var la=b("d3\/core\/formatPrefix")(ja,da);ja=la.scale(ja);ga=la.symbol;}else ja*=fa;ja=ea(ja,da);if(!aa&&ca)ja=s(ja);var ma=z.length+ja.length+(ia?0:ka.length),na=ma<ba?new Array(ma=ba-ma+1).join(w):"";if(ia)ja=s(na+ja);if(h)ja.replace(".",h);ka+=z;return (x==="<"?ka+ja+na:x===">"?na+ka+ja:x==="^"?na.substring(0,ma>>=1)+ka+ja+na.substring(ma):ka+(ia?ja:na+ja))+ga;};},o=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,p=l({b:function(u){return u.toString(2);},c:function(u){return String.fromCharCode(u);},o:function(u){return u.toString(8);},x:function(u){return u.toString(16);},X:function(u){return u.toString(16).toUpperCase();},g:function(u,v){return u.toPrecision(v);},e:function(u,v){return u.toExponential(v);},f:function(u,v){return u.toFixed(v);},r:function(u,v){return (u=m(u,q(u,v))).toFixed(Math.max(0,Math.min(20,q(u*(1+1e-15),v))));}});function q(u,v){return v-(u?Math.ceil(Math.log(u)/Math.LN10):1);}function r(u){return u+"";}var s=i;if(j){var t=j.length;s=function(u){var v=u.lastIndexOf("."),w=v>=0?"."+u.substring(v+1):(v=u.length,""),x=[],y=0,z=j[0];while(v>0&&z>0){x.push(u.substring(v-=z,v+z));z=j[y=(y+1)%t];}return x.reverse().join(k||"")+w;};}n._precision=q;e.exports=n;},null);
__d("d3/core/xyz",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return i>.008856?Math.pow(i,1/3):7.787037*i+4/29;}function h(i){return Math.round(255*(i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055));}f._lab=g;f._rgb=h;},null);
__d("d3/core/hsl",["d3/core/color","d3/core/rgb"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/color")._Color,h=function(m,n,o){return arguments.length===1?(m instanceof j?i(m.h,m.s,m.l):b("d3\/core\/rgb")._parse(""+m,b("d3\/core\/rgb")._hsl,i)):i(+m,+n,+o);};function i(m,n,o){return new j(m,n,o);}function j(m,n,o){this.h=m;this.s=n;this.l=o;}var k=j.prototype=new g();k.brighter=function(m){m=Math.pow(.7,arguments.length?m:1);return i(this.h,this.s,this.l/m);};k.darker=function(m){m=Math.pow(.7,arguments.length?m:1);return i(this.h,this.s,m*this.l);};k.rgb=function(){return l(this.h,this.s,this.l);};function l(m,n,o){var p,q;m=m%360;if(m<0)m+=360;n=n<0?0:n>1?1:n;o=o<0?0:o>1?1:o;q=o<=.5?o*(1+n):o+n-o*n;p=2*o-q;function r(t){if(t>360){t-=360;}else if(t<0)t+=360;if(t<60)return p+(q-p)*t/60;if(t<180)return q;if(t<240)return p+(q-p)*(240-t)/60;return p;}function s(t){return Math.round(r(t)*255);}return b("d3\/core\/rgb")._rgb(s(m+120),s(m),s(m-120));}h._hsl=i;h._rgb=l;e.exports=h;},null);
__d("d3/core/rgb",["d3/core/color","d3/core/xyz","d3/core/map","d3/core/hsl","d3/core/lab"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/color")._Color,h=b("d3\/core\/xyz")._lab,i=b("d3\/core\/map"),j=function(u,v,w){return arguments.length===1?(u instanceof l?k(u.r,u.g,u.b):o(""+u,k,b("d3\/core\/hsl")._rgb)):k(~~u,~~v,~~w);};function k(u,v,w){return new l(u,v,w);}function l(u,v,w){this.r=u;this.g=v;this.b=w;}var m=l.prototype=new g();m.brighter=function(u){u=Math.pow(.7,arguments.length?u:1);var v=this.r,w=this.g,x=this.b,y=30;if(!v&&!w&&!x)return k(y,y,y);if(v&&v<y)v=y;if(w&&w<y)w=y;if(x&&x<y)x=y;return k(Math.min(255,Math.floor(v/u)),Math.min(255,Math.floor(w/u)),Math.min(255,Math.floor(x/u)));};m.darker=function(u){u=Math.pow(.7,arguments.length?u:1);return k(Math.floor(u*this.r),Math.floor(u*this.g),Math.floor(u*this.b));};m.hsl=function(){return p(this.r,this.g,this.b);};m.toString=function(){return "#"+n(this.r)+n(this.g)+n(this.b);};function n(u){return u<16?"0"+Math.max(0,u).toString(16):Math.min(255,u).toString(16);}function o(u,v,w){var x=0,y=0,z=0,aa,ba,ca;aa=/([a-z]+)\((.*)\)/i.exec(u);if(aa){ba=aa[2].split(",");switch(aa[1]){case "hsl":return w(parseFloat(ba[0]),parseFloat(ba[1])/100,parseFloat(ba[2])/100);case "rgb":return v(s(ba[0]),s(ba[1]),s(ba[2]));}}if(ca=t.get(u))return v(ca.r,ca.g,ca.b);if(u!=null&&u.charAt(0)==="#"){if(u.length===4){x=u.charAt(1);x+=x;y=u.charAt(2);y+=y;z=u.charAt(3);z+=z;}else if(u.length===7){x=u.substring(1,3);y=u.substring(3,5);z=u.substring(5,7);}x=parseInt(x,16);y=parseInt(y,16);z=parseInt(z,16);}return v(x,y,z);}function p(u,v,w){var x=Math.min(u/=255,v/=255,w/=255),y=Math.max(u,v,w),z=y-x,aa,ba,ca=(y+x)/2;if(z){ba=ca<.5?z/(y+x):z/(2-y-x);if(u==y){aa=(v-w)/z+(v<w?6:0);}else if(v==y){aa=(w-u)/z+2;}else aa=(u-v)/z+4;aa*=60;}else ba=aa=0;return b("d3\/core\/hsl")._hsl(aa,ba,ca);}function q(u,v,w){u=r(u);v=r(v);w=r(w);var x=h((.4124564*u+.3575761*v+.1804375*w)/b("d3\/core\/lab")._X),y=h((.2126729*u+.7151522*v+.072175*w)/b("d3\/core\/lab")._Y),z=h((.0193339*u+.119192*v+.9503041*w)/b("d3\/core\/lab")._Z);return b("d3\/core\/lab")._lab(116*y-16,500*(x-y),200*(y-z));}function r(u){return (u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4);}function s(u){var v=parseFloat(u);return u.charAt(u.length-1)==="%"?Math.round(v*2.55):v;}var t=i({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});t.forEach(function(u,v){t.set(u,o(v,k,b("d3\/core\/hsl")._rgb));});j._names=t;j._rgb=k;j._parse=o;j._hsl=p;j._hex=n;j._lab=q;e.exports=j;},null);
__d("d3/core/lab",["d3/core/color","d3/core/xyz","d3/core/core","d3/core/hcl","d3/core/rgb"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/color")._Color,h=b("d3\/core\/xyz")._rgb,i=b("d3\/core\/core")._u03c0,j=function(u,v,w){return arguments.length===1?(u instanceof l?k(u.l,u.a,u.b):(u instanceof b("d3\/core\/hcl")._Hcl?b("d3\/core\/hcl")._lab(u.l,u.c,u.h):b("d3\/core\/rgb")._lab((u=b("d3\/core\/rgb")(u)).r,u.g,u.b))):k(+u,+v,+w);};function k(u,v,w){return new l(u,v,w);}function l(u,v,w){this.l=u;this.a=v;this.b=w;}var m=18,n=.95047,o=1,p=1.08883,q=l.prototype=new g();q.brighter=function(u){return k(Math.min(100,this.l+m*(arguments.length?u:1)),this.a,this.b);};q.darker=function(u){return k(Math.max(0,this.l-m*(arguments.length?u:1)),this.a,this.b);};q.rgb=function(){return r(this.l,this.a,this.b);};function r(u,v,w){var x=(u+16)/116,y=x+v/500,z=x-w/200;y=t(y)*n;x=t(x)*o;z=t(z)*p;return b("d3\/core\/rgb")._rgb(h(3.2404542*y-1.5371385*x-.4985314*z),h(-.969266*y+1.8760108*x+.041556*z),h(.0556434*y-.2040259*x+1.0572252*z));}function s(u,v,w){return b("d3\/core\/hcl")._hcl(Math.atan2(w,v)/i*180,Math.sqrt(v*v+w*w),u);}function t(u){return u>.206893034?u*u*u:(u-4/29)/7.787037;}j._K=m;j._X=n;j._Y=o;j._Z=p;j._Lab=l;j._lab=k;j._rgb=r;j._hcl=s;e.exports=j;},null);
__d("d3/core/hcl",["d3/core/color","d3/core/core","d3/core/lab","d3/core/rgb"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/color")._Color,h=b("d3\/core\/core")._radians,i=function(n,o,p){return arguments.length===1?(n instanceof k?j(n.h,n.c,n.l):(n instanceof b("d3\/core\/lab")._Lab?b("d3\/core\/lab")._hcl(n.l,n.a,n.b):b("d3\/core\/lab")._hcl((n=b("d3\/core\/rgb")._lab((n=b("d3\/core\/rgb")(n)).r,n.g,n.b)).l,n.a,n.b))):j(+n,+o,+p);};function j(n,o,p){return new k(n,o,p);}function k(n,o,p){this.h=n;this.c=o;this.l=p;}var l=k.prototype=new g();l.brighter=function(n){return j(this.h,this.c,Math.min(100,this.l+b("d3\/core\/lab")._K*(arguments.length?n:1)));};l.darker=function(n){return j(this.h,this.c,Math.max(0,this.l-b("d3\/core\/lab")._K*(arguments.length?n:1)));};l.rgb=function(){return m(this.h,this.c,this.l).rgb();};function m(n,o,p){return b("d3\/core\/lab")._lab(p,Math.cos(n*=h)*o,Math.sin(n)*o);}i._Hcl=k;i._hcl=j;i._lab=m;e.exports=i;},null);
__d("d3/core/ns",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h={prefix:g,qualify:function(i){var j=i.indexOf(":"),k=i;if(j>=0){k=i.substring(0,j);i=i.substring(j+1);}return g.hasOwnProperty(k)?{space:g[k],local:i}:i;}};e.exports=h;},null);
__d("d3/core/transform",["d3/core/core","d3/core/ns"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/core"),h=g._document,i=g._degrees,j=b("d3\/core\/ns"),k=function(q){var r=h.createElementNS(j.prefix.svg,"g");return (k=function(s){r.setAttribute("transform",s);var t=r.transform.baseVal.consolidate();return new l(t?t.matrix:p);})(q);};function l(q){var r=[q.a,q.b],s=[q.c,q.d],t=n(r),u=m(r,s),v=n(o(s,r,-u))||0;if(r[0]*s[1]<s[0]*r[1]){r[0]*=-1;r[1]*=-1;t*=-1;u*=-1;}this.rotate=(t?Math.atan2(r[1],r[0]):Math.atan2(-s[0],s[1]))*i;this.translate=[q.e,q.f];this.scale=[t,v];this.skew=v?Math.atan2(u,v)*i:0;}l.prototype.toString=function(){return "translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")";};function m(q,r){return q[0]*r[0]+q[1]*r[1];}function n(q){var r=Math.sqrt(m(q,q));if(r){q[0]/=r;q[1]/=r;}return r;}function o(q,r,s){q[0]+=s*r[0];q[1]+=s*r[1];return q;}var p={a:1,b:0,c:0,d:1,e:0,f:0};e.exports=k;},null);
__d("d3/core/interpolate",["d3/core/rgb","d3/core/hsl","d3/core/lab","d3/core/hcl","d3/core/color","d3/core/transform"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/rgb"),h=b("d3\/core\/hsl"),i=b("d3\/core\/lab"),j=b("d3\/core\/hcl"),k=g._hex,l=h._rgb,m=i._rgb,n=j._lab,o=g._names,p=b("d3\/core\/color")._Color,q=b("d3\/core\/transform"),r=function(u,v){var w=r.interpolators.length,x;while(--w>=0&&!(x=r.interpolators[w](u,v)));return x;};r.number=function(u,v){v-=u;return function(w){return u+v*w;};};r.round=function(u,v){v-=u;return function(w){return Math.round(u+v*w);};};r.string=function(u,v){var w,x,y,z=0,aa=0,ba=[],ca=[],da,ea;s.lastIndex=0;for(x=0;w=s.exec(v);++x){if(w.index)ba.push(v.substring(z,aa=w.index));ca.push({i:ba.length,x:w[0]});ba.push(null);z=s.lastIndex;}if(z<v.length)ba.push(v.substring(z));for(x=0,da=ca.length;(w=s.exec(u))&&x<da;++x){ea=ca[x];if(ea.x==w[0]){if(ea.i){if(ba[ea.i+1]==null){ba[ea.i-1]+=ea.x;ba.splice(ea.i,1);for(y=x+1;y<da;++y)ca[y].i--;}else{ba[ea.i-1]+=ea.x+ba[ea.i+1];ba.splice(ea.i,2);for(y=x+1;y<da;++y)ca[y].i-=2;}}else if(ba[ea.i+1]==null){ba[ea.i]=ea.x;}else{ba[ea.i]=ea.x+ba[ea.i+1];ba.splice(ea.i+1,1);for(y=x+1;y<da;++y)ca[y].i--;}ca.splice(x,1);da--;x--;}else ea.x=r.number(parseFloat(w[0]),parseFloat(ea.x));}while(x<da){ea=ca.pop();if(ba[ea.i+1]==null){ba[ea.i]=ea.x;}else{ba[ea.i]=ea.x+ba[ea.i+1];ba.splice(ea.i+1,1);}da--;}if(ba.length===1)return ba[0]==null?ca[0].x:function(){return v;};return function(fa){for(x=0;x<da;++x)ba[(ea=ca[x]).i]=ea.x(fa);return ba.join("");};};r.transform=function(u,v){var w=[],x=[],y,z=q(u),aa=q(v),ba=z.translate,ca=aa.translate,da=z.rotate,ea=aa.rotate,fa=z.skew,ga=aa.skew,ha=z.scale,ia=aa.scale;if(ba[0]!=ca[0]||ba[1]!=ca[1]){w.push("translate(",null,",",null,")");x.push({i:1,x:r.number(ba[0],ca[0])},{i:3,x:r.number(ba[1],ca[1])});}else if(ca[0]||ca[1]){w.push("translate("+ca+")");}else w.push("");if(da!=ea){if(da-ea>180){ea+=360;}else if(ea-da>180)da+=360;x.push({i:w.push(w.pop()+"rotate(",null,")")-2,x:r.number(da,ea)});}else if(ea)w.push(w.pop()+"rotate("+ea+")");if(fa!=ga){x.push({i:w.push(w.pop()+"skewX(",null,")")-2,x:r.number(fa,ga)});}else if(ga)w.push(w.pop()+"skewX("+ga+")");if(ha[0]!=ia[0]||ha[1]!=ia[1]){y=w.push(w.pop()+"scale(",null,",",null,")");x.push({i:y-4,x:r.number(ha[0],ia[0])},{i:y-2,x:r.number(ha[1],ia[1])});}else if(ia[0]!=1||ia[1]!=1)w.push(w.pop()+"scale("+ia+")");y=x.length;return function(ja){var ka=-1,la;while(++ka<y)w[(la=x[ka]).i]=la.x(ja);return w.join("");};};r.rgb=function(u,v){u=g(u);v=g(v);var w=u.r,x=u.g,y=u.b,z=v.r-w,aa=v.g-x,ba=v.b-y;return function(ca){return "#"+k(Math.round(w+z*ca))+k(Math.round(x+aa*ca))+k(Math.round(y+ba*ca));};};r.hsl=function(u,v){u=h(u);v=h(v);var w=u.h,x=u.s,y=u.l,z=v.h-w,aa=v.s-x,ba=v.l-y;if(z>180){z-=360;}else if(z<-180)z+=360;return function(ca){return l(w+z*ca,x+aa*ca,y+ba*ca)+"";};};r.lab=function(u,v){u=i(u);v=i(v);var w=u.l,x=u.a,y=u.b,z=v.l-w,aa=v.a-x,ba=v.b-y;return function(ca){return m(w+z*ca,x+aa*ca,y+ba*ca)+"";};};r.hcl=function(u,v){u=j(u);v=j(v);var w=u.h,x=u.c,y=u.l,z=v.h-w,aa=v.c-x,ba=v.l-y;if(z>180){z-=360;}else if(z<-180)z+=360;return function(ca){return n(w+z*ca,x+aa*ca,y+ba*ca)+"";};};r.array=function(u,v){var w=[],x=[],y=u.length,z=v.length,aa=Math.min(u.length,v.length),ba;for(ba=0;ba<aa;++ba)w.push(r(u[ba],v[ba]));for(;ba<y;++ba)x[ba]=u[ba];for(;ba<z;++ba)x[ba]=v[ba];return function(ca){for(ba=0;ba<aa;++ba)x[ba]=w[ba](ca);return x;};};r.object=function(u,v){var w={},x={},y;for(y in u)if(y in v){w[y]=t(y)(u[y],v[y]);}else x[y]=u[y];for(y in v)if(!(y in u))x[y]=v[y];return function(z){for(y in w)x[y]=w[y](z);return x;};};var s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;function t(u){return u=="transform"?r.transform:r;}r.interpolators=[r.object,function(u,v){return v instanceof Array&&r.array(u,v);},function(u,v){return (typeof u==="string"||typeof v==="string")&&r.string(u+"",v+"");},function(u,v){return (typeof v==="string"?o.has(v)||/^(#|rgb\(|hsl\()/.test(v):v instanceof p)&&r.rgb(u,v);},function(u,v){return !isNaN(u=+u)&&!isNaN(v=+v)&&r.number(u,v);}];r._interpolateByName=t;e.exports=r;},null);
__d("d3/core/range",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(i,j,k){if(arguments.length<3){k=1;if(arguments.length<2){j=i;i=0;}}if((j-i)/k===Infinity)throw new Error("infinite range");var l=[],m=h(Math.abs(k)),n=-1,o;i*=m,j*=m,k*=m;if(k<0){while((o=i+k*++n)>j)l.push(o/m);}else while((o=i+k*++n)<j)l.push(o/m);return l;};function h(i){var j=1;while(i*j%1)j*=10;return j;}e.exports=g;},null);
__d("d3/core/rebind",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(i,j){var k=1,l=arguments.length,m;while(++k<l)i[m=arguments[k]]=h(i,j,j[m]);return i;};function h(i,j,k){return function(){var l=k.apply(j,arguments);return arguments.length?i:l;};}e.exports=g;},null);
__d("d3/core/uninterpolate",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j){j=j-(i=+i)?1/(j-i):0;return function(k){return (k-i)*j;};}function h(i,j){j=j-(i=+i)?1/(j-i):0;return function(k){return Math.max(0,Math.min(1,(k-i)*j));};}f._uninterpolateNumber=g;f._uninterpolateClamp=h;},null);
__d("d3/scale/bilinear",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k){var l=j(h[0],h[1]),m=k(i[0],i[1]);return function(n){return m(l(n));};}f._bilinear=g;},null);
__d("d3/scale/polylinear",["d3/core/bisect"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l){var m=[],n=[],o=0,p=Math.min(i.length,j.length)-1;if(i[p]<i[0]){i=i.slice().reverse();j=j.slice().reverse();}while(++o<=p){m.push(k(i[o-1],i[o]));n.push(l(j[o-1],j[o]));}return function(q){var r=g(i,q,1,p)-1;return n[r](m[r](q));};}f._polylinear=h;},null);
__d("d3/scale/nice",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j){var k=0,l=i.length-1,m=i[k],n=i[l],o;if(n<m){o=k,k=l,l=o;o=m,m=n,n=o;}if(j=j(n-m)){i[k]=j.floor(m);i[l]=j.ceil(n);}return i;}function h(){return Math;}f._nice=g;f._niceDefault=h;},null);
__d("d3/scale/scale",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(j){var k=j[0],l=j[j.length-1];return k<l?[k,l]:[l,k];}function i(j){return j.rangeExtent?j.rangeExtent():h(j.range());}g._scaleExtent=h;g._scaleRange=i;e.exports=g;},null);
__d("d3/scale/linear",["d3/core/uninterpolate","d3/scale/polylinear","d3/scale/bilinear","d3/scale/nice","d3/scale/scale","d3/core/interpolate","d3/core/rebind","d3/core/range","d3/core/core","d3/core/format"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/core\/uninterpolate"),h=b("d3\/scale\/polylinear")._polylinear,i=b("d3\/scale\/bilinear")._bilinear,j=g._uninterpolateClamp,k=g._uninterpolateNumber,l=b("d3\/scale\/nice")._nice,m=b("d3\/scale\/scale")._scaleExtent,n=b("d3\/core\/interpolate"),o=b("d3\/core\/rebind"),p=b("d3\/core\/range"),q=b("d3\/core\/core"),r=b("d3\/core\/format"),s=function(){return t([0,1],[0,1],n,false);};function t(z,aa,ba,ca){var da,ea;function fa(){var ha=Math.min(z.length,aa.length)>2?h:i,ia=ca?j:k;da=ha(z,aa,ia,ba);ea=ha(aa,z,ia,n);return ga;}function ga(ha){return da(ha);}ga.invert=function(ha){return ea(ha);};ga.domain=function(ha){if(!arguments.length)return z;z=ha.map(Number);return fa();};ga.range=function(ha){if(!arguments.length)return aa;aa=ha;return fa();};ga.rangeRound=function(ha){return ga.range(ha).interpolate(n.round);};ga.clamp=function(ha){if(!arguments.length)return ca;ca=ha;return fa();};ga.interpolate=function(ha){if(!arguments.length)return ba;ba=ha;return fa();};ga.ticks=function(ha){return x(z,ha);};ga.tickFormat=function(ha){return y(z,ha);};ga.nice=function(){l(z,v);return fa();};ga.copy=function(){return t(z,aa,ba,ca);};return fa();}function u(z,aa){return o(z,aa,"range","rangeRound","interpolate","clamp");}function v(z){z=Math.pow(10,Math.round(Math.log(z)/Math.LN10)-1);return z&&{floor:function(aa){return Math.floor(aa/z)*z;},ceil:function(aa){return Math.ceil(aa/z)*z;}};}function w(z,aa){var ba=m(z),ca=ba[1]-ba[0],da=Math.pow(10,Math.floor(Math.log(ca/aa)/Math.LN10)),ea=aa/ca*da;if(ea<=.15){da*=10;}else if(ea<=.35){da*=5;}else if(ea<=.75)da*=2;ba[0]=Math.ceil(ba[0]/da)*da;ba[1]=Math.floor(ba[1]/da)*da+da*.5;ba[2]=da;return ba;}function x(z,aa){return p.apply(q,w(z,aa));}function y(z,aa){return r(",."+Math.max(0,-Math.floor(Math.log(w(z,aa)[2])/Math.LN10+.01))+"f");}s._linearTicks=x;s._linearTickFormat=y;s._linearNice=v;s._linearRebind=u;e.exports=s;},null);
__d("d3/time/time",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h=Date,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function j(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0]);}j.prototype={getDate:function(){return this._.getUTCDate();},getDay:function(){return this._.getUTCDay();},getFullYear:function(){return this._.getUTCFullYear();},getHours:function(){return this._.getUTCHours();},getMilliseconds:function(){return this._.getUTCMilliseconds();},getMinutes:function(){return this._.getUTCMinutes();},getMonth:function(){return this._.getUTCMonth();},getSeconds:function(){return this._.getUTCSeconds();},getTime:function(){return this._.getTime();},getTimezoneOffset:function(){return 0;},valueOf:function(){return this._.valueOf();},setDate:function(){k.setUTCDate.apply(this._,arguments);},setDay:function(){k.setUTCDay.apply(this._,arguments);},setFullYear:function(){k.setUTCFullYear.apply(this._,arguments);},setHours:function(){k.setUTCHours.apply(this._,arguments);},setMilliseconds:function(){k.setUTCMilliseconds.apply(this._,arguments);},setMinutes:function(){k.setUTCMinutes.apply(this._,arguments);},setMonth:function(){k.setUTCMonth.apply(this._,arguments);},setSeconds:function(){k.setUTCSeconds.apply(this._,arguments);},setTime:function(){k.setTime.apply(this._,arguments);}};var k=Date.prototype;g._time=h;g._daySymbols=i;g._utc=j;e.exports=g;},null);
__d("d3/time/interval",["d3/time/time"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/time"),h=g._utc;function i(k,l,m){function n(t){var u=k(t),v=p(u,1);return t-u<v-t?u:v;}function o(t){l(t=k(new g._time(t-1)),1);return t;}function p(t,u){l(t=new g._time(+t),u);return t;}function q(t,u,v){var w=o(t),x=[];if(v>1){while(w<u){if(!(m(w)%v))x.push(new Date(+w));l(w,1);}}else while(w<u)x.push(new Date(+w)),l(w,1);return x;}function r(t,u,v){try{g._time=h;var w=new h();w._=t;return q(w,u,v);}finally{g._time=Date;}}k.floor=k;k.round=n;k.ceil=o;k.offset=p;k.range=q;var s=k.utc=j(k);s.floor=s;s.round=j(n);s.ceil=j(o);s.offset=j(p);s.range=r;return k;}function j(k){return function(l,m){try{g._time=h;var n=new h();n._=l;return k(n,m)._;}finally{g._time=Date;}};}f._interval=i;},null);
__d("d3/time/year",["d3/time/interval","d3/time/day"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/interval")._interval,h=g(function(i){i=b("d3\/time\/day")(i);i.setMonth(0,1);return i;},function(i,j){i.setFullYear(i.getFullYear()+j);},function(i){return i.getFullYear();});h.s=h.range;h.s.utc=h.utc.range;e.exports=h;},null);
__d("d3/time/day",["d3/time/time","d3/time/interval","d3/time/year"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/time"),h=b("d3\/time\/interval")._interval,i=h(function(j){var k=new g._time(1970,0);k.setFullYear(j.getFullYear(),j.getMonth(),j.getDate());return k;},function(j,k){j.setDate(j.getDate()+k);},function(j){return j.getDate()-1;});i.s=i.range;i.s.utc=i.utc.range;i.ofYear=function(j){var k=b("d3\/time\/year")(j);return Math.floor((j-k-(j.getTimezoneOffset()-k.getTimezoneOffset())*60000)/86400000);};e.exports=i;},null);
__d("d3/time/minute",["d3/time/time","d3/time/interval"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/time"),h=b("d3\/time\/interval")._interval,i=h(function(j){return new g._time(Math.floor(j/60000)*60000);},function(j,k){j.setTime(j.getTime()+Math.floor(k)*60000);},function(j){return j.getMinutes();});i.s=i.range;i.s.utc=i.utc.range;e.exports=i;},null);
__d("d3/time/month",["d3/time/interval","d3/time/day"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/interval")._interval,h=b("d3\/time\/day"),i=g(function(j){j=h(j);j.setDate(1);return j;},function(j,k){j.setMonth(j.getMonth()+k);},function(j){return j.getMonth();});i.s=i.range;i.s.utc=i.utc.range;e.exports=i;},null);
__d("d3/time/second",["d3/time/time","d3/time/interval"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b("d3\/time\/time"),h=b("d3\/time\/interval")._interval,i=h(function(j){return new g._time(Math.floor(j/1000)*1000);},function(j,k){j.setTime(j.getTime()+Math.floor(k)*1000);},function(j){return j.getSeconds();});i.s=i.range;i.s.utc=i.utc.range;e.exports=i;},null);
__d("sumOfArray",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=0,j=h.length;for(var k=0;k<j;++k)i+=h[k];return i;}e.exports=g;},null);
__d("HubblePostUtils",["getOwnObjectValues","mapObject","sumOfArray"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={_metrics:['post_engaged_users','post_consumptions_by_type','post_impressions_unique','post_stories_by_action_type','post_negative_feedback_by_type','post_impressions_paid_unique','post_impressions_fan_unique','post_video_views_organic','post_video_views_paid'],parseInsights:function(k,l){var m=l.post_consumptions_by_type||{},n=l.post_stories_by_action_type||{},o=l.post_negative_feedback_by_type||{},p=l.post_impressions_unique||0,q={like:n.like||0,comment:n.comment||0,share:n.share||0},r=i(g(q)),s={};s.link=m['link clicks']||0;if(k==='video'||k==='premiumVideo'){s.video_play=m['video play']||0;}else s.photo_view=m['photo view']||0;s.other=m['other clicks']||0;if(s.other<0)s.other=0;var t=i(g(s)),u={hide_clicks:o.hide_clicks||0,hide_all_clicks:o.hide_all_clicks||0,report_spam_clicks:o.report_spam_clicks||0,unlike_page_clicks:o.unlike_page_clicks||0},v=i(g(u)),w=l.post_impressions_paid_unique||0,x=l.post_impressions_fan_unique||0,y={paid:w,organic:p-w,fans:x,nonfans:p-x},z=l.post_engaged_users||0,aa=p>0?z/p:0,ba=l.post_video_views_organic+l.post_video_views_paid;return {clicks:t,clicksByType:s,engagedUsers:z,lcs:r,lcsByType:q,negative:v,negativeFeedbackByType:u,reach:p,reachByType:y,engagementRate:aa,videoViews:ba};},_formatPostInsightsResponse:function(k,l){return h(l,function(m){var n={};m.data.forEach(function(o){n[o.name]=o.values[0].value;});k.forEach(function(o){if(!n.hasOwnProperty(o))n[o]=null;});return n;});}};e.exports=j;},null);
__d("SanityCheck",["ErrorUtils","SanityCheckNames","SanityCheckStatuses","ex"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=Object.keys(h).map(function(m){return h[m];});function l(m,n){"use strict";this.$SanityCheck0=i.VALID;this.$SanityCheck1=m;this.$SanityCheck2=n;if(k.indexOf(this.$SanityCheck2)===-1){g.reportError(new Error(j('Invalid SanityCheck name: %s.',this.$SanityCheck2)));this.$SanityCheck0=i.INVALID_CONFIG;}}l.prototype.check=function(m){"use strict";if(this.$SanityCheck0!==i.VALID)return {name:this.$SanityCheck2,status:this.$SanityCheck0};var n;try{n=this.$SanityCheck1.apply(null,m);}catch(o){g.reportError(o);return {args:m,status:i.CHECKTIME_FAILURE};}return {args:m,name:this.getName(),passed:n,status:this.$SanityCheck0};};l.prototype.getName=function(){"use strict";return this.$SanityCheck2;};e.exports=l;},null);
__d("SanityCheckChecker",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={check:function(h,i){return h.check(i);},checkMulti:function(h){return h.map(function(i){return g.check(i.sanityCheck,i.args);});}};e.exports=g;},null);
__d("SanityCheckAdapter",["BanzaiLogger","BanzaiODS","SanityCheckChecker","SanityCheckStatuses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};function l(n,o,p,q){p=p||{};var r=[n.getName(),JSON.stringify(o),JSON.stringify(p)].join(':');if(k.hasOwnProperty(r))return;k[r]=true;if(!q.passed)g.log('SanityCheckLoggerConfig',Object.assign(p,{name:n.getName()}));h.bumpFraction('sanity_check.pass_ratio','sanity_check.'+n.getName(),q.passed?1:0,1);}var m={check:function(n,o,p){var q=i.check(n,o);if(q.status===j.VALID)l(n,o,p,q);return q.passed;}};e.exports=m;},null);
__d("PIAPIResponseSanityCheck",["SanityCheck","SanityCheckNames"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports=new g(function(i,j){return !!i.metric&&j.data.length>0;},h.PI_API_RESPONSE);},null);
__d("SpectrumNumberUtilities",["NumberFormatConfig","fbt","intlNumUtils"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(p){return i.getIntegerString(Math.round(p),g.numberDelimiter);}function k(p){p=Math.round(p*10)/10;return i.getFloatString(p,g.numberDelimiter,g.decimalSeparator);}function l(p){if(Math.abs(p)>=1e+09)return k(p/1e+09)+'b';if(Math.abs(p)>=1e+06)return k(p/1e+06)+'m';if(Math.abs(p)>=1000)return k(p/1000)+'K';return j(p);}var m={GBP:163,EUR:128,JPY:165,USD:36};function n(p,q){var r=m[p];if(r)p=String.fromCharCode(r);var s,t='';if(q==Math.round(q)){s=l(q);}else{var u=q.toFixed(2).split('.'),v=g.decimalSeparator;s=j(parseInt(u[0],10))+v+u[1];if(q<0){s=s.replace(/-/,'');t='-';}}return (h._("{negative sign(-) or blank}{currency symbol}{number}",[h.param("negative sign(-) or blank",t),h.param("currency symbol",p),h.param("number",s)]));}var o={CURRENCY_FORMATS:m,currencyFormatter:n,integerFormatter:j,floatFormatter:k,shortIntegerFormatter:l};e.exports=o;},null);
__d("SpectrumBaseNumberScale",["d3/scale/linear","SpectrumNumberUtilities","d3/core/range"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(n){if(n===0)return 0;return Math.pow(10,Math.round(Math.log(Math.abs(n))/Math.LN10)-1);}function k(n,o){var p=n.domain(),q=p[0],r=p[p.length-1],s=r-q;if(r<q){q=r;r=p[0];}var t=n.ceilToFixed(Math.pow(10,n.floorToFixed(Math.log(s/o)/Math.LN10))),u=(o*t)/s;if(u<=.15){t*=10;}else if(u<=.35){t*=5;}else if(u<=.75)t*=2;return {start:q,stop:r,span:s,step:t};}function l(n,o){n.shift=function(){return Math.pow(10,o);};n.tickFormat=function(){return h.shortIntegerFormatter;};n.tooltipFormat=function(){return h.integerFormatter;};n.nice=function(q){var r=n.domain(),s=r[0],t=r[r.length-1],u=Math.max(j(s),j(t),1/n.shift());if(u===0){s=0;t=1;}else if(s==t){t=Math.ceil(t/u)*u;s=t-u;if(t>=0){s=Math.max(s,0);t=Math.max(t,u);}}else if(s<t){s=Math.floor(s/u)*u;t=Math.ceil(t/u)*u;}else{s=Math.ceil(s/u)*u;t=Math.floor(t/u)*u;}return n.domain([s,t]);};n.ceilToFixed=function(q){return Math.ceil(q*n.shift())/n.shift();};n.floorToFixed=function(q){return Math.floor(q*n.shift())/n.shift();};n.getTickStep=function(q){var r=k(n,q);return r.step;};n.ticks=function(q){var r=k(n,q),s=r.start,t=r.stop,u=r.span,v=r.step,w=s>0?1:-1,x=t>0?1:-1,y=i(w*Math.ceil(Math.abs(s/v))*v,x*Math.floor(Math.abs(t/v))*v+v*.5,v);if(y[0]<s)y.shift();var z=y.map(n.tickFormat()).some(function(aa,ba,ca){return ba>0&&aa==ca[ba-1];});if(z)y=n.ticks(q-1);if(y.length<=2)if(q>2&&t>1){return [s,s+u/2,t];}else return [s,t];return y;};var p=n.copy;n.copy=function(){return l(p(),o);};return n;}var m=function(n){n=n===(void 0)?0:n;return l(g(),n);};e.exports=m;},null);
__d("SpectrumIntegerScale",["SpectrumBaseNumberScale"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(){return g(0);};e.exports=h;},null);
__d("InsightsApiClient",["ApiClient","PHPQuerySerializer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};function j(l,m,n){if(n&&!n.error)i[l]=n;m(n);}var k={getRaw:function(l,m,n,o,p,q){var r=m+h.serialize(n);if(i.hasOwnProperty(r)&&!q){setTimeout(o.bind(null,i[r]),0);}else{if(l.hasOwnProperty('accessToken'))n.access_token=l.accessToken;g.graph(m,n,j.bind(null,r,o),p);}}};e.exports=k;},null);
__d("HubbleApiClient",["AsyncRequest","HubbleContext","InsightsApiClient","PageInsightsApiAccess"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={get:function(l,m,n){if(!h.getPageID())return;l=h.getPageID()+(l||'');this.getRaw(l,m,n);},getPosts:function(l,m){if(!h.getPageID())return;l.page_id=h.getPageID();var n=new g().setData(l).setMethod('GET').setPreBootloadHandler(function(o){m(o.payload);}).setReadOnly(true).setURI('/ajax/pages/insights/post_fields');n.send();},getRaw:function(l,m,n){i.getRaw(j,l,m,n);}};e.exports=k;},null);
__d("HubbleConstants",["PageInsightsPostFields"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={DEFAULT_SECTION:'navOverview',NAV_SECTIONS:{IN_STORE:'navInStore',LIKES:'navLikes',OVERVIEW:'navOverview',PEOPLE:'navPeople',POSTS:'navPosts',REACH:'navReach',VISITS:'navVisits',WIFI:'navWifi',VIDEOS:'navVideos'},SCROLL_TARGETS:{ENGAGEMENT:'engagement'},PIPELINE_DAILY:'pipe_daily',PIPELINE_WEEKLY:'pipe_weekly',PIPELINE_MONTHLY:'pipe_monthly',PIPELINE_LIFETIME:'pipe_lifetime',PIPELINE_DEMO:'pipe_demo',PERIOD_DAY:'day',PERIOD_WEEK:'week',PERIOD_28_DAYS:'days_28',PERIOD_LIFETIME:'lifetime',SERIES_AREA:'area',SERIES_LINE:'line',SEC_IN_MIN:60,DAYS_PER_WEEK:7,SORT_BY_DATE:'date',SORT_BY_REACH:'reach',SORT_BY_CLICKS:'clicks',SORT_BY_LCS:'lcs',REQ_PREMIUM_VIDEO:'premium_video',REQ_PUBLISHED:'published',REQ_SMART_PUBLISHING:'smart_publishing',REQ_UNPUBLISHED:'unpublished',TABLE_PAGE_SIZE:10,FACEBOOK_DEMOGRAPHICS:{F:{ageBuckets:{'13-17':7.2,'18-24':14.4,'25-34':11.8,'35-44':6.2,'45-54':3.6,'55-64':1.9,'65+':1.1},total:46.2},M:{ageBuckets:{'13-17':7.7,'18-24':17.9,'25-34':14.8,'35-44':7,'45-54':3.6,'55-64':1.6,'65+':1.3},total:53.8},total:100},POSTS_TABLE_FIELDS:[g.CAPTION,g.CREATION_TIME,g.DESCRIPTION,g.ID,g.IDENTIFIER,g.MESSAGE,g.NAME,g.PICTURE,g.PRIVACY,g.STATUS_TYPE,g.TYPE]};e.exports=h;},null);
__d("InsightsUtils",["copyProperties","d3/time/day","UTCUtils"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=24*60*60,k=25*60*60,l={dateToSeconds:function(m){if(m instanceof Date)return parseInt(m.getTime()/1000,10);return m;},formatInsightsResponse:function(m){var n=-Infinity,o=null,p=0,q=null,r=false,s=0,t=null,u=0,v=Infinity,w=m.data.length,x=null,y=null,z={};for(var aa=0;aa<w;++aa){q=m.data[aa];r=typeof q.values[0].value==='object';v=Math.min(v,q.values[0].end_time-j);n=Math.max(n,q.values[m.data[aa].values.length-1].end_time);z[q.name]=z[q.name]||{};if(r){z[q.name][q.period]=t={};for(var ba=0;ba<q.values.length;++ba){y=q.values[ba];Object.keys(y.value).forEach(function(ca){if(!t.hasOwnProperty(ca))z[q.name][q.period][ca]=null;});}}else z[q.name][q.period]=null;}u=Math.round((n-v)/j);for(aa=0;aa<w;++aa){p=v;q=m.data[aa];r=typeof q.values[0].value==='object';s=0;x=q.period+'_timestamps';o=l.fillArray(u,null);z[q.name][x]=o;if(!r)z[q.name][q.period]=l.fillArray(u,null);for(ba=0;ba<q.values.length;++ba){y=q.values[ba];if(y.end_time-p>k)s+=Math.round((y.end_time-p)/j)-1;if(r){t=z[q.name][q.period];Object.keys(t).forEach(function(ca){if(t[ca]===null)t[ca]=l.fillArray(u,null);t[ca][ba+s]=y.value[ca]||0;});}else z[q.name][q.period][ba+s]=y.value;z[q.name][x][ba+s]=y.end_time;p=y.end_time;}}return {endTime:l.pacificSecondsToUTCDate(n),seriesLength:u,startTime:l.pacificSecondsToUTCDate(v+j),values:z};},formatParams:function(m){var n=g({},m);n.date_format='U';if(m.since)n.since=this.utcDateToPacificSeconds(m.since);if(m.until)n.until=this.utcDateToPacificSeconds(m.until);return n;},localTimeToPacificDate:function(m){return new Date(m.getTime()+i.offsetFromPacificTime(m));},pacificSecondsToUTCDate:function(m){var n=m*1000;return new Date(n+i.getPacificOffsetAt(n));},utcDateToPacificSeconds:function(m){return this.dateToSeconds(m)-Math.round(i.getPacificOffsetAt(m)/1000);},pacificTimeToUTCDay:function(m){return h.utc.floor(new Date(m.getTime()+i.getPacificOffsetAt(m)));},utcTimeToPacificDay:function(m){return new Date(h.utc.floor(m).getTime()-i.getPacificOffsetAt(m));},getMostRecentPacificDayBegin:function(m){var n=m.getTime(),o=n+i.getPacificOffsetAt(n),p=h.utc.floor(new Date(o)).getTime(),q=new Date(p-i.getPacificOffsetAt(p));return q;},fillArray:function(m,n){var o=new Array(m);for(var p=0;p<m;)o[p++]=n;return o;},getRangeIndices:function(m,n){return [l.millisecondsToDays(n.since-m)+1,l.millisecondsToDays(n.until-m)];},millisecondsToDays:function(m){var n=1000*60*60*24;return Math.round(m/n);},sliceData:function(m,n,o){var p=l.getRangeIndices(n,o);return m.slice(p[0],p[1]+1);},moveRange:function(m,n){var o=n||-7;return {since:h.utc.offset(m.since,o),until:h.utc.offset(m.until,o)};},chartHasDataToRender:function(m){return m.lines&&m.lines.length||m.areas&&m.areas.length;}};e.exports=l;},null);
__d("HubbleApiWrapper",["HubbleApiClient","HubbleContext","HubbleConstants","HubblePostUtils","InsightsUtils","PIAPIResponseSanityCheck","SanityCheckAdapter","d3/time/day","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(r){return function(s){var t=null;if(s.cursor){var u=s.posts[s.posts.length-1].created_time;t=function(v){g.getPosts({cursor:s.cursor,type:s.type,until:u},p(v));};}else if(s.paging&&s.paging.next)t=function(v){g.getRaw(s.paging.next,{},p(v));};r(s,t);};}var q={_formatPageInsightsPerPostResponse:function(r,s){var t={},u=/^([^\/]+)\//;s.data.forEach(function(v){var w=u.exec(v.id);if(!w||!w[1])return;var x=w[1],y;if(t.hasOwnProperty(x)){y=t[x];}else{t[x]=y={};r.forEach(function(z){y[z]=null;});}y[v.name]=v.values[0].value;});return t;},getPageInfo:function(r,s){var t='';g.get(t,r,s);},getPageInsights:function(r,s){r=k.formatParams(r);g.get('/insights',r,function(t){o(m.check.bind(m,l,[r,t],{metrics:JSON.stringify(r.metric),pageID:h.getPageID()}));s(k.formatInsightsResponse(t));});},getPageInsightsPerPost:function(r,s){r=k.formatParams(r);function t(u){return p(function(v,w){var x=!w?null:function(y){w(t(y));};u(q._formatPageInsightsPerPostResponse(r.metric,v),x);});}if(h.get('activePostUseNewEndpoint')){r.metrics=r.metric;g.get('/posts_insights',r,t(s));}else g.get('/insights',r,t(s));},getPostInsights:function(r,s){g.getRaw('/insights',r,function(t){s(j._formatPostInsightsResponse(r.metric,t));});},getPostsByIDs:function(r,s){r=k.formatParams(r);g.getPosts(r,s);},getPosts:function(r,s){r=k.formatParams(r);g.getPosts(r,p(s));},getTotalPageLikes:function(r){if(h.get('globalBrandV1ParentID')){var s=i.PERIOD_LIFETIME,t=h.get('mostRecentTimes')[i.PIPELINE_LIFETIME];q.getPageInsights({metric:['page_fans'],period:i.PERIOD_LIFETIME,until:t,since:n.utc.offset(t,-1)},function(u){r(u.values.page_fans[s]);});}else if(h.get('globalBrandV2RootID')){q.getPageInfo({fields:['country_page_likes']},function(u){r(u.country_page_likes);});}else q.getPageInfo({fields:['likes']},function(u){r(u.likes);});}};e.exports=q;},null);
__d("InsightsNumUtils",["NumberFormatConfig","intlNumUtils","sprintf"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={GBP:'£%s',EUR:'%s€',JPY:'¥%s',USD:'$%s'},k={prettyCurrency:function(l,m){var n=j[l]||'%s %s',o=m.toFixed(2).split('.'),p=g.decimalSeparator;return i(n,this.prettyInt(parseInt(o[0],10))+p+o[1],l);},prettyShortCurrency:function(l,m){var n=k.prettyShortInt(m),o=j[l]||'%s %s';return i(o,k.prettyShortInt(m),l);},prettyFloat:function(l){return h.getFloatString(l,g.numberDelimiter,g.decimalSeparator);},prettyShortInt:function(l){function m(n,o){return Math.round((n/o)*10)/10;}if(Math.abs(l)>=1e+09)return this.prettyFloat(m(l,1e+09))+'B';if(Math.abs(l)>=1e+06)return this.prettyFloat(m(l,1e+06))+'M';if(Math.abs(l)>=1000)return this.prettyFloat(m(l,1000))+'K';return this.prettyInt(l);},prettyInt:function(l){return h.getIntegerString(Math.round(l),g.numberDelimiter);},prettyPercent:function(l,m){if(!m)m=0;return (l*100).toFixed(m)+'%';}};e.exports=k;},null);
__d("MercuryPagesChannelHandler",["ChannelConstants","MercuryActionType","MercuryChannelHandler","MercuryPayloadSource","MessagingEvent","MessagingRealtimeConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.__markAsSeen=function(p,q){"use strict";if(this.isPayloadForCurrentInstance(q))n.__markAsSeen.call(this,p,q);};o.prototype.__updateModelsFromMercuryPayload=function(p,q){"use strict";if(this.isPayloadForCurrentInstance(q))n.__updateModelsFromMercuryPayload.call(this,p,q);};o.prototype.__handleMessagingPayload=function(p,q){"use strict";if(this.isPayloadForCurrentInstance(q)){n.__handleMessagingPayload.call(this,p,q);this.__handlePageMessagingPayload(p,q);}};o.prototype.__handlePageMessagingPayload=function(p,q){"use strict";switch(q.obj.event){case k.CHANGE_PAGE_THREAD_FLAG:this.$MercuryPagesChannelHandler0(p,q);break;}};o.prototype.getRouting=function(){"use strict";return {pages_messaging:this.__handleMessagingPayload};};o.prototype.__getMessagingPayloadType=function(){"use strict";return g.getArbiterType('pages_messaging');};o.prototype.__getMercuryPayloadType=function(){"use strict";return null;};o.prototype.__getInboxPayloadType=function(){"use strict";return null;};o.prototype.$MercuryPagesChannelHandler0=function(p,q){"use strict";var r={action_type:h.CHANGE_FLAG,action_id:null,mark_as_flag:q.obj.flagged,other_user_fbid:q.obj.other_user_fbid};this.__serverRequests.handleUpdate({actions:[r],payload_source:j.CLIENT_CHANNEL_MESSAGE});};o.prototype.isPayloadForCurrentInstance=function(p){"use strict";var q=p.obj[l.VIEWER_FBID]+'',r=n.getInstanceFBID.call(this)+'';return (q===r);};e.exports=o;},null);
__d("MercuryThrottler",["Map","MercurySingletonMixin","emptyFunction","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={NORMAL:0,QUEUEING:1,FLUSHING:2};function l(m){this.$MercuryThrottler0=m;this.$MercuryThrottler1=new g();this.$MercuryThrottler2=Date.now();this.$MercuryThrottler3=0;this.$MercuryThrottler4=k.NORMAL;this.$MercuryThrottler5=0;}l.prototype.setMinThresholdDuration=function(m){this.$MercuryThrottler3=m;};l.prototype.setQueueResetDuration=function(m){this.$MercuryThrottler5=m;};l.prototype.registerHandlerType=function(m,n,o,p){if(!o)o=i.thatReturns;this.$MercuryThrottler1.set(m,{handler:n,instance:p,perBatchPostProcessHandler:o,queuedPayloads:[]});};l.prototype.$MercuryThrottler6=function(){this.$MercuryThrottler4=k.FLUSHING;this.$MercuryThrottler1.forEach(function(m,n,o){var p={fbid:this.$MercuryThrottler0,type:n,flushed_message_count:m.queuedPayloads.length,min_threshold_duration:this.$MercuryThrottler3,queue_reset_duration:this.$MercuryThrottler5};m.queuedPayloads.map(this.notifyHandler,this);m.perBatchPostProcessHandler({flushMetrics:p});m.queuedPayloads=[];},this);this.$MercuryThrottler4=k.NORMAL;};l.prototype.$MercuryThrottler7=function(){if(this.$MercuryThrottler4===k.NORMAL){var m=(Date.now()-this.$MercuryThrottler2);if(m<this.$MercuryThrottler3){this.$MercuryThrottler4=k.QUEUEING;setTimeout(this.$MercuryThrottler6.bind(this),this.$MercuryThrottler5);}}this.$MercuryThrottler2=Date.now();};l.prototype.notifyHandler=function(m){var n=m.type,o=m.payload;j(this.$MercuryThrottler1.has(n));var p=this.$MercuryThrottler1.get(n);this.$MercuryThrottler7();switch(this.$MercuryThrottler4){case k.NORMAL:case k.FLUSHING:p.handler.call(p.instance,n,o);break;case k.QUEUEING:p.queuedPayloads.push({type:n,payload:o});break;default:j(false);}if(this.$MercuryThrottler4===k.NORMAL)p.perBatchPostProcessHandler({});};Object.assign(l,h);e.exports=l;},null);
__d("XCctaCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ccta\/create\/",{});},null);
__d("CctaStore",["copyProperties","ads-lib-urllib","AsyncRequest","Arbiter","CustomCTAAppConfig","CustomCTAConstants","CctaDispatcher","ImmutableObject","validateDeepLink","URI","XCctaCreateController","XHRRequest","CustomCallToActionTypes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=b('CustomCallToActionTypes').TYPES,t=1000,u={},v={},w=1,x=false,y={androidDeepLinkError:null,androidPackageNameError:null,androidUriError:null,iphoneDeepLinkError:null,iphoneUriError:null,mobileUriError:null,webUriError:null},z=false,aa=false,ba=false,ca=null,da={showingDialog:{},showingFinishDialog:{}},ea={ctaFocusWebUri:{},ctaFocusMsite:{},iphoneFocusDeepLink:{},iphoneFocusURI:{},androidFocusPackageName:{},androidFocusDeepLink:{},androidFocusURI:{}},fa=function(){w=1;},ga=function(){y={};},ha=function(){u={};},ia=function(va){var wa=h.normalize(va);return h.isUrl(wa);},ja=function(){if(!(u.androidPackageName)){y.androidPackageNameError=l.CREATE_INVALID_PACKAGE_NAME;return false;}var va=u.androidPackageName.split(".");if(va.length<=1)return false;for(var wa=0;wa<va.length;wa++)if(!(va[wa].trim()))return false;return true;},ka=function(va){var wa=va.trim();return (((wa.length>7&&wa.substr(0,7)==="http://")||(wa.length>8&&wa.substr(0,8)==="https://")));},la=function(){if(!(u.iphoneDeepLink)){y.iphoneDeepLinkError=l.CREATE_INVALID_APP_LINK;return false;}if(ka(u.iphoneDeepLink)){y.iphoneDeepLinkError=l.CREATE_INVALID_APP_LINK;return false;}if(!o(u.iphoneDeepLink)){y.iphoneDeepLinkError=l.CREATE_INVALID_APP_LINK;return false;}return true;},ma=function(){if(!(u.androidDeepLink))return true;if(ka(u.androidDeepLink))return false;if(!o(u.androidDeepLink))return false;return true;},na=function(){if(!(u.mobileURI))return true;return ia(u.mobileURI);},oa=function(){if(!(u.webURI)){y.webUriError=l.CREATE_INVALID_WEB_LINK;return false;}if(!ia(u.webURI)){y.webUriError=l.CREATE_INVALID_WEB_LINK;return false;}return true;},pa=function(){if(!(u.iphoneURI))return true;if(ia(u.iphoneURI)){return true;}else{y.iphoneUriError=l.CREATE_INVALID_WEB_LINK;return false;}},qa=function(){if(!(u.androidURI))return true;return ia(u.androidURI);},ra=function(va,wa){if(va&&va.url){u.iphoneFBAppID=l.OPEN_APP_ID;u.iphoneDeepLink=va.url;}else u.iphoneFBAppID=l.OPEN_WEBSITE_ID;if(wa&&wa.url&&wa["package"]){u.androidFBAppID=l.OPEN_APP_ID;u.androidDeepLink=wa.url;u.androidPackageName=wa["package"];}else u.androidFBAppID=l.OPEN_WEBSITE_ID;m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'clear-loading'});});},sa=function(){ba=true;var va=new p(l.API_URL);va.addQueryData({access_token:k.access_token,ids:u.webURI,type:'al'});ca=new r(va);ca.setErrorHandler(function(wa){m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'clear-loading'});});}.bind(this)).setResponseHandler(function(wa){var xa=JSON.parse(wa)[u.webURI],ya=(xa.ios)?xa.ios.pop():null,za=(xa.android)?xa.android.pop():null;ra(ya,za);}.bind(this)).setMethod('GET').send();}.bind(this),ta=function(){if(w===1){var va=oa(),wa=na();if(va&&wa){return true;}else if(!va){ea.ctaFocusWebUri[u.pageID]=true;}else ea.ctaFocusMsite[u.pageID]=true;}else if(w===2){if(u.iphoneFBAppID===l.OPEN_WEBSITE_ID){if(pa())return true;}else if(u.iphoneFBAppID===l.OPEN_APP_ID){var xa=pa(),ya=la();if(xa&&ya){return true;}else if(!ya){ea.iphoneFocusDeepLink[u.pageID]=true;}else ea.iphoneFocusURI[u.pageID]=true;}else if(pa())return true;}else if(w===3)if(u.androidFBAppID===l.OPEN_WEBSITE_ID){if(qa())return true;}else if(u.androidFBAppID===l.OPEN_APP_ID){var za=qa(),ab=ja(),bb=ma();if(za&&bb&&ab){return true;}else if(!ab){ea.androidFocusPackageName[u.pageID]=true;}else if(!bb){ea.androidFocusDeepLink[u.pageID]=true;}else ea.androidFocusURI[u.pageID]=true;}else if(qa()&&ja())return true;return false;},ua=g(new j(),{getError:function(va){if(va in y)return y[va];return null;},getFocused:function(va,wa){if(wa in ea&&va in ea[wa])return ea[wa][va];return false;},getUi:function(va,wa){if(wa in da&&va in da[wa])return da[wa][va];return false;},getIsLoading:function(){return ba;},getIsPromoting:function(){return !!u.promoting;},getIsUpdate:function(){return z;},getConfirmationDialog:function(){return aa;},getData:function(){return new n(u);},getDataCopy:function(){u.page_id=u.pageID;return u;},getApps:function(){return new n(v);},getStep:function(){return w;},getPageID:function(){return u.pageID;},hasCCTAID:function(){return x;},getIphoneApp:function(){return 'iphoneFBAppID' in u?u.iphoneFBAppID:l.OPEN_WEBSITE_ID;},getAndroidApp:function(){return 'androidFBAppID' in u?u.androidFBAppID:2;},isInitialized:function(){var va=n.values(this.getData()).length;return va>1;},showDialogFromCallout:function(va){var wa=va.getAttribute('data-page-id');m.dispatch({actionType:'update-showing-dialog',data:wa});},saveDataToServer:function(){ba=true;if(u.webURI)u.webURI=h.normalize(u.webURI);if(u.mobileURI)u.mobileURI=h.normalize(u.mobileURI);if(u.iphoneFBAppID!==l.OPEN_APP_ID)u.iphoneDeepLink='';if(u.iphoneFBAppID===l.OPEN_WEBSITE_ID){u.iphoneURI='';}else if(u.iphoneURI)u.iphoneURI=h.normalize(u.iphoneURI);if(u.androidFBAppID!==l.OPEN_APP_ID){u.androidDeepLink='';u.androidPackagenameDeepLink='';}if(u.androidFBAppID===l.OPEN_WEBSITE_ID){u.androidURI='';}else if(u.iphoneURI)u.androidURI=h.normalize(u.androidURI);new i().setURI(q.getURIBuilder().getURI()).setData({payload_json:JSON.stringify(u)}).setHandler(function(va){if(va.payload)m.dispatch({actionType:'saved-to-server',data:va.payload});ba=false;}.bind(this)).send();},dispatchToken:m.register(function(va){switch(va.actionType){case 'saved-to-server':da.showingDialog[va.data.payload.pageID]=false;if(!('cctaID' in u))da.showingFinishDialog[va.data.payload.pageID]=true;u=va.data.payload;fa();ga();z=true;break;case 'deleted-to-server':da.showingDialog[va.data.payload.pageID]=false;u=va.data.payload;z=true;fa();ga();u.promoting=false;break;case 'update-from-server':fa();ga();var wa=u.showDialogTime;ha();ba=false;g(u,va.data);u.showDialogTime=wa;x=va.data.hasCctaId;if(!u.ctaType)u.ctaType=s.SHOP_NOW;break;case 'get-apps-from-server':v=va.data;break;case 'update-promote':u.promoting=va.data;break;case 'update-cta-type':u.ctaType=va.data;break;case 'update-weburl':u.webURI=va.data;break;case 'check-weburl':if(oa()){y.webUriError=null;}else y.webUriError=l.CREATE_INVALID_WEB_LINK;break;case 'update-msite':u.mobileURI=va.data;break;case 'check-msite':if(na()){y.mobileUriError=null;}else y.mobileUriError=l.CREATE_INVALID_WEB_LINK;break;case 'update-iphone-appselection':u.iphoneFBAppID=va.data;break;case 'update-iphone-url':u.iphoneURI=va.data;break;case 'check-iphone-url':if(pa()){y.iphoneUriError=null;}else y.iphoneUriError=l.CREATE_INVALID_WEB_LINK;break;case 'update-iphone-deeplink':u.iphoneDeepLink=va.data;break;case 'check-iphone-deeplink':if(la()){y.iphoneDeepLinkError=null;}else y.iphoneDeepLinkError=l.CREATE_INVALID_APP_LINK;break;case 'update-iphone-appstore-url':u.iphoneAppStoreUrl=va.data;break;case 'update-android-appselection':u.androidFBAppID=va.data;if(u.androidFBAppID in v){u.androidPackageName=v[u.androidFBAppID].androidStoreID;}else u.androidPackageName="";u.androidDeepLink="";y.androidDeepLinkError=null;break;case 'update-android-url':u.androidURI=va.data;y.androidUriError=null;break;case 'check-android-url':if(qa()){y.androidUriError=null;}else y.androidUriError=l.CREATE_INVALID_WEB_LINK;break;case 'update-android-deeplink':u.androidDeepLink=va.data;y.androidDeepLinkError=null;break;case 'check-android-deeplink':if(ma()){y.androidDeepLinkError=null;}else y.androidDeepLinkError=l.CREATE_INVALID_WEB_LINK;break;case 'update-android-package-name':u.androidPackageName=va.data;y.androidPackageNameError=null;break;case 'check-android-package-name':if(ja()){y.androidPackageNameError=null;}else y.androidPackageNameError=l.CREATE_INVALID_PACKAGE_NAME;break;case 'update-android-appstore_url':u.androidAppStoreUrl=va.data;break;case 'update-ipad-appselection':u.ipadAppSelection=va.data;break;case 'update-ipad-deeplink':u.ipadDeepLink=va.data;break;case 'update-ipad-appstore-url':u.ipadAppStoreUrl=va.data;break;case 'update-showing-dialog':da.showingDialog[va.data]=!da.showingDialog[va.data];if(!da.showingDialog[va.data]){fa();ga();ba=false;if(ca){ca.abort();ca=null;}}u.showDialogTime=Math.floor(Date.now()/t);break;case 'update-showing-finish-dialog':da.showingFinishDialog[va.data]=!da.showingFinishDialog[va.data];break;case 'show-confirmation-dialog':da.showingFinishDialog[va.data]=!da.showingFinishDialog[va.data];aa=!aa;break;case 'delete-confirmation-dialog':aa=!aa;x=true;break;case 'clear-focused':ea={ctaFocusWebUri:{},ctaFocusMsite:{},iphoneFocusDeepLink:{},iphoneFocusURI:{},androidFocusPackageName:{},androidFocusDeepLink:{},androidFocusURI:{}};break;case 'clear-loading':ba=!ba;break;case 'decrease-step':if(w>1)w=w-1;break;case 'increase-step':if(ta())if(w===3){u.submitRequestTime=Math.floor(Date.now()/t);ua.saveDataToServer();}else{if(w===1)if(!u.cctaID){sa();u.iphoneURI=u.mobileURI||u.webURI;if(!u.iphoneFBAppID)u.iphoneFBAppID=l.OPEN_WEBSITE_ID;u.androidURI=u.mobileURI||u.webURI;if(!u.androidFBAppID)u.androidFBAppID=l.OPEN_WEBSITE_ID;}w=w+1;}break;}ua.inform('change');})});e.exports=ua;},null);
__d("CctaDialogBodyAndroid.react",["cx","fbt","ix","CustomCTAConstants","CustomCTALogger","CustomCTAUtils","CctaDispatcher","Keys","Image.react","LeftRight.react","Link.react","Locale","PagesEventType","StoreAndPropBasedStateMixin","React","ReactComponentWithPureRenderMixin","CctaStore","XUISelector.react","XUITextInput.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=x.Option,aa="example://launch?location=123456",ba="https://play.google.com/store/apps/det...",ca="com.example.myapp",da=16,ea=u.createClass({displayName:"CctaDialogBodyAndroid",mixins:[t(w),v],statics:{calculateState:function(){return {androidDeepLinkError:w.getError('androidDeepLinkError'),androidPackageNameError:w.getError('androidPackageNameError'),androidUriError:w.getError('androidUriError'),apps:w.getApps(),data:w.getData(),focusPackageName:w.getFocused(w.getPageID(),'androidFocusPackageName'),focusDeepLink:w.getFocused(w.getPageID(),'androidFocusDeepLink'),focusUri:w.getFocused(w.getPageID(),'androidFocusURI')};}},componentDidUpdate:function(){if(this.state.focusPackageName){this.refs["package"].focusInput();m.addPostDispatchCallback(function(){m.dispatch({actionType:'clear-focused'});});}else if(this.state.focusDeepLink){this.refs.androiddeeplink.focusInput();m.addPostDispatchCallback(function(){m.dispatch({actionType:'clear-focused'});});}else if(this.state.focusUri){this.refs.backup.focusInput();m.addPostDispatchCallback(function(){m.dispatch({actionType:'clear-focused'});});}},_appsDropdown:function(){var fa=[];Object.keys(this.state.apps).forEach(function(ga){if(this.state.apps[ga].androidUrls.length===0)return;fa.push(u.createElement(z,{icon:u.createElement(o,{src:this.state.apps[ga].logoSrc,height:da,width:da}),key:this.state.apps[ga].id,value:this.state.apps[ga].id},this.state.apps[ga].name));}.bind(this));return (u.createElement(x,{name:"selector",onChange:this._handleAppSelect,value:this._getSelectedApp()},u.createElement(z,{key:j.OPEN_WEBSITE_ID,value:j.OPEN_WEBSITE_ID},j.SELECTOR_OPTION_WEBSITE),u.createElement(z,{key:j.OPEN_APP_ID,value:j.OPEN_APP_ID},j.SELECTOR_OPTION_APP),fa));},_getAndroidLaunchPackageName:function(){var fa=this._getSelectedApp();if(fa===j.OPEN_WEBSITE_ID)return '';if(fa in this.state.apps)return this.state.apps[fa].androidStoreID;return this.state.androidPackageName;},_getAndroidLaunchUrl:function(){if(this._getSelectedApp()===j.OPEN_WEBSITE_ID)return '';var fa=this._getSelectedApp();if(!(fa in this.state.apps))return '';var ga=this.state.apps[fa];if(!ga.androidUrls.length)return '';return ga.androidUrls[0];},_getAndroidStoreUrl:function(){if(this._getSelectedApp()===j.OPEN_WEBSITE_ID)return "";var fa=this._getSelectedApp();if(!(fa in this.state.apps))return "";var ga=this.state.apps[fa];return ga.androidStoreUrl;},_handleAppSelect:function(fa){var ga=w.getDataCopy();ga.androidDestinationType=fa.value;ga.event_type=s.CUSTOM_CTA_CHANGE_ANDROID_DESTINATION_TYPE;k.log(ga);m.dispatch({actionType:'update-android-appselection',data:fa.value});},_getSelectedApp:function(){var fa='androidFBAppID' in this.state.data?this.state.data.androidFBAppID:j.OPEN_WEBSITE_ID;return fa;},_changeUserDeepLink:function(event){var fa=w.getDataCopy();fa.event_type=s.CUSTOM_CTA_CHANGE_ANDROID_DEEPLINK;k.log(fa);m.dispatch({actionType:'update-android-deeplink',data:event.target.value});},_deepLinkSection:function(){return (u.createElement(y,{className:"_w0a",value:this.state.data.androidDeepLink,xuiError:this.state.androidDeepLinkError,placeholder:h._("Example: {number of days}",[h.param("number of days",aa)]),onChange:this._changeUserDeepLink}));},_changePackageName:function(event){var fa=w.getDataCopy();fa.event_type=s.CUSTOM_CTA_CHANGE_ANDROID_PACKAGE_NAME;k.log(fa);m.addPostDispatchCallback(function(){m.dispatch({actionType:'update-android-package-name',data:event.target.value});});},_checkAndroidDeepLink:function(){m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-android-deeplink'});});},_androidDeepLinkOnKeyDown:function(fa){if(fa.keyCode===n.RETURN){fa.preventDefault();m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-android-deeplink'});});if(!w.getError('androidDeepLinkError'))this.refs["package"].focusInput();}},_checkPackageName:function(){m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-android-package-name'});});},_PackageNameOnKeyDown:function(fa){if(fa.keyCode===n.RETURN){fa.preventDefault();m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-android-package-name'});});if(!w.getError('androidPackageNameError'))this.refs.backup.focusInput();}},_checkAndroidUri:function(){m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-android-url'});});},_androidUriOnKeyDown:function(fa){if(fa.keyCode===n.RETURN){fa.preventDefault();this._checkAndroidUri();}},_getPackageNameSection:function(){return (u.createElement("div",null,u.createElement("div",{className:"_qr4"},j.PACKAGE_NAME_LABEL),u.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_PACKAGE_NAME_MESSAGE_ANDROID),u.createElement(y,{className:"_qr5",editable:false,onBlur:this._checkPackageName,onChange:this._changePackageName,onKeyDown:this._PackageNameOnKeyDown,ref:"package",placeholder:h._("Example: {number of days}",[h.param("number of days",ca)]),value:this.state.data.androidPackageName,xuiError:this.state.androidPackageNameError})));},_getDeepLinkSection:function(){var fa=null;if(w.getAndroidApp()===j.OPEN_APP_ID){fa=u.createElement("div",null,u.createElement("div",{className:"_qr4"},j.APP_LINK_INPUT_LABEL),u.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_APPLINK_MESSAGE_ANDROID,' ',u.createElement(q,{target:"_blank",href:"https://developers.facebook.com/docs/applinks/android"},j.DEEPLINK_LEARN_MORE_LABEL)),u.createElement(y,{className:"_qr5",disabled:this._getAndroidLaunchUrl()?true:false,value:this._getAndroidLaunchUrl()||this.state.data.androidDeepLink,xuiError:this.state.androidDeepLinkError,onBlur:this._checkAndroidDeepLink,onChange:this._changeUserDeepLink,onKeyDown:this._androidDeepLinkOnKeyDown,placeholder:h._("Example: {number of days}",[h.param("number of days",aa)]),ref:"androiddeeplink"}));}else fa=u.createElement("div",null,u.createElement("div",{className:"_qr4"},j.APP_LINK_INPUT_LABEL),u.createElement("div",{className:"_qr5"},j.CREATE_ANDROID_DEEP_LINK_TEXT));return fa;},_handleAndroidUrl:function(event){var fa=w.getDataCopy();fa.event_type=s.CUSTOM_CTA_CHANGE_ANDROID_LINK;k.log(fa);m.dispatch({actionType:'update-android-url',data:event.target.value});},_getBackupSection:function(){return (u.createElement("div",null,u.createElement("div",{className:"_qr4"},j.BACKUP_LINK_LABEL),u.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_BACKUP_LINK_MESSAGE),u.createElement(y,{className:"_qr5",onBlur:this._checkAndroidUri,onChange:this._handleAndroidUrl,onKeyDown:this._androidUriOnKeyDown,ref:"backup",placeholder:h._("Example: {number of days}",[h.param("number of days",ba)]),value:this.state.data.androidURI,xuiError:this.state.androidUriError})));},render:function(){var fa=null;if(w.getAndroidApp()!==j.OPEN_WEBSITE_ID){fa=(u.createElement("div",null,this._getDeepLinkSection(),this._getPackageNameSection(),this._getBackupSection()));}else{var ga=w.getData();fa=(u.createElement("div",{className:"_3cgs"},h._("Your button will send people to {url} when they are using Android.",[h.param("url",l.getTruncatedURI(ga.mobileURI||ga.webURI))])));}return (u.createElement(p,{className:"_qr7 _nul"},u.createElement("div",{className:"_qr8"},u.createElement(o,{className:r.isRTL()?"_77u":'',src:i('/images/pages/custom_cta/android-preview-new.png'),height:j.PREVIEW_HEIGHT,width:j.PREVIEW_WIDTH}),u.createElement("div",{className:"_5l9k"},u.createElement(o,{className:"_5l9l",src:l.getCallToActionMobileIcon(this.state.data.ctaType)}),l.getCallToActionLabel(this.state.data.ctaType))),u.createElement("div",{className:"_qr9"},u.createElement("div",{className:"_qr4"},j.ANDROID_SECTION_TITLE),u.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_BODY_MESSAGE_ANDROID),u.createElement("div",{className:"_qra"},this._appsDropdown()),fa)));}});e.exports=ea;},null);
__d("CctaDialogBodyIphone.react",["cx","fbt","ix","CustomCTAConstants","CustomCTALogger","CustomCTAUtils","CctaDispatcher","Image.react","Keys","LeftRight.react","Link.react","Locale","PagesEventType","React","CctaStore","StoreAndPropBasedStateMixin","XUISelector.react","XUITextInput.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=w.Option,z="https://itunes.apple.com/us/app/facebook-messenger/id454638411",aa="example://location/123456",ba=16,ca=t.createClass({displayName:"CctaDialogBodyIphone",mixins:[v(u)],statics:{calculateState:function(){return {apps:u.getApps(),data:u.getData(),iphoneDeepLinkError:u.getError('iphoneDeepLinkError'),iphoneUriError:u.getError('iphoneUriError'),focusDeepLink:u.getFocused(u.getPageID(),'iphoneFocusDeepLink'),focusUri:u.getFocused(u.getPageID(),'iphoneFocusURI')};}},componentDidUpdate:function(){if(this.state.focusDeepLink){this.refs.iphonedeeplink.focusInput();m.addPostDispatchCallback(function(){m.dispatch({actionType:'clear-focused'});});}else if(this.state.focusUri){this.refs.backup.focusInput();m.addPostDispatchCallback(function(){m.dispatch({actionType:'clear-focused'});});}return;},_appsDropdown:function(){var da=[];Object.keys(this.state.apps).forEach(function(ea){if(this.state.apps[ea].iphoneUrls.length===0)return;da.push(t.createElement(y,{value:this.state.apps[ea].id,key:this.state.apps[ea].id,icon:t.createElement(n,{src:this.state.apps[ea].logoSrc,height:ba,width:ba})},this.state.apps[ea].name));}.bind(this));return (t.createElement(w,{name:"selector",onChange:this._handleAppSelect,value:this._getSelectedApp()},t.createElement(y,{key:j.OPEN_WEBSITE_ID,value:j.OPEN_WEBSITE_ID},j.SELECTOR_OPTION_WEBSITE),t.createElement(y,{key:j.OPEN_APP_ID,value:j.OPEN_APP_ID},j.SELECTOR_OPTION_APP),da));},_getIphoneLaunchUrl:function(){if(this._getSelectedApp()===j.OPEN_WEBSITE_ID)return '';var da=this._getSelectedApp();if(!(da in this.state.apps))return '';var ea=this.state.apps[da];if(!ea.iphoneUrls.length)return '';return ea.iphoneUrls[0];},_getIphoneStoreUrl:function(){if(this._getSelectedApp()===j.OPEN_WEBSITE_ID)return "";var da=this._getSelectedApp();if(!(da in this.state.apps))return "";var ea=this.state.apps[da];return ea.iphoneStoreUrl;},_handleAppSelect:function(da){var ea=u.getDataCopy();ea.iphoneDestinationType=da.value;ea.event_type=s.CUSTOM_CTA_CHANGE_IPHONE_DESTINATION_TYPE;k.log(ea);m.dispatch({actionType:'update-iphone-appselection',data:da.value});},_getSelectedApp:function(){var da='iphoneFBAppID' in this.state.data?this.state.data.iphoneFBAppID:j.OPEN_WEBSITE_ID;return da;},_changeUserDeepLink:function(event){var da=u.getDataCopy();da.event_type=s.CUSTOM_CTA_CHANGE_IPHONE_DEEPLINK;k.log(da);m.dispatch({actionType:'update-iphone-deeplink',data:event.target.value});},_checkIphoneDeepLink:function(){m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-iphone-deeplink'});});},_iphoneDeepLinkOnKeyDown:function(da){if(da.keyCode===o.RETURN){da.preventDefault();m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-iphone-deeplink'});});if(!u.getError('iphoneDeepLinkError'))this.refs.backup.focusInput();}},_checkIphoneUri:function(){m.addPostDispatchCallback(function(){m.dispatch({actionType:'check-iphone-url'});});},_iphoneUriOnKeyDown:function(da){if(da.keyCode===o.RETURN){da.preventDefault();this._checkIphoneUri();}},_getDeepLinkSection:function(){var da=null;if(this._getSelectedApp()===j.OPEN_APP_ID){da=t.createElement("div",null,t.createElement("div",{className:"_qr4"},j.APP_LINK_INPUT_LABEL),t.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_APPLINK_MESSAGE_IOS,' ',t.createElement(q,{target:"_blank",href:"https://developers.facebook.com/docs/applinks/ios"},j.DEEPLINK_LEARN_MORE_LABEL)),t.createElement(x,{className:"_qr5",disabled:this._getIphoneLaunchUrl()?true:false,onBlur:this._checkIphoneDeepLink,onChange:this._changeUserDeepLink,onKeyDown:this._iphoneDeepLinkOnKeyDown,placeholder:h._("Example: {number of days}",[h.param("number of days",aa)]),ref:"iphonedeeplink",value:this.state.data.iphoneDeepLink,xuiError:this.state.iphoneDeepLinkError}));}else da=t.createElement("div",null,t.createElement("div",{className:"_qr4"},j.APP_LINK_INPUT_LABEL),t.createElement("div",{className:"_qr5"},j.CREATE_IPHONE_DEEP_LINK_TEXT));return da;},_handleIphoneUrl:function(event){var da=u.getDataCopy();da.event_type=s.CUSTOM_CTA_CHANGE_IPHONE_LINK;k.log(da);m.dispatch({actionType:'update-iphone-url',data:event.target.value});},_getBackupSection:function(){return (t.createElement("div",null,t.createElement("div",{className:"_qr4"},j.BACKUP_LINK_LABEL),t.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_BACKUP_LINK_MESSAGE),t.createElement(x,{className:"_qr5",onBlur:this._checkIphoneUri,onChange:this._handleIphoneUrl,onKeyDown:this._iphoneUriOnKeyDown,placeholder:h._("Example: {number of days}",[h.param("number of days",z)]),ref:"backup",value:this.state.data.iphoneURI,xuiError:this.state.iphoneUriError})));},render:function(){var da=null;if(this._getSelectedApp()!==j.OPEN_WEBSITE_ID){da=(t.createElement("div",null,this._getDeepLinkSection(),this._getBackupSection()));}else{var ea=u.getData();da=(t.createElement("div",{className:"_3cgs"},h._("Your button will send people to {url} when they are using iPhone or iPad.",[h.param("url",l.getTruncatedURI(ea.mobileURI||ea.webURI))])));}return (t.createElement(p,{className:"_qr7"},t.createElement("div",{className:"_qr8"},t.createElement(n,{alt:"sad",className:r.isRTL()?"_77u":'',src:i('/images/pages/custom_cta/iphone-preview-new.png'),height:j.PREVIEW_HEIGHT,width:j.PREVIEW_WIDTH}),t.createElement("div",{className:"_1399"},t.createElement(n,{className:"_139a",src:l.getCallToActionMobileIcon(this.state.data.ctaType)}),l.getCallToActionLabel(this.state.data.ctaType))),t.createElement("div",{className:"_qr9"},t.createElement("div",{className:"_qr4"},j.IOS_SECTION_TITLE),t.createElement("div",{className:"_qr6"},j.CREATE_DIALOG_BODY_MESSAGE_IOS),t.createElement("div",{className:"_qra"},this._appsDropdown()),da)));}});e.exports=ca;},null);
__d("CctaDialogBodyCta.react",["React","cx","fbt","ix","CustomCTAUtils","CustomCTAConstants","CustomCTAUtils","CctaDispatcher","Image.react","Keys","LeftRight.react","Link.react","Locale","CustomCTALogger","PagesEventType","StoreAndPropBasedStateMixin","CctaStore","XUIButton.react","XUISelector.react","XUITextInput.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa="https://www.facebook.com/help/312169205649942",ba=g.createClass({displayName:"CctaDialogBodyCta",mixins:[v(w)],statics:{calculateState:function(ca){return {data:w.getData(),hasMobile:false,mobileUriError:w.getError('mobileUriError'),webURLInputErrorMessage:l.CREATE_INVALID_WEB_LINK,webUriError:w.getError('webUriError'),focusWebUri:w.getFocused(w.getPageID(),'ctaFocusWebUri'),focusMsite:w.getFocused(w.getPageID(),'ctaFocusMsite')};}},componentDidUpdate:function(){if(this.state.focusWebUri){this.refs.weburi.focusInput();n.addPostDispatchCallback(function(){n.dispatch({actionType:'clear-focused'});});}else if(this.state.focusMsite){this.refs.msite.focusInput();n.addPostDispatchCallback(function(){n.dispatch({actionType:'clear-focused'});});}return;},_onChangeCta:function(ca){var da=w.getDataCopy();da.event_type=u.CUSTOM_CTA_CHANGE_CTA_TYPE;t.log(da);n.dispatch({actionType:'update-cta-type',data:ca.value});},_onChangeWebURL:function(event){var ca=w.getDataCopy();ca.event_type=u.CUSTOM_CTA_CHANGE_WEB_LINK;t.log(ca);n.dispatch({actionType:'update-weburl',data:event.target.value});},_onChangeMsite:function(event){var ca=w.getDataCopy();ca.event_type=u.CUSTOM_CTA_CHANGE_MOBILE_LINK;t.log(ca);n.dispatch({actionType:'update-msite',data:event.target.value});},_checkWebUri:function(){n.addPostDispatchCallback(function(){n.dispatch({actionType:'check-weburl'});});},_checkMsite:function(){n.addPostDispatchCallback(function(){n.dispatch({actionType:'check-msite'});});},_weburlOnKeyDown:function(ca){if(ca.keyCode===p.RETURN){ca.preventDefault();n.addPostDispatchCallback(function(){n.dispatch({actionType:'check-weburl'});});if(!w.getError('webUriError'))this.refs.msite.focusInput();}},_msiteOnKeyDown:function(ca){if(ca.keyCode===p.RETURN){ca.preventDefault();this._checkMsite();}},render:function(){var ca=g.createElement("span",null,g.createElement(o,{className:"_1tzs",src:m.getCallToActionIcon(this.state.data.ctaType)}),m.getCallToActionLabel(this.state.data.ctaType));return (g.createElement(q,{className:"_qr7"},g.createElement("div",{className:"_qr8"},g.createElement(o,{alt:"sad",className:s.isRTL()?"_77u":'',src:j('/images/pages/custom_cta/www-preview-new.png')}),g.createElement(x,{className:"_1tzt",label:ca,size:"large"})),g.createElement("div",{className:"_qr9"},g.createElement("div",{className:"_5osn"},l.CREATE_DIALOG_BODY_MESSAGE,' ',g.createElement(r,{target:"_blank",href:aa},i._("Learn More")),"."),g.createElement("div",{className:"_qr4"},l.ACTION_SELECTOR_LABEL),g.createElement("div",{className:"_qra"},g.createElement(y,{onChange:this._onChangeCta,value:this.state.data.ctaType},k.getCallToActionSelectorOptions(l.CREATE_CTA_TYPE_OPTIONS))),g.createElement("div",{className:"_qr4"},l.WEB_LINK_INPUT_LABEL),g.createElement(z,{className:"_qr5",onBlur:this._checkWebUri,onChange:this._onChangeWebURL,onKeyDown:this._weburlOnKeyDown,placeholder:l.WEB_LINK_INPUT_PLACEHOLDER,ref:"weburi",value:this.state.data.webURI,xuiError:this.state.webUriError}),g.createElement("div",{className:"_qr4"},l.MOBILE_LINK_INPUT_LABEL),g.createElement(z,{className:"_qr5",onBlur:this._checkMsite,onChange:this._onChangeMsite,onKeyDown:this._msiteOnKeyDown,placeholder:l.OPTIONAL_LABEL,ref:"msite",value:this.state.data.mobileURI,xuiError:this.state.mobileUriError}))));}});e.exports=ba;},null);
__d("CctaDialogBody.react",["CctaDialogBodyAndroid.react","CctaDialogBodyIphone.react","CctaDialogBodyCta.react","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=j,l=k.PropTypes,m=j.createClass({displayName:"CctaDialogBody",propTypes:{step:l.number.isRequired},render:function(){switch(this.props.step){case 1:return j.createElement(i,null);case 2:return j.createElement(h,null);case 3:return j.createElement(g,null);}return null;}});e.exports=m;},null);
__d("XCctaAppsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/custom_cta\/getapps\/",{});},null);
__d("CctaAdvancedDialog.react",["cx","fbt","AsyncRequest","CctaDialogBody.react","CustomCTAConstants","CustomCTALogger","CctaDispatcher","LayerFadeOnHide","LoadingIndicator.react","PagesEventType","PureStoreBasedStateMixin","React","CctaStore","XCctaAppsController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa=r,ba=aa.PropTypes,ca=r.createClass({displayName:"CctaAdvancedDialog",mixins:[q(s)],propTypes:{onClose:ba.func.isRequired,onShowUpdateAlert:ba.func,payload:ba.object.isRequired,shown:ba.bool.isRequired},statics:{calculateState:function(){return {data:s.getData(),isLoading:s.getIsLoading(),step:s.getStep()};}},_getPrimaryActionButton:function(){var da=null;if(this.state.step===3){if(s.getData().cctaID){da=h._("Save Changes");}else da=h._("Create");}else da=h._("Next");return (r.createElement(w,{label:da,onClick:this._clickPrimaryActionButton,use:"confirm"}));},_getSecondaryActionButton:function(){if(this.state.step===1){return (r.createElement(w,{action:"cancel",label:h._("Cancel"),onClick:this._onClose,use:"default"}));}else return (r.createElement(w,{label:h._("Back"),onClick:this.decreaseStep,use:"default"}));},componentDidMount:function(){var da=(t.getURIBuilder()).getURI();new i(da).setHandler(function(ea){m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'get-apps-from-server',data:ea.payload});});}).send();},componentWillMount:function(){this._subscription=s.subscribe('change',function(){this.setState({data:s.getData()});}.bind(this));m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'update-from-server',data:this.props.payload});}.bind(this));},componentWillUnmount:function(){this._subscription.unsubscribe();},componentDidUpdate:function(){window.setTimeout(function(){return this.refs.dialog&&this.refs.dialog.layer.updatePosition();}.bind(this),0);},_renderDialogTitle:function(){if(this.state.step===1){if(this.state.data&&this.state.data.cctaID){return k.EDIT_CALL_TO_ACTION_WEBSITE;}else return k.CREATE_CALL_TO_ACTION_WEBSITE;}else if(this.state.step===2){return k.CREATE_CALL_TO_ACTION_IPHONE;}else if(this.state.step===3)return k.CREATE_CALL_TO_ACTION_ANDROID;},_clickPrimaryActionButton:function(){var da=s.getData();if(this.state.step===3&&da.promoting&&da.cctaID&&this.props.onShowUpdateAlert){this.props.onShowUpdateAlert();}else this.increaseStep();},increaseStep:function(){var da=s.getDataCopy();da.step=this.state.step;if(this.state.step<=2){da.event_type=p.CUSTOM_CTA_CLICK_NEXT_BUTTON;}else if(this.state.step===3)da.event_type=p.CUSTOM_CTA_CLICK_CREATE_BUTTON;l.log(da);m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'increase-step'});});},decreaseStep:function(){var da=s.getDataCopy();da.step=this.state.step;if(da.step<=1){da.event_type=p.CUSTOM_CTA_CLICK_CLOSE;}else da.event_type=p.CUSTOM_CTA_CLICK_BACK_BUTTON_ON_DIALOG;l.log(da);m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'decrease-step'});});},_logCancel:function(){var da=s.getDataCopy();da.step=this.state.step;da.event_type=p.CUSTOM_CTA_CLICK_CANCEL;l.log(da);},_onClose:function(){this._logCancel();},_onToggle:function(da){if(da===false){this._logCancel();m.addPostDispatchCallback(function(){m.cctaDispatch({actionType:'update-showing-dialog',data:this.props.payload.pageID});}.bind(this));}},renderDialogBody:function(){if(this.state.isLoading&&this.state.step!==3){return (r.createElement("div",null,r.createElement(v,null,k.CREATE_LOADING_MESSAGE),r.createElement(v,{className:"_2pv5"},r.createElement(z,{background:"light",size:"large"}))));}else return r.createElement(j,{step:this.state.step});},_renderSubmittingIndicator:function(){if(this.state.isLoading&&this.state.step===3)return (r.createElement(o,{className:"mrm",color:"white",size:"small"}));return null;},render:function(){return (r.createElement(u,{behaviors:{LayerFadeOnHide:n},fixedTopPosition:0,ref:"dialog",layerHideOnBlur:false,onClose:this._onClose,onToggle:this._onToggle,width:k.CREATE_DIALOG_WIDTH,height:k.CREATE_DIALOG_HEIGHT,shown:this.props.shown},r.createElement(y,null,this._renderDialogTitle()),r.createElement(v,{useCustomPadding:true},this.renderDialogBody()),r.createElement(x,{className:"_32t9"},this._renderSubmittingIndicator(),this._getSecondaryActionButton(),this._getPrimaryActionButton())));}});e.exports=ca;},null);
__d("CctaUpdateAlertDialog.react",["fbt","CustomCTAConstants","CctaDispatcher","LayerFadeOnHide","React","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=k,s=r.PropTypes,t=k.createClass({displayName:"CctaUpdateAlertDialog",propTypes:{onClose:s.func.isRequired},_confirmUpdate:function(){i.addPostDispatchCallback(function(){i.cctaDispatch({actionType:'increase-step'});});},render:function(){return (k.createElement(l,{behaviors:{LayerFadeOnHide:j},width:400,onClose:this.props.onClose,onToggle:this.props.onClose,shown:true},k.createElement(q,null,h.UPDATE_DURING_PROMOTION_DIALOG_TITLE),k.createElement(m,null,h.UPDATE_DURING_PROMOTION_DIALOG_MESSAGE),k.createElement(p,null,k.createElement(n,{onClick:this.props.onClose}),k.createElement(o,{action:"cancel",label:g._("Update Call-to-Action"),onClick:this._confirmUpdate,use:"confirm"}))));}});e.exports=t;},null);
__d("CustomCTAFinish.react",["fbt","CctaDispatcher","LayerHideOnBlur","React","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUIDialogButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j,q=p.PropTypes,r=j.createClass({displayName:"CustomCTAFinish",propTypes:{createButton:q.object.isRequired,onClose:q.func.isRequired,pageid:q.string.isRequired},onClick:function(){h.dispatch({actionType:'show-confirmation-dialog',data:this.props.pageid});},render:function(){return (j.createElement(k,{alignment:"center",behaviors:{LayerHideOnBlur:i},context:j.findDOMNode(this.props.createButton),onToggle:this.onClick,position:"below",shown:true,width:350},j.createElement(n,null,g._("Your Call-to-Action Button Is Ready")),j.createElement(l,null,g._("This button is now showing on your Page. You can test or edit it here.")),j.createElement(m,null,j.createElement(o,{action:"cancel",label:"Next",onClick:this.onClick,use:"confirm"}))));}});e.exports=r;},null);
__d("XCctaDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ccta\/delete\/",{page_id:{type:"Int",required:true},ccta_id:{type:"Int",required:true}});},null);
__d("CctaAdminMenu.react",["CctaAdvancedDialog.react","Arbiter","AsyncRequest","BoostedComponentRef","BoostedComponentDialogWidget.react","CctaUpdateAlertDialog.react","ContextualDialogArrow","CustomCTAConstants","CustomCTALogger","CustomCTAUtils","CustomCTAFinish.react","CctaDispatcher","LayerFadeOnHide","MenuSeparator.react","PagesEventType","PopoverMenu.react","React","Image.react","ReactLayeredComponentMixin","StoreAndPropBasedStateMixin","CctaStore","XCctaDeleteController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","ReactXUIMenu","XUIPopoverButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){b.__markCompiled&&b.__markCompiled();'use strict';var la=w,ma=la.PropTypes,na=ha.Item,oa=w.createClass({displayName:"DeleteDialog",propTypes:{pageID:ma.string.isRequired,cctaID:ma.string.isRequired,promoting:ma.bool},_onDeleteButtonClick:function(){o.log({event_type:u.CUSTOM_CTA_CLICK_DELETE,page_id:this.props.pageID,ccta_id:this.props.cctaID});var qa=ba.getURIBuilder().setInt('ccta_id',this.props.cctaID).setInt('page_id',this.props.pageID).getURI();new i().setURI(qa).setHandler(function(ra){r.dispatch({actionType:'deleted-to-server',data:ra.payload});}.bind(this)).send();},render:function(){var qa=null,ra=null;if(this.props.promoting){qa=n.DELETE_DURING_PROMOTION_DIALOG_TITLE;ra=n.DELETE_DURING_PROMOTION_DIALOG_MESSAGE;}else{qa=n.DELETE_DIALOG_TITLE;ra=n.DELETE_DIALOG_MESSAGE;}return (w.createElement(ca,{behaviors:{LayerFadeOnHide:s},onToggle:this.props.onClose,shown:true,width:400},w.createElement(ga,null,qa),w.createElement(da,null,ra),w.createElement(fa,null,w.createElement(ea,{action:"cancel",label:ka._("Cancel"),use:"default"}),w.createElement(ea,{action:"confirm",label:ka._("Delete Call to Action"),onClick:this._onDeleteButtonClick,use:"confirm"}))));}}),pa=w.createClass({displayName:"CctaAdminMenu",mixins:[z(aa),y],propTypes:{payload:ma.object.isRequired},getInitialState:function(){return {dialogState:n.NO_DIALOG};},statics:{calculateState:function(qa){return {showingDialog:aa.getUi(qa.payload.pageID,'showingDialog'),showingFinishDialog:aa.getUi(qa.payload.pageID,'showingFinishDialog'),step:aa.getStep(),isPromoting:aa.getIsPromoting()};}},_toggleDialog:function(){this.setState({dialogState:n.NO_DIALOG});r.dispatch({actionType:'update-showing-dialog',data:this.props.payload.pageID});},_showEditDialog:function(){o.log({event_type:u.CUSTOM_CTA_VIEW_EDIT,page_id:this.props.payload.pageID,ccta_type:this.props.payload.callToActionType,ccta_id:this.props.payload.cctaID});r.dispatch({actionType:'update-showing-dialog',data:this.props.payload.pageID});this.setState({dialogState:n.EDIT_DIALOG});},_showDeleteDialog:function(){o.log({event_type:u.CUSTOM_CTA_VIEW_DELETE,page_id:this.props.payload.pageID,ccta_type:this.props.payload.callToActionType,ccta_id:this.props.payload.cctaID});this.setState({dialogState:n.DELETE_DIALOG});},_onCloseFinishDialog:function(){r.dispatch({actionType:'update-showing-finish-dialog',data:this.props.payload.pageID});this.setState({dialogState:n.NO_DIALOG});},_onContinueUpdate:function(){this.setState({dialogState:n.EDIT_DIALOG});},_onShowUpdateAlert:function(){this.setState({dialogState:n.UPDATE_ALERT_DIALOG});},renderLayers:function(){if(this.state.dialogState===n.UPDATE_ALERT_DIALOG&&this.state.showingDialog){return (w.createElement(l,{onClose:this._toggleDialog}));}else if(this.state.dialogState===n.EDIT_DIALOG&&this.state.showingDialog){return (w.createElement(g,{onClose:this._toggleDialog,payload:this.props.payload,shown:this.state.dialogState===n.EDIT_DIALOG&&this.state.showingDialog,onShowUpdateAlert:this._onShowUpdateAlert}));}else if(this.state.dialogState===n.DELETE_DIALOG){return (w.createElement(oa,{cctaID:this.props.payload.cctaID,onClose:this._toggleDialog,pageID:this.props.payload.pageID,promoting:this.props.payload.promoting}));}else if(this.state.showingFinishDialog&&!aa.hasCCTAID())return (w.createElement(q,{createButton:this.refs.ctaButton,onClose:this._onCloseFinishDialog,pageid:this.props.payload.pageID}));},_openTestLink:function(){p.executeCallToAction(this.props.payload.webURI);o.log({event_type:u.CUSTOM_CTA_CLICK_TEST_LINK,page_id:this.props.payload.pageID,ccta_id:this.props.cctaID,web_uri:this.props.payload.webURI});},_onMouseEnterPromoteItem:function(){this.refs.boostButton.onMouseEnter();},_showPromotionDialog:function(qa){this.refs.boostButton.onUpsellButtonClick(qa);},_showInsightPanel:function(){h.inform(n.SHOW_FLYOUT,{});},render:function(){var qa=null;if(this.props.payload.canPromote)qa=w.createElement(na,{onclick:this._showPromotionDialog},w.createElement("div",{onMouseEnter:this._onMouseEnterPromoteItem},this.state.isPromoting?n.EDIT_PROMOTION_LABEL:n.PROMOTE_LABEL,w.createElement("div",{hidden:true},w.createElement(k,{configData:this.props.payload.config,buttonLabel:n.PROMOTE_LABEL,placement:j.CCTA_ADMIN_MENU,ref:"boostButton"}))));var ra=w.createElement(ha,null,w.createElement(na,{onclick:this._openTestLink},n.TEST_LABEL),qa,w.createElement(na,{onclick:this._showInsightPanel},n.INSIGHTS_LABEL),w.createElement(na,{onclick:this._showEditDialog},n.EDIT_LABEL),w.createElement(t,null),w.createElement(na,{onclick:this._showDeleteDialog},n.DELETE_LABEL)),sa=w.createElement("span",null,w.createElement(x,{className:"_xgc",src:p.getCallToActionIcon(this.props.payload.ctaType)}),p.getCallToActionLabel(this.props.payload.ctaType));return (w.createElement(v,{layerBehaviors:[m],menu:ra},w.createElement(ia,{borderShade:"dark",label:sa,size:"large",ref:"ctaButton"})));}});e.exports=pa;},null);
__d("CctaCreateButton.react",["CctaAdvancedDialog.react","CustomCTAConstants","CustomCTALogger","CctaDispatcher","PagesEventType","React","ReactLayeredComponentMixin","CctaStore","StoreAndPropBasedStateMixin","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"CctaCreateButton",mixins:[o(n),m],propTypes:{payload:r.object.isRequired},statics:{calculateState:function(t){return {showingDialog:n.getUi(t.payload.pageID,'showingDialog'),step:n.getStep()};}},_hideCreateDialog:function(){j.addPostDispatchCallback(function(){j.cctaDispatch({actionType:'update-showing-finish-dialog',data:this.props.payload.pageID});}.bind(this));},_showDialog:function(){i.log({event_type:k.CUSTOM_CTA_VIEW_CREATE,user_id:this.props.payload.userID,page_id:this.props.payload.pageID});this._toggleDialog();},_toggleDialog:function(){j.addPostDispatchCallback(function(){j.cctaDispatch({actionType:'update-showing-dialog',data:this.props.payload.pageID});}.bind(this));},renderLayers:function(){if(this.state.showingDialog)return {dialog:l.createElement(g,{onClose:this._toggleDialog,payload:this.props.payload,shown:this.state.showingDialog})};},render:function(){var t=h.CREATE_LABEL;return (l.createElement(p,{"aria-label":h.CREATE_TOOLTIP,"data-hover":"tooltip",borderShade:"dark",label:t,onClick:this._showDialog,ref:"createButton",size:"large"}));}});e.exports=s;},null);
__d("CctaAdminUnit.react",["AsyncRequest","CctaAdminMenu.react","CctaCreateButton.react","ContextualLayerUpdateOnScroll","CctaDispatcher","LayerHideOnBlur","React","ReactLayeredComponentMixin","CctaStore","StoreAndPropBasedStateMixin","XCctaCalloutActionController","XUIAmbientNUX.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=m,t=s.PropTypes,u=m.createClass({displayName:"CctaAdminUnit",mixins:[n,p(o)],propTypes:{payload:t.object.isRequired},statics:{calculateState:function(v){if(o.isInitialized()&&o.getIsUpdate())if(o.getPageID()===v.payload.pageID)return {payload:o.getDataCopy()};return {payload:v.payload};}},componentWillMount:function(){k.addPostDispatchCallback(function(){k.cctaDispatch({actionType:'update-from-server',data:this.props.payload});}.bind(this));},_onNUXClose:function(){this.setState({hideNUX:true});var v=q.getURIBuilder().setInt('page_id',this.props.payload.pageID).setString('action','skip_promotion').getURI();new g().setURI(v).send();},renderLayers:function(){var v=this.state.payload.nux;if(!v||!v.showNUX||!v.content||!this.refs.admin_unit)return {};return {nux:m.createElement(r,{alignment:"left",behaviors:{ContextualLayerUpdateOnScroll:j,LayerHideOnBlur:l},contextRef:"admin_unit",onCloseButtonClick:this._onNUXClose,position:"above",shown:!this.state.hideNUX},v.content)};},render:function(){var v=null;if(!!this.state.payload.cctaID){v=m.createElement(h,{payload:this.state.payload,ref:"admin_unit"});}else v=m.createElement(i,{payload:this.state.payload});return v;}});e.exports=u;},null);
__d("CctaConfirmationDialog.react",["fbt","CctaDispatcher","LayerHideOnBlur","React","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","XUIDialogButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=j,q=p.PropTypes,r=j.createClass({displayName:"CctaConfirmationDialog",propTypes:{createButton:q.object.isRequired,pageid:q.number.isRequired},onClick:function(){h.dispatch({actionType:'delete-confirmation-dialog',data:this.props.pageid});},render:function(){return (j.createElement(k,{alignment:"center",behaviors:{LayerHideOnBlur:i},context:j.findDOMNode(this.props.createButton),onToggle:this.onClick,position:"left",shown:true,width:350},j.createElement(n,null,g._("View Your Results")),j.createElement(l,null,g._("Check here to see how many times your call-to-action(CTA) button has been clicked in the last 7 days.")),j.createElement(m,null,j.createElement(o,{action:"cancel",label:"Finish",onClick:this.onClick,use:"confirm"}))));}});e.exports=r;},null);
__d("PagesMissions",["cx","ge","AsyncRequest","CSS","DOM","DOMScroll","Event","PagesBanzaiLogger","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=600,q=44,r={lastHighlighted:null,registerObjectiveClickAction:function(s,t,u,v){m.listen(s,'click',function(){n.logData(v,null);return this[t](u);}.bind(this));},clickButton:function(s){if(s)s.click();},getElementWithClass:function(s,t){var u=h(s);if(!u)return;var v=k.scry(u,t);if(v.length>0)return v[0];return null;},scrollToAndHighlight:function(s,t){if(this.lastHighlighted){j.removeClass(this.lastHighlighted,"_4n2n");this.lastHighlighted=null;}var u=this.getElementWithClass(s,t);if(u){l.scrollTo(u,p,false,false,q);j.addClass(u,"_4n2n");this.lastHighlighted=u;}},goToURI:function(s){(new o(s)).go();},callAjaxEndpoint:function(s){new i().setURI(s).send();},PagesMissionsAddProfilePictureObjectiveInfoAction:function(s){this.scrollToAndHighlight('fbPageFinchProfilePic','.profilePic');var t=this.getElementWithClass('fbPageFinchProfilePic',s.selector);this.clickButton(t);return false;},PagesMissionsAddCoverPhotoObjectiveInfoAction:function(s){this.scrollToAndHighlight('fbProfileCover','.'+"_117o");var t=this.getElementWithClass('fbProfileCover','.fbTimelineEditCoverButton');this.clickButton(t);return false;},PagesMissionsAddContactInfoObjectiveInfoAction:function(s){this.callAjaxEndpoint(s.addContactInfoDialogURI);},PagesMissionsInviteFriendsObjectiveInfoAction:function(s){this.callAjaxEndpoint(s.inviteFriendsURI);},PagesMissionsImportEmailContactsObjectiveInfoAction:function(s){this.callAjaxEndpoint(s.contactsURI);},PagesMissionsPromotePageObjectiveInfoAction:function(s){this.callAjaxEndpoint(s.promotePageURI);},registerAddContactInfoDialogResponse:function(s){s.subscribe('success',function(t,event){var u=event.data.response;if(u.payload=='close_dialog'){s.hide();this.goToURI(window.location.pathname);}}.bind(this));}};e.exports=r;},null);
__d("PagesManagerMessagesInterface",["ge","Animation","Arbiter","AsyncRequest","CSS","DOM","Event","fbt","PagesMessagingConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={init:function(q,r,s,t,u,v){m.listen(q,'click',function(){new j().setURI(o.ASYNC_ENDPOINT).setData({action:'markAllRead',pageid:u,folder:v,is_page:true}).setHandler(function(){this.notifyUpdateCompleted();}.bind(this)).send();}.bind(this));m.listen(r,'click',function(){k.toggleClass(q,'hidden_elem');k.toggleClass(s,'hidden_elem');});m.listen(s,'submit',function(){t.blur();});},applyIfVisibleOnPage:function(q,r){var s=g(q);if(s)r(s);},changeThreadSpamStatus:function(q,r,s){new j().setURI(o.ASYNC_ENDPOINT).setData({action:(s?'reportSpam':'unmarkSpam'),pageid:q,tids:r,is_page:true}).send();this.applyIfVisibleOnPage(r,this.hideElement);},changeThreadArchivedStatus:function(q,r,s,t){new j().setURI(o.ASYNC_ENDPOINT).setData({action:'tag',tag:'action:archived',state:(s?1:0),broadcast:true,pageid:q,tids:[r],is_page:true,placement:t}).send();this.applyIfVisibleOnPage(r,function(u){k.addClass(u,'archived');this.hideElement(u);}.bind(this));},changeThreadReadStatus:function(q,r,s,t){new j().setURI(o.ASYNC_ENDPOINT).setData({action:(s?'markRead':'markUnread'),pageid:q,tids:[r],is_page:true,placement:t}).send();var u=(s?k.removeClass:k.addClass);this.applyIfVisibleOnPage(r,function(v){u(v,'unread');});},hideElement:function(q){new h(q).to('opacity',0).duration(150).hide().go();},deleteMessages:function(q,r,s,t,u){var v=new j(),w={action:(q?'delete':'deleteMessages'),pageid:t,is_page:true};w['delete']=(q?'Delete Conversation':'Delete Messages');if(q){w.tids=u;}else{w.folder='inbox';w.mids=Object.keys(r);}v.setURI(o.ASYNC_ENDPOINT);v.setHandler(function(x){s();});v.setData(w);v.send();},notifyUpdateCompleted:function(){i.inform('PagesManagerLayout/refreshSection',{section:'messages'});},showMessageThread:function(q,r,s,t,u){var v=l.create('div');l.appendContent(document.body,v);new j().setURI(o.LOAD_MESSAGE_THREAD_URI).setData({folder:t,pageid:q,source:u,threadElementID:s,threadid:r}).setRelativeTo(v).send();},updateUnreadCount:function(q){i.inform('pagesManagerMessaging/messageUnreadCountUpdated',{metricCount:q});i.inform('PagesManagerLayout/updateCount',{count:q,section:'messages'});i.inform('PagesManagerLayout/updateCount',{count:q,section:'messages',subsection:'inbox'});var r=g('pageUnreadMessageCount');if(r){var s='';if(q>0)s=(q===1)?n._({"*":"{number unread messages} Unread"},[n.param("number unread messages",q,[0])]):n._({"*":"{number unread messages} Unread"},[n.param("number unread messages",q,[0])]);l.setContent(r,s);}},updatePreferences:function(q){new j().setURI(o.ASYNC_ENDPOINT).setData({action:'setPreferences',send_on_enter:q.sendOnEnter}).send();}};e.exports=p;},null);
__d("PagesManagerNavbar",["Arbiter","ChannelConstants","CSS","DOM","Event","MercuryThreadInformer","MercuryThrottler","MercuryUnreadState","MessagingTag","PagesBanzaiLogger","PagesManagerMessagesInterface","PagesEventType","Vector","ViewportBounds","copyProperties","csx","cx","getStyleProperty","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z={init:function(aa,ba,ca,da,ea,fa,ga){this._setupStickyAreaAndDropshadow(ba);var ha=g.subscribe('page_transition',function(){ha.unsubscribe();this._setupStickyAreaAndDropshadow(ba);}.bind(this));this._messageCount=ca;y(g.subscribe('pagesManagerMessaging/messageUnreadCountUpdated',function(ia,ja){this._messageCount=ja.metricCount;}.bind(this)));this._registerUnreadUpdates(aa,fa,ga,ea);},initLogging:function(aa,ba){k.listen(ba,'click',function(){var ca=u({},aa);ca.event_name=r.NAV_VIEW_HELP;p.logData(ca);});},throttleQueueFlushLog:function(aa){var ba=aa.flushMetrics;if(ba)p.logData({page_id:ba.fbid,event_name:r.REALTIME_PAYLOAD_FLUSH,payload_type:ba.type,message_count:ba.flushed_message_count,min_threshold_duration:ba.min_threshold_duration,queue_reset_duration:ba.queue_reset_duration});},realtimePayloadDeliveredLog:function(aa){var ba=aa.pageId,ca=aa.type;p.logData({page_id:ba,event_name:r.REALTIME_PAYLOAD_DELIVER,payload_type:ca});},_registerUnreadUpdates:function(aa,ba,ca,da){var ea=h.getArbiterType('pages_inbox_count_update'),fa='unread-updated',ga=m.getForFBID(aa);ga.setMinThresholdDuration(ba);ga.setQueueResetDuration(ca);if(da){ga.registerHandlerType(fa,function(ja,ka){var la=ia.getUnreadCount(o.INBOX);q.updateUnreadCount(la);this.realtimePayloadDeliveredLog({pageId:aa,type:ja});}.bind(this),this.throttleQueueFlushLog);var ha=l.getForFBID(aa),ia=n.getForFBID(aa);ha.subscribe(fa,function(ja,ka){return ga.notifyHandler({type:ja,payload:ka});});}else{ga.registerHandlerType(ea,function(ja,ka){q.updateUnreadCount(ka.inbox_unread);this.realtimePayloadDeliveredLog({pageId:aa,type:ja});}.bind(this),function(ja){g.inform('PagesManagerLayout/refreshSection',{section:'messages'});this.throttleQueueFlushLog(ja);}.bind(this));y(g.subscribe(ea,function(ja,ka){return m.getForFBID(ka.page_id).notifyHandler({type:ja,payload:ka});}));}},_setupStickyAreaAndDropshadow:function(aa){if(this._instance==aa)return;this._instance=aa;var ba=aa._node.firstChild,ca=ba.getBoundingClientRect().height,da=t.getTop();aa.setOffset(da);t.addTop(da+ca);var ea=parseInt(x(ba,'marginBottom'),10)+1;this._event=y(k.listen(window,'scroll',function(){aa.setOffset(t.getTop()-ca);var fa=j.scry(document,"div._525w");if(fa.length)return;i.conditionClass(ba,"_c7_",s.getScrollPosition().y>ea);}));}};e.exports=z;},null);
__d("ContextualDialogLockOnClick",["Event","LayerHideOnBlur","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=1000;function k(l){"use strict";this.$ContextualDialogLockOnClick0=l;}k.prototype.enable=function(){"use strict";this.$ContextualDialogLockOnClick1=new i();this.$ContextualDialogLockOnClick1.addSubscriptions(this.$ContextualDialogLockOnClick0.subscribe('show',this.$ContextualDialogLockOnClick2.bind(this)),this.$ContextualDialogLockOnClick0.subscribe('hide',this.$ContextualDialogLockOnClick3.bind(this)),g.listen(this.$ContextualDialogLockOnClick0.getRoot(),'click',this.$ContextualDialogLockOnClick4.bind(this)),g.listen(this.$ContextualDialogLockOnClick0.getCausalElement(),'click',this.$ContextualDialogLockOnClick5.bind(this)));};k.prototype.disable=function(){"use strict";this.$ContextualDialogLockOnClick0.unlockHover();this.$ContextualDialogLockOnClick1.release();};k.prototype.$ContextualDialogLockOnClick2=function(){"use strict";if(this.$ContextualDialogLockOnClick0.hasBehavior(h)){this.$ContextualDialogLockOnClick0.disableBehavior(h);setTimeout(this.$ContextualDialogLockOnClick0.enableBehavior.bind(this.$ContextualDialogLockOnClick0,h),j);}};k.prototype.$ContextualDialogLockOnClick3=function(){"use strict";this.$ContextualDialogLockOnClick0.unlockHover();};k.prototype.$ContextualDialogLockOnClick4=function(){"use strict";this.$ContextualDialogLockOnClick0.lockHover();};k.prototype.$ContextualDialogLockOnClick5=function(){"use strict";this.$ContextualDialogLockOnClick0.lockHover();this.$ContextualDialogLockOnClick0.show();};e.exports=k;},null);
__d("PagesManagerSpringboardResponseTimeHelper",["invariant","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getSpringBoardFbtText:function(j,k){if(!j||!k||j===0)return null;var l=j>1?k+"s":k;switch(k){case "day":return (h._({"day":"{time} day","days":"{time} days"},[h.param("time",j),h['enum'](l,{day:"day",days:"days"})]));case "hour":return (h._({"hour":"{time} hour","hours":"{time} hours"},[h.param("time",j),h['enum'](l,{hour:"hour",hours:"hours"})]));case "minute":return (h._({"minute":"{time} minute","minutes":"{time} minutes"},[h.param("time",j),h['enum'](l,{minute:"minute",minutes:"minutes"})]));case "second":return (h._({"second":"{time} second","seconds":"{time} seconds"},[h.param("time",j),h['enum'](l,{second:"second",seconds:"seconds"})]));default:g(false);}}};e.exports=i;},null);
__d("PagesManagerSpringboardMetric.react",["ContextualDialogLockOnClick","ContextualLayerHideOnScroll","SpectrumIntegerScale","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnTransition","LayerHideOnBlur","LayerHideOnEscape","LayerRemoveOnHide","Link.react","PagesManagerSpringboardResponseTimeHelper","React","ReactLayeredComponentMixin","Style","UIPagelet","Vector","XUIContextualDialog.react","XUISpinner.react","XUIText.react","cx","fbt","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca=r,da=ca.PropTypes,ea=30*1000,fa=300,ga=1e+06,ha=500,ia=25,ja=r.createClass({displayName:"PagesManagerSpringboardMetric",mixins:[s],propTypes:{adjustFlyoutPositionOnload:da.bool,count:da.number.isRequired,unit:da.oneOf(['day','hour','minute','second']),secondaryCount:da.number,itemKey:da.string.isRequired,flyoutWidth:da.number,label:da.string.isRequired,onFlyoutToggle:da.func,pagelet:da.object,hasFlyout:da.bool,showFlyout:da.bool,displayType:da.oneOf(['number','percent','ratio','time']),href:da.object},getDefaultProps:function(){return {hasFlyout:true,displayType:'number',unit:null};},getInitialState:function(){return {count:0};},componentDidMount:function(){this._onToggle(this.props.showFlyout);this._animateToNewCount(this.props.count);},componentWillReceiveProps:function(ka){if(ka.count!==this.props.count||ka.secondaryCount!==this.props.secondaryCount){this._expireCache();this._animateToNewCount(ka.count);}},render:function(){var ka;if(this.props.displayType==='percent'){ka=this._convertCountToPercentage();}else if(this.props.displayType==='ratio'){ka=aa._("{numerator} of {denominator}",[aa.param("numerator",Math.round(this.state.count)),aa.param("denominator",this.props.secondaryCount)]);}else if(this.props.displayType==='time'){ka=q.getSpringBoardFbtText(this.props.count,this.props.unit);}else{ka=Math.round(this.state.count);if(ka>=ga){ka=i().tickFormat()(ka);}else ka=i().tooltipFormat()(ka);}var la;if(this.props.hasFlyout){la=r.createElement(p,r.__spread({},this.props,{ref:"metric"}),r.createElement("span",{className:"_5vh0"},ka),r.createElement("span",{className:"_5vh1"},this.props.label));}else la=r.createElement(y,{size:"medium",display:"block",ref:"metric"},r.createElement("span",{className:"_5vh0"},ka),r.createElement("span",{className:"_xep"},this.props.label));return (r.createElement("li",{className:"_5vg_"},la));},renderLayers:function(){if(!this.props.hasFlyout)return null;return {metricsFlyout:r.createElement(w,{behaviors:{ContextualDialogLockOnClick:g,ContextualLayerHideOnScroll:h,LayerFadeOnHide:j,LayerFadeOnShow:k,LayerHideOnTransition:l,LayerHideOnBlur:m,LayerHideOnEscape:n,LayerRemoveOnHide:o},contextRef:"metric",hoverContext:r.findDOMNode(this.refs.metric),hoverShowDelay:fa,onToggle:this._onToggle,position:"left",shown:this.props.showFlyout,width:this.props.flyoutWidth},r.createElement("div",{className:"_5x0l",ref:"flyout"},r.createElement("div",{className:"_5x0m"},r.createElement(x,{size:"large"}))))};},_expireCache:function(){this._cacheExpires=0;},_onToggle:function(ka){if(this.props.onFlyoutToggle)this.props.onFlyoutToggle(ka,this.props.itemKey);if(!this.props.hasFlyout)return;if(ka){var la=Date.now();if(la>(this._cacheExpires||0)){this._cacheExpires=la+ea;u.loadFromEndpoint(this.props.pagelet.name,r.findDOMNode(this.refs.flyout),this.props.pagelet.data,this.props.adjustFlyoutPositionOnload?{handler:this._onFlyoutLoad}:null);}}},_onFlyoutLoad:function(){var ka=ba('pagesManagerSpringboard');if(!ka)return;var la=v.getElementPosition(r.findDOMNode(this.refs.metric)),ma=v.getElementPosition(ka),na=la.y-ma.y,oa=v.getElementDimensions(r.findDOMNode(this.refs.flyout)).y;if(na<oa)t.set(r.findDOMNode(this.refs.flyout).offsetParent,'top',-na+'px');},_animateToNewCount:function(ka){var la=ha/ia,ma=ka-this.state.count,na=ma/la,oa=0,pa=setInterval(function(){if(++oa>=la){clearInterval(pa);return this.setState({count:ka});}var qa=this.state.count+na;this.setState({count:qa});}.bind(this),ia);},_convertCountToPercentage:function(){return (aa._("{percentage}\u0025",[aa.param("percentage",Math.round(this.state.count*100))]));}});e.exports=ja;},null);
__d("XPagesManagerMessagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/{page_token}\/messages\/",{folder:{type:"String"},section:{type:"String"},subsection:{type:"String"},threadid:{type:"String"},mercurythreadid:{type:"String"},index:{type:"Int"},initialClientFilter:{type:"String"},page_token:{type:"String",required:true},business_id:{type:"Int"}});},null);
__d("PagesManagerSpringboard.react",["AdsCallToActionTypes","ApiClient","Arbiter","AsyncRequest","BizSiteIdentifier.brands","BoostedPagelikeConstants","BoostedActionType","CustomCTAConstants","CustomCTAUtils","CctaConfirmationDialog.react","d3/time/day","DOM","ge","HubbleApiWrapper","HubbleConstants","HubbleContext","InsightsUtils","MercuryPagesChannelHandler","PagesManagerSpringboardMetric.react","React","ReactLayeredComponentMixin","Run","tidyEvent","PureStoreBasedStateMixin","CctaStore","URI","XPagesManagerMessagesController","cx","fbt","invariant","mapObject","formatDate","PagesMessagingConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){b.__markCompiled&&b.__markCompiled();var ma=z,na=ma.PropTypes,oa=b('PagesMessagingConst'),pa=oa.UNANSWERED_FILTER,qa=['page_posts_impressions_unique','page_fan_adds_unique'],ra=2*60*1000,sa=430,ta={LOCAL_AD_CALL_TO_ACTION_CLICKS:'local_ad_call_to_action_clicks',ADS_RUNNING:'ads_running',CALL_TO_ACTION:'call_to_action',PAGE_LIKES:'page_likes',POST_REACH:'post_reach',QRCODE_SCANS:'qrcode_scans',RESPONSE_RATE:'response_rate',RESPONSE_TIME:'response_time'};function ua(wa){var xa=0;if(wa)wa.forEach(function(ya){xa+=ya;});return xa;}var va=z.createClass({displayName:"PagesManagerSpringboard",mixins:[da(ea),aa],propTypes:{context:na.object,pageInfo:na.object.isRequired,canSeePageLikeAds:na.bool,canSeePageLocalAwarenessAds:na.bool,canSeePagePostAds:na.bool,activePageLikeAds:na.number,activePageLocalAwarenessAds:na.number,activeBoostedPostAds:na.number,callToActionClicks:na.number,callToActionPaidClicks:na.number,hasCallNowCallToActionEnabled:na.bool,localAdCallToActionClicks:na.number,currentLocalAdCallToActionType:na.string,canSeeMessages:na.bool,canSeeInsights:na.bool,canSeeLabelFans:na.bool,initialCallToActionTypes:na.string,initalCanSeeCallToAction:na.bool,newLikesCount:na.number,qrId:na.number,qrScansCount:na.number,responseRate:na.number,responseTime:na.number,responseTimeUnit:na.string,canSeeResponseRate:na.bool.isRequired,canSeeResponseTime:na.bool.isRequired,pageURIToken:na.string.isRequired},getDefaultProps:function(){return {canSeeResponseRate:false,canSeeResponseTime:false};},statics:{calculateState:function(){return {showConfirmation:ea.getConfirmationDialog()};}},getInitialState:function(){var wa=ka(this.props.mostRecentTimes,function(za){return w.pacificSecondsToUTCDate(za);}),xa=new Date(Math.min(wa[u.PIPELINE_DAILY],wa[u.PIPELINE_WEEKLY])),ya=q.utc.offset(xa,-7);return {activeFlyoutKey:null,postReach:0,pageLikes:0,callToActionClicks:0,callToActionPaidClicks:0,CallToActionTypes:this.props.initialCallToActionTypes,canSeeLocalAdCallToActionClicks:this.props.canSeePageLocalAwarenessAds,canSeeCallToAction:this.props.initialCanSeeCallToAction,activePageLikeAds:this.props.activePageLikeAds||0,activeBoostedPostAds:this.props.activeBoostedPostAds||0,insightSince:ya,insightUntil:xa};},componentWillMount:function(){if(this.props.canSeeInsights){ja(this.props.context);h.setClientID(this.props.context.appID);h.setAccessToken(this.props.context.accessToken);v.setContext(this.props.context);this._gatherInsights();}if(this.props.canSeeMessages){var wa=s('pages_manager_flyout_messages');if(wa)r.remove(wa);x.getForFBID(this.props.pageInfo.id).turnOn();}var xa=fa.getRequestURI().getQueryData();if(xa.promoted_like)new j().setURI('/ajax/ads/boosted_pagelike/create.php').setData({pageid:this.props.pageInfo.id,ref:xa.ref}).send();this._cctaSubscription=ea.subscribe('change',function(){if(ea.isInitialized()&&ea.getIsUpdate())this.setState({canSeeCallToAction:!!ea.getData().cctaID,CallToActionTypes:ea.getData().ctaType});}.bind(this));},componentDidMount:function(){if(this.props.canSeeInsights){var wa=setInterval(this._gatherInsights,ra);ba.onLeave(function(){clearInterval(wa);});}if(this.props.canSeePageLikeAds)ca(i.subscribe(l.PANEL_STATUS_CHANGE_FINISH,function(xa,ya){var za=ya.active?1:0;if(this.state.activePageLikeAds!==za&&ya.action_type===m.PAGELIKE)this.setState({activeFlyoutKey:ta.PAGE_LIKES,activePageLikeAds:za});}.bind(this)));if(this.state.canSeeCallToAction)ca(i.subscribe(n.SHOW_FLYOUT,function(xa,ya){this.setState({activeFlyoutKey:ta.CALL_TO_ACTION});}.bind(this)));},renderLayers:function(){if(ea.getConfirmationDialog())return (z.createElement(p,{createButton:this.refs.ctaSpringBoard,pageid:this.props.pageInfo.id}));},render:function(){return (z.createElement("div",{className:"_5vgz",id:"pagesManagerSpringboard"},this._renderThisWeekData()));},_renderThisWeekData:function(){var wa=[];wa.push(this._renderAds());wa.push(this._renderNewLikes());wa.push(this._renderPostReach());wa.push(this._renderQRScans());wa.push(this._renderCallToAction());wa.push(this._renderLocalAdCallToActionClicks());wa.push(this._renderResponseRate());wa.push(this._renderResponseTime());if(!wa.length)return null;wa.unshift(z.createElement("div",{key:"title",className:"_5vg-"},z.createElement("h4",null,ia._("This week"))));return wa;},_renderAds:function(){if(!this.props.showAdsRunning||(!this.props.canSeePageLikeAds&&!this.props.canSeePagePostAds))return null;var wa=(this.props.canSeePageLikeAds?this.state.activePageLikeAds:0)+(this.props.canSeePagePostAds?this.state.activeBoostedPostAds:0);return (z.createElement("ul",{key:"ads"},z.createElement(y,{itemKey:ta.ADS_RUNNING,showFlyout:this.state.activeFlyoutKey===ta.ADS_RUNNING,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardActiveAdsPagelet',data:{page_id:this.props.pageInfo.id,page_like_eligible:this.props.canSeePageLikeAds,page_post_eligible:this.props.canSeePagePostAds,active_boosted_post_ads:this.state.activeBoostedPostAds}},flyoutWidth:290,count:wa,label:ia._({"Ad":"Ad Running","Ads":"Ads Running"},[ia['enum'](this.state.activeAdCount===1?'Ad':'Ads',{Ad:"Ad",Ads:"Ads"})])})));},_renderNewLikes:function(){var wa=this.props.pageInfo,xa=this.props.canSeeLabelFans?372:290,ya=q.utc.offset(this.state.insightUntil,-1),za=0;if(this.props.canSeeInsights){za=this.state.pageLikes;}else za=this.props.newLikesCount;return (z.createElement("ul",{key:"new_likes"},z.createElement(y,{itemKey:ta.PAGE_LIKES,showFlyout:this.state.activeFlyoutKey===ta.PAGE_LIKES,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardNewLikesPagelet',data:{page_id:wa.id,count:za,width:xa,since:la(this.state.insightSince,'m/d/Y',{utc:true}),until:la(ya,'m/d/Y',{utc:true}),since_timestamp:w.dateToSeconds(this.state.insightSince)}},flyoutWidth:xa,count:za,label:ia._({"Like":"Page Like","Likes":"Page Likes"},[ia['enum'](this.state.pageLikes===1?'Like':'Likes',{Like:"Like",Likes:"Likes"})])})));},_renderPostReach:function(){if(!this.props.canSeeInsights)return null;var wa=this.props.pageInfo,xa=q.utc.offset(this.state.insightUntil,-1);return (z.createElement("ul",{key:"post_reach"},z.createElement(y,{itemKey:ta.POST_REACH,showFlyout:this.state.activeFlyoutKey===ta.POST_REACH,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardPostReachPagelet',data:{page_id:wa.id,context:this.props.context,since:la(this.state.insightSince,'m/d/Y',{utc:true}),until:la(xa,'m/d/Y',{utc:true})}},flyoutWidth:624,count:this.state.postReach,label:ia._("Post Reach")})));},_renderQRScans:function(){if(!this.props.hasValidQRCode)return null;var wa=this.props.qrScansCount,xa=430,ya=q.utc.offset(this.state.insightUntil,-1);return (z.createElement("ul",{key:"qr_scans"},z.createElement(y,{itemKey:ta.QRCODE_SCANS,showFlyout:this.state.activeFlyoutKey===ta.QRCODE_SCANS,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardQRScansPagelet',data:{page_id:this.props.pageInfo.id,qr_id:this.props.qrId,since:la(this.state.insightSince,'m/d/Y',{utc:true}),since_timestamp:w.dateToSeconds(this.state.insightSince),until:la(ya,'m/d/Y',{utc:true})}},flyoutWidth:xa,count:wa,label:ia._({"Scan":"QRCode Scan","Scans":"QRCode Scans"},[ia['enum'](wa===1?'Scan':'Scans',{Scan:"Scan",Scans:"Scans"})])})));},_renderCallToAction:function(){if(!this.state.canSeeCallToAction)return null;return (z.createElement("ul",{key:"cta"},z.createElement(y,{ref:"ctaSpringBoard",itemKey:ta.CALL_TO_ACTION,showFlyout:this.state.activeFlyoutKey===ta.CALL_TO_ACTION,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardCallToActionPagelet',data:{page_id:this.props.pageInfo.id}},count:this.props.callToActionClicks+this.props.callToActionPaidClicks,flyoutWidth:328,label:o.getCallToActionLabel(this.state.CallToActionTypes)})));},_renderLocalAdCallToActionClicks:function(){if(!this.props.hasCallNowCallToActionEnabled||!this.state.canSeeLocalAdCallToActionClicks||!this.props.currentLocalAdCallToActionType)return null;var wa=g.TYPES[this.props.currentLocalAdCallToActionType];ja(wa);var xa=wa.text;return (z.createElement("ul",{key:"ads_cta"},z.createElement(y,{itemKey:ta.LOCAL_AD_CALL_TO_ACTION_CLICKS,showFlyout:this.state.activeFlyoutKey===ta.LOCAL_AD_CALL_TO_ACTION_CLICKS,onFlyoutToggle:this._onFlyoutToggle,pagelet:{name:'PagesManagerSpringboardLocalAdCallToActionClicksPagelet',data:{page_id:this.props.pageInfo.id}},count:this.props.localAdCallToActionClicks,flyoutWidth:328,label:xa})));},_renderResponseRate:function(){if(!this.props.canSeeResponseRate||this.props.responseRate===null)return null;var wa=this.props.showRatio?this.props.numConversations:this.props.responseRate,xa=(ia._("Response Rate"));return this._renderResponseComponent(ta.RESPONSE_RATE,this.props.showRatio?'ratio':'percent',wa,null,this.props.numThreads,xa);},_renderResponseTime:function(){if(!this.props.canSeeResponseTime||this.props.responseTime===null||this.props.responseTimeUnit===null)return null;var wa=(ia._("Response Time"));return this._renderResponseComponent(ta.RESPONSE_TIME,'time',this.props.responseTime,this.props.responseTimeUnit,null,wa);},_renderResponseComponent:function(wa,xa,ya,za,ab,bb){var cb=ga.getURIBuilder().setString('page_token',this.props.pageURIToken).setString('initialClientFilter',pa).getURI();return (z.createElement("ul",{key:wa},z.createElement(y,{itemKey:wa,showFlyout:this.state.activeFlyoutKey===wa,onFlyoutToggle:this._onFlyoutToggle,adjustFlyoutPositionOnload:true,pagelet:{name:'PagesManagerSpringboardMessagesPagelet',data:{business_id:k.getBusinessID(),page_id:this.props.pageInfo.id,initialClientFilter:pa}},displayType:xa,flyoutWidth:sa,count:ya,unit:za,secondaryCount:ab,label:bb,href:cb})));},_gatherInsights:function(){t.getPageInsights({metric:qa,since:this.state.insightSince,until:this.state.insightUntil},this._handleNewData);},_handleNewData:function(wa){var xa=wa.values,ya=[this.state.pageLikes];if(xa.page_fan_adds_unique){var za=u.PERIOD_DAY;ya=xa.page_fan_adds_unique[za].slice(-7);}var ab=[this.state.postReach];if(xa.page_posts_impressions_unique){var bb=u.PERIOD_WEEK;ab=xa.page_posts_impressions_unique[bb].slice(6);}this.setState({pageLikes:ua(ya),postReach:ua(ab)});},_onFlyoutToggle:function(wa,xa){if(wa){this.setState({activeFlyoutKey:xa});}else if(this.state.activeFlyoutKey===xa)this.setState({activeFlyoutKey:null});}});e.exports=va;},null);