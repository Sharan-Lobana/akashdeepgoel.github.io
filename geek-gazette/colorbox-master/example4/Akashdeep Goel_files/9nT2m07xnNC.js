/*!CK:122909256!*//*1432082649,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["24aB9"]); }

__d("PUWApplications",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWSteps",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("fileSliceName",["UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='slice',i;if(i=g.chrome()){if(i<21)h='webkitSlice';}else if(i=g.firefox()){if(i<13)h='mozSlice';}else if(!(i=g.safari()))if(g.webkit())h='webkitSlice';e.exports=h;},null);
__d("fileSlice",["fileSliceName"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.File&&a.File.prototype[g];e.exports=h;},null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={supportsChunking:function(){return (typeof h==='function')&&this.supportsXHR();},supportsFullProgress:function(){return !g.firefox();},supportsFileAPI:function(){return ('FileList' in window);},supportsFileReading:function(){return ('FileReader' in window&&'DataView' in window);},supportsXHR:function(){return ('FormData' in window);}};e.exports=i;},null);
__d("VideoUploadFile",["fileSlice","VideoUploadFeatureDetector"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this.$VideoUploadFile0=j;this.$VideoUploadFile1=i.getExtensionFromFileInput(j);if(h.supportsFileAPI()&&j.files.length){this.$VideoUploadFile2=j.files[0];this.$VideoUploadFile3=this.$VideoUploadFile2.size;}else{this.$VideoUploadFile2=null;this.$VideoUploadFile3=null;}}i.prototype.getFileInput=function(){"use strict";return this.$VideoUploadFile0;};i.prototype.getFile=function(){"use strict";return this.$VideoUploadFile2;};i.prototype.getSize=function(){"use strict";return this.$VideoUploadFile3;};i.prototype.getExtension=function(){"use strict";return this.$VideoUploadFile1;};i.prototype.getChunk=function(j,k){"use strict";return this.$VideoUploadFile2?g.call(this.$VideoUploadFile2,j,k):null;};i.getExtensionFromFileInput=function(j){"use strict";return j.value.indexOf('.')!=-1?j.value.split('.').pop().toLowerCase():'';};e.exports=i;},null);
__d("ComposerXMediaUploadHandler",["Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=i.MEDIA_UPLOAD,s='/ajax/composerx/attachment/video/upload/',t=0;function u(v,w){"use strict";this.$ComposerXMediaUploadHandler0=v;this.$ComposerXMediaUploadHandler1=w;}u.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),s].forEach(function(v){j.fetchAttachmentData(this.$ComposerXMediaUploadHandler0,v);}.bind(this));};u.prototype.handleFileSelected=function(v){"use strict";if(u.isVideoFile(v)){this.handleVideoSelected(v);}else this.handlePhotoSelected(v);};u.prototype.handleVideoSelected=function(v){"use strict";if(this.$ComposerXMediaUploadHandler1&&this.$ComposerXMediaUploadHandler1.imagesOnly){var w=new l().setModal(true).setButtons([l.OK]);if(this.$ComposerXMediaUploadHandler1.isEditComposer){w.setTitle(q._("Can't add video")).setBody(q._("Sorry, you can't add a video to a post you're editing."));}else w.setTitle(q._("Invalid Image File")).setBody(q._("Please upload a valid image file."));w.show();return;}j.getAttachment(this.$ComposerXMediaUploadHandler0,s);g.inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler0+'/videoupload',{fileInput:v},g.BEHAVIOR_PERSISTENT);};u.prototype.handlePhotoSelected=function(v){"use strict";j.getAttachment(this.$ComposerXMediaUploadHandler0,this.getPhotoUploadAttachmentEndpoint());u.$ComposerXMediaUploadHandler2(this.$ComposerXMediaUploadHandler0,v);};u.isVideoFile=function(v){"use strict";var w=p.getExtensionFromFileInput(v.getInput());return !!o.videoExtensions[w];};u.prototype.$ComposerXMediaUploadHandler3=function(){"use strict";return (this.$ComposerXMediaUploadHandler1)?this.$ComposerXMediaUploadHandler1.photoUploadOverrideEndpoint:null;};u.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var v=this.$ComposerXMediaUploadHandler3();return (v)?v:r;};u.$ComposerXMediaUploadHandler2=function(v,w){"use strict";g.inform('ComposerXFilesStore/filesAdded/'+v+'/mediaupload',{fileInput:w},g.BEHAVIOR_PERSISTENT);};u.setupFileUploadToComposerDialog=function(v,w,x){"use strict";var y='composerxmediauploadhandler'+t++,z=function(ca){k.conditionClass(v.getControl(),x,ca);v.getInput().disabled=ca;},aa=new n(w),ba=aa.getQueryData();ba.client_ref=y;aa.setQueryData(ba);w=aa.toString();v.subscribe('change',function(){new h().setURI(w).setErrorHandler(function(){v.clear();z(false);}).send();z(true);});g.subscribe('composer/dialog/'+y+'/new',function(ca,da){this.$ComposerXMediaUploadHandler2(da.composerID,v);var ea=new m();ea.addSubscriptions(g.subscribe('composer/publish',function(event,fa){if(da.composerID===fa.composer_id)a.location.reload();}),da.dialog.subscribe('hide',function(){ea.release();v.clear();z(false);}));}.bind(this));};e.exports=u;},null);
__d("ComposerXMediaPostTab",["Arbiter","AudienceAlignment","ComposerXMarauderLogger","ComposerXMediaUploadHandler","Event"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.abort();g.inform('composer/reset_pab_nux');i.logEntry(m);var o=new j(m);k.listen(n.getContainer(),'click',function(){o.fetchAttachments();n.getInput().disabled=false;});n.subscribe('change',function(){o.handleFileSelected(n);});}e.exports=l;},null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","PUWApplications","copyProperties","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(p,q){var r={};p.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){r.retry=true;p.nonce=m(4294967296);}h.post(i.banzaiRoute,p,r);if(q)setTimeout(q,0);}function o(p,q){if(i.useBanzai){n(p,q);}else{var r=new g(i.loggingEndpoint,{data:JSON.stringify(p)}).setHandler(q);if(i.timeout)r.setTimeout(10*1000);r.send();}}e.exports={logStep:function(p,q,r){var s=this.getWaterfallID&&this.getWaterfallID(),t=this.getWaterfallAppName&&this.getWaterfallAppName();if(!s||!t)return;if(i.reduceLoggingRequests&&t===j.WEB_FLASH){r&&r();return;}o(k({step:p,qn:s,uploader:t,ref:this.getWaterfallSource&&this.getWaterfallSource()},q),r);}};},null);
__d("PhotosUploadWaterfallMixin",["Flash","PhotosUploadWaterfall","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){h.sendSignal(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:g.getVersionString(),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){h.sendBanzai(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};e.exports=l;},null);
__d("FilePickerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d("UploadSession",["AsyncRequest","FilePickerEvent","PhotosUploadWaterfall","PUWSteps","URI","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(p){"use strict";this._sessionID=p;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}n.prototype.addFilePicker=function(p){"use strict";if(!l(this._pickers,p)){this._pickers.push(p);if(this._controller&&p.getSwfID&&p.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(p.getSwfID());p.subscribe(h.BEGIN,function(q,r){if(!this._beginLogged){this._beginLogged=true;p.logWaterfallStep(i.BEGIN);p.logStep(j.CLIENT_FLOW_BEGIN);}}.bind(this));p.subscribe(h.SELECTED,function(q,r){p.logStep(j.CLIENT_SELECT_SUCCESS,{volume:r.files.length});if(this._controller){this._controller.uploadFiles(r.files);}else this._pendingFileLists.push(r);if(this._asyncBootstrapped)return;var s=p._button,t=new k(s.getAttribute('ajaxify'));t.addQueryData('num_selected',r.files.length);g.bootstrap(t.toString(),s,true);this._asyncBootstrapped=true;}.bind(this));p.subscribe(h.SELECT_START,function(){p.logStep(j.CLIENT_SELECT_BEGIN);}.bind(this));p.subscribe(h.SELECT_CANCELED,function(){p.logStep(j.CLIENT_SELECT_CANCEL);if(!this._overlay){p.logStep(j.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this));p.subscribe(h.ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this));p.subscribe(h.SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this));}};n.prototype.addController=function(p){"use strict";this._controller=p;this._asyncBootstrapped=true;var q=(this._controller.getWaterfallID)?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,r=(this._controller.getUploaderApp)?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;i.sendSignal({qn:q,step:i.BEGIN,uploader:r});}if(this._pendingFileLists.length){var s=[];this._pendingFileLists.forEach(function(t){s=s.concat(t.files);});this._controller.uploadFiles(s);}else i.sendSignal({qn:q,step:i.OVERLAY_FIRST,uploader:r});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};n.prototype.addOverlay=function(p){"use strict";this._overlay=p;};n.prototype.addOverlayAndController=function(p,q){"use strict";this.addOverlay(p);this.addController(q);};n.addFilePickerToSession=function(p,q){"use strict";o(p).addFilePicker(q);};n.addControllerToSession=function(p,q){"use strict";o(p).addController(q);};n.addOverlayToSession=function(p,q){"use strict";o(p).addOverlay(q);};n.addOverlayAndControllerToSession=function(p,q,r){"use strict";o(p).addOverlayAndController(q,r);};function o(p){if(!m[p])m[p]=new n(p);return m[p];}e.exports=n;},null);
__d("MetaComposerEdDialog",["ARIA","Animation","Arbiter","AsyncRequest","DOM","Ease","Parent","SelectorDeprecated","Vector","copyProperties","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};p(s.prototype,{_init:function(){i.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)i.subscribe('composer/mutate',function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)i.subscribe('SelectedPrivacyOption/changed',function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));n.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=k.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=o.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;k.setContent(w,v);g.announce(q(w));this._dialog.show();var x=m.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new h(x);}else this._anim=new h(x).from('opacity',0);this._anim.to('opacity',1).ease(l.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(l.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=s;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(s.hasTags);}r.prototype._getData=function(){"use strict";return this._data;};r.prototype.getTooltip=function(){"use strict";return this._getData().tooltip;};r.prototype.getPostParam=function(){"use strict";return this._getData().postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._getData().triggerIcon;};r.prototype.getTriggerLabel=function(){"use strict";return this._getData().triggerLabel;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._getData().tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._getData().baseValue;};r.prototype.getIndex=function(){"use strict";return this._getData().value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._getData().triggerLabel;if(s&&this._getData().showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._getData().triggerLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._getData().optionSubtitleWithTags);}else this._setSubtitle(this._getData().optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._getData().label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._getData().isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._getData().optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingController","XPrivacyCustomDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=l.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=k.getURIBuilder().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q,r){"use strict";var s=i.get(p,'PrivacySelectorCustomOption');s.getSelector().updateDataForItemIndex(s.getIndex(),q,r);s.getSelector().setValue(s.getIndex());i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=n.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=n.getURIBuilder().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s&&s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(s&&this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("MenuStaticItem",["DOM","MenuItemBase","React","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this);this._data=p;}o.prototype._renderItemContent=function(){"use strict";var p=g.create('span',{className:"_54nc _54ah"});if(this._data.children){i.render(i.createElement("span",{className:"_54nh"},this._data.children),p);}else g.setContent(p,g.create('span',{className:"_54nh"},this._data.markup));return p;};j(o.prototype,{handleClick:l});e.exports=o;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id,reload:m.reload};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorTransitionDefaultController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/transition_default\/",{post_param:{type:"String"},render_location:{type:"Enum",enumType:0}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","Run","SubscriptionsHandler","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingController","XPrivacySelectorTransitionDefaultController","XPrivacySelectorUpdateController","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=3,ha=fa(g);for(var ia in ha)if(ha.hasOwnProperty(ia))ka[ia]=ha[ia];var ja=ha===null?null:ha.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=ha;function ka(la,ma,na,oa,pa,qa){"use strict";r.set(la,'selector',this);this._root=la;this._button=ma;this._config=qa;this._menu=na;this._popoverMenu=pa;this._input=oa;this._isSavedOnSelect=qa.is_saved_on_select;this._privacyFBID=qa.privacy_fbid;this._contentType=qa.content_type;this._renderLocation=qa.render_location;this._supportsTagExpansion=qa.supports_tag_expansion;this._prefixTooltipApps=qa.should_prefix_tooltip_apps;this._shouldDisplayLabel=qa.should_display_label;this._tags=qa.tagged_uids;this._hasTags=this._tags.length>0;this._entID=qa.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=qa.selector_sync_key;this._previousParam=null;this._confirmOnSave=false;this._confirmOnSaveDialogs={};this._listeners=new w();if(qa.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof u))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();v.onLeave(this._cleanup.bind(this));}ka.prototype._cleanup=function(){"use strict";this._listeners&&this._listeners.release();this._listeners=null;};ka.prototype._initSelectorSync=function(){"use strict";this._listeners.addSubscriptions(t.subscribe('change',function(){t.get(this._selectorSyncKey,function(la){if(la.unique_id!==this._menu._config.id){this._receivingUpdate=true;if(la.post_param)this.selectOption(la.post_param);la.reload&&this.reloadSelector();}}.bind(this));}.bind(this)));if(!this._syncsToDefault())this._listeners.addSubscriptions(this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this)));};ka.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var la=this._getSelectedOption();s.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:la.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ka.prototype.shouldReplaceOnPost=function(){"use strict";return this._config.replace_on_post||this.isComposerWithDefault();};ka.prototype.isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ka.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ka.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==q.PrivacyField.DEFAULT_COMPOSER.toString();};ka.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic();};ka.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends();};ka.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe();};ka.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue();};ka.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam().toString();};ka.prototype.setValue=function(la){"use strict";this._menu.setValue(la);};ka.prototype.openSelectorExpanded=function(la){"use strict";this.openSelector(function(){this._menu.expandMenu();la&&la();}.bind(this));};ka.prototype.openSelector=function(la){"use strict";if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',function(){la&&la();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();la&&la();}};ka.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ka.prototype.getPopover=function(){"use strict";return this._popover;};ka.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ka.prototype.getRoot=function(){"use strict";return this._root;};ka.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ka.prototype.selectDefaultOption=function(){"use strict";this._menu.selectDefaultOption();this._updateMenu();};ka.prototype.selectOption=function(la){"use strict";if(!la)return;if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,la));this._fetchAsyncMenu();}else this._selectOptionImpl(la);};ka.prototype._selectOptionImpl=function(la){"use strict";this._menu.selectOption(la);this._updateMenu();};ka.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ka.prototype.setTagExpansionButton=function(la){"use strict";this._tagExpansionButton=la;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ka.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ka.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=x.FRIENDS_OF_TAGGED;var la=this._getSelectedOption();if(!la)return;var ma=JSON.parse(la.getPostParam());if(ma.settings&&ma.settings.no_tag_expansion===true){this._tagExpansionButton=x.TAGGED_ONLY;}else this._tagExpansionButton=x.FRIENDS_OF_TAGGED;};ka.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ka.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof u))return;var la;this._menu.forEachItem(function(ma){if(ma instanceof n&&ma.isSelected())la=ma;}.bind(this));return la;};ka.prototype._onItemClick=function(la,ma){"use strict";var na=ma.item;if(na instanceof m)return;if(na.isBasicOption()){this.updateDataForItemIndex(na.getIndex(),na.getPostParam().toString());}else if(na.isCustomOption()){this._closeForCustom=true;na.openDialog(this);}this.inform('click',{customSelected:na.isCustomOption()});};ka.prototype.getContentType=function(){"use strict";return this._contentType;};ka.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ka.prototype.getPostParam=function(){"use strict";return this._postParam;};ka.prototype.getTags=function(){"use strict";return this._tags;};ka.prototype.registerConfirmOnSaveDialog=function(la,ma,na){"use strict";this._confirmOnSave=true;if(!(la in this._confirmOnSaveDialogs))this._confirmOnSaveDialogs[la]={};na.subscribe('hide',function(){if(this._previousParam!==this._postParam)this.selectOption(this._previousParam);}.bind(this));na.subscribe('button',function(){this._savePrivacy();na.hide();}.bind(this));this._confirmOnSaveDialogs[la][ma]=na;};ka.prototype.updateDataForItemIndex=function(la,ma,na){"use strict";if(na){this._tagExpansionButton=na;this.inform('CustomTagExpansion',this._tagExpansionButton);}var oa=this._menu.getItemForIndex(la);if(oa.isCustomOption())oa.setPostParam(ma);this._selectedOption=oa;this._previousParam=this._postParam;this._postParam=ma;l.setValue(this._input,ma);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)if(this._confirmOnSave&&(this._previousParam in this._confirmOnSaveDialogs)&&(this._postParam in this._confirmOnSaveDialogs[this._previousParam])){this._confirmOnSaveDialogs[this._previousParam][this._postParam].show();}else this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ka.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ka.prototype._savePrivacy=function(){"use strict";this._previousParam=this._postParam;this._sendUpdateRequest();};ka.prototype.reloadSelector=function(){"use strict";this._cleanup();var la=ba.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new h().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(la).send();};ka.prototype.transitionToDefault=function(){"use strict";var la=aa.getURIBuilder().setString('post_param',this._postParam).setEnum('render_location',this._renderLocation).getURI();new h().setRelativeTo(this._root).setHandler(function(){this._config.selector_sync_key=q.PrivacyField.DEFAULT_COMPOSER.toString();this._initSelectorSync();this.inform.bind(this,'reloaded');}.bind(this)).setURI(la).send();};ka.prototype._sendUpdateRequest=function(){"use strict";var la=ba.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._root).setHandler(ca(this,function(ma){if(this._config.replace_on_select)this._cleanup();if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var na=ma&&ma.payload&&ma.payload.tooltip;na&&this._setTooltipValue(ma.payload.tooltip);this.inform('selector_updated');})).setURI(la).send();};ka.prototype.informTagsChanged=function(la){"use strict";var ma=this._getTags(la);this.informTagsChangedWithIDs(ma);};ka.prototype.informTagsChangedWithIDs=function(la){"use strict";var ma=!la.length;if(this._hasTags===ma){this._hasTags=!!la.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==la.length){this._tags=la;this._updateTooltipAfterChange();}};ka.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===x.FRIENDS_OF_TAGGED.valueOf());};ka.prototype._getTags=function(la){"use strict";var ma=[],na=k.getID();if(la.withTags)for(var oa=0;oa<la.withTags.length;oa++){var pa=la.withTags[oa].info;if(pa.uid!=na)ma.push(pa.uid);}if(la.mention)for(var qa in la.mention)if(la.mention[qa].type=='user'&&la.mention[qa].uid!=na)ma.push(la.mention[qa].uid);return ma;};ka.prototype._updateTriggerButtonLabel=function(){"use strict";var la=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)j.hide(la);i.setIcon(this._button,la.cloneNode());if(!this._shouldDisplayLabel)return;o.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===ga){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};ka.prototype._updateTooltipAfterChange=function(){"use strict";var la=ea._("Loading...");this._setTooltipValue(la);this._sendUpdateRequest();};ka.prototype._setTooltipValue=function(la){"use strict";la&&y.set(this._button,la);};ka.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ka.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof u))return;this._menu.onPopoverOpen(this._getSelectedOption());var la=z.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(la).send();this.inform('open');};ka.prototype._onMenuLoad=function(){"use strict";this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ka;},null);